System.register("chunks:///_virtual/UIMoneyCube.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts"],(function(n){"use strict";var e,t,i,o,c,r,a,s,l,u,h,f,d,p,y,b,w,g;return{setters:[function(n){e=n.cclegacy,t=n._decorator,i=n.Node,o=n.Label,c=n.UITransform,r=n.Vec3,a=n.tween,s=n.director,l=n.Component},function(n){u=n.applyDecoratedDescriptor,h=n.inheritsLoose,f=n.initializerDefineProperty,d=n.assertThisInitialized,p=n.defineProperty},function(n){y=n.CUR_PLATFORM,b=n.PLATFORM_TYPE},function(n){w=n.default},function(n){g=n.Tools}],execute:function(){var v,m,C,M,T,N,B,I,L,P,U;e._RF.push({},"008f1ocLqlD6JqfcPMHQIu8","UIMoneyCube",void 0);var S=t.ccclass,z=t.property;n("UIMoneyCube",(v=S("UIMoneyCube"),m=z(i),C=z(i),M=z(i),T=z(o),v((I=u((B=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i))||this,f(d(e),"action",I,d(e)),f(d(e),"maskNode",L,d(e)),f(d(e),"iconNode",P,d(e)),f(d(e),"countLabel",U,d(e)),p(d(e),"actTween",void 0),p(d(e),"info",null),e}h(e,n);var t=e.prototype;return t.onLoad=function(){this.node.getComponent(c).priority=6,this.action.getChildByName("TT").active=y==b.TT,this.action.getChildByName("Else").active=y!=b.TT},t.start1=function(){var n=this;if(1==w.instance.ziYuanLiBao){var e=cc.winSize,t=w.instance.showBannerTime+.5,i=this.action.getComponent(c).convertToWorldSpaceAR(this.action.position).subtract3f(e.width/2,.7*e.height,0);this.action.setPosition(i),this.scheduleOnce((function(){n.action.setPosition(new r(0,0,0))}),t)}},t.init=function(n){if(this.info=n,this.info)if(this.start1(),w.instance.reportCustom("MoneyCubeUIShow"),g.reportEvent("MoneyCubeUIShow"),this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=a(this.action).to(.5,{scale:new r(1,1,1)},{easing:"quintOut"}).start(),this.refreshUI(),w.instance.ziYuanLiBao){var e=w.instance.showBannerTime;this.scheduleOnce((function(){g.showBanner(!0),console.log("展示banner")}),e)}else g.showBanner(!0)},t.refreshUI=function(){if(0==this.info.type){for(var n=0;n<this.iconNode.children.length;n++)this.iconNode.children[n].active="gold"==this.iconNode.children[n].name;this.countLabel.string="x"+Math.floor(this.info.count)}else if(1==this.info.type){for(var e=0;e<this.iconNode.children.length;e++)this.iconNode.children[e].active="wood"==this.iconNode.children[e].name;this.countLabel.string="x"+Math.floor(this.info.count)}},t.onBtnVideoClick=function(){g.playSound("click");var n=function(){this.sendReward()}.bind(this);w.instance.watchVideo("MoneyCube",n)},t.sendReward=function(){s.getScene().emit("MONEY_CUBE_USE",this.info.type,this.info.count),this.closeMine()},t.onBtnCloseClick=function(){g.playSound("click"),this.closeMine(),g.showInterstitial()},t.closeMine=function(){this.node.removeFromParent(),this.node.destroy(),y!=b.OPPO&&y!=b.VIVO&&g.showBanner(!1)},e}(l)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=u(B.prototype,"maskNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=u(B.prototype,"iconNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=u(B.prototype,"countLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=B))||N));e._RF.pop()}}}));

System.register("chunks:///_virtual/UINextWorld.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(n){"use strict";var e,t,o,i,r,c,s,a,l,u,f,p,d,h,y,M;return{setters:[function(n){e=n.cclegacy,t=n._decorator,o=n.Node,i=n.director,r=n.tween,c=n.Vec3,s=n.Component},function(n){a=n.applyDecoratedDescriptor,l=n.inheritsLoose,u=n.initializerDefineProperty,f=n.assertThisInitialized},function(n){p=n.CUR_PLATFORM,d=n.PLATFORM_TYPE},function(n){h=n.default},function(n){y=n.Tools},function(n){M=n.GameManager}],execute:function(){var g,S,v,C,_;e._RF.push({},"06d2fiiNS9AoYRCUFDzkdss","UINextWorld",void 0);var m=t.ccclass,F=t.property;n("UINextWorld",(g=m("UINextWorld"),S=F(o),g((_=a((C=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return e=n.call.apply(n,[this].concat(o))||this,u(f(e),"action",_,f(e)),e}l(e,n);var t=e.prototype;return t.onLoad=function(){this.action.setScale(0,0,0),i.getScene().on("CLOSE_NEXT_UI",this.closeMine,this),y.showBanner(!0)},t.start=function(){r(this.action).to(.5,{scale:new c(1,1,1)},{easing:"quintOut"}).start()},t.onBtnGoNextSceneClick=function(){y.playSound("click"),this.closeMine(),1==h.instance.curSceneId&&(h.instance.reportCustom("FinishMission1"),y.reportEvent("FinishMission1")),M.instance.nextScene()},t.onBtnCloseClick=function(){y.playSound("click"),this.closeMine()},t.closeMine=function(){this.node.removeFromParent(),this.node.destroy(),p!=d.OPPO&&p!=d.VIVO&&y.showBanner(!1)},e}(s)).prototype,"action",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=C))||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/AIController.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./Tools.ts","./GameManager.ts"],(function(t){"use strict";var i,o,n,e,s,d,h,a,r,c,l,u,f,v;return{setters:[function(t){i=t.cclegacy,o=t._decorator,n=t.Vec3,e=t.Node,s=t.Component},function(t){d=t.inheritsLoose,h=t.defineProperty,a=t.assertThisInitialized},function(t){r=t.WORKER_ID,c=t.SOLDIER_ID,l=t.WOOD_WORKER_ID,u=t.WOKER_FOOD_WEIGHT},function(t){f=t.Tools},function(t){v=t.GameManager}],execute:function(){var p;i._RF.push({},"0f086YhntxJBq595BAJBL4Y","AIController",void 0);var P=o.ccclass;o.property,t("AIController",P("AIController")(p=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return i=t.call.apply(t,[this].concat(e))||this,h(a(i),"out",new n),h(a(i),"state",0),h(a(i),"id",-1),h(a(i),"ant",void 0),h(a(i),"anchorNode",void 0),h(a(i),"_tempFood",null),i}d(i,t);var o=i.prototype;return o.init=function(t){this.id=t.id,this.ant=t.ant,this.anchorNode=new e,this.node.parent?this.node.parent.addChild(this.anchorNode):console.error("父节点消失了？")},o.update=function(t){t>2||!this.ant||this.ant.isDead||this.ant.isHelpMeAnt||this.ant.isBugSave||(6==this.id?this.updateSoldierRq():r.indexOf(this.id)>-1?this.updateWorkerAnt():c.indexOf(this.id)>-1?this.updateSoldierAnt():l.indexOf(this.id)>-1&&this.updateWoodAnt())},o.updateWorkerAnt=function(){0==this.state&&(this.state=1,0==this.ant.team?this.myWorkerAntDoWork():this.enemyWokerAntDoWork())},o.updateSoldierAnt=function(){if(0==this.state){if(this.state=1,this.ant.isDead)return this.ant.isMoving=!1,void(this.state=0);if(this.ant.enemy){var t=function(){this.ant.isDead?(this.ant.isMoving=!1,this.unschedule(t),this.state=0):this.ant.enemy&&!this.ant.enemy.isDead&&this.ant.enemy.node?(this.anchorNode.setWorldPosition(this.ant.enemy.node.worldPosition),this.node.lookAt(this.anchorNode.worldPosition),this.ant.isMoving=!0):(this.ant.isMoving=!1,this.unschedule(t),this.state=0)}.bind(this);this.schedule(t)}else{var i=v.instance.getSoldierMovePos();this.anchorNode.setWorldPosition(i),this.node.lookAt(i),this.ant.isMoving=!0;var o=function(){this.ant.isDead||this.enemy?(this.ant.isMoving=!1,this.unschedule(o),this.state=0):(this.node.lookAt(this.anchorNode.worldPosition),n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.2&&(this.ant.isMoving=!1,this.unschedule(o),this.state=0))}.bind(this);this.schedule(o)}}},o.updateSoldierRq=function(){if(0==this.state){if(this.state=1,this.ant&&this.ant.isDead)return this.ant.isMoving=!1,void(this.state=0);if(this.ant.enemy){var t=function(){this.ant.isDead?(this.ant.isMoving=!1,this.unschedule(t),this.state=0):this.ant.enemy&&!this.ant.enemy.isDead&&this.ant.enemy.node?(this.anchorNode.setWorldPosition(this.ant.enemy.node.worldPosition),this.node.lookAt(this.anchorNode.worldPosition),this.ant.isMoving=!0):(this.ant.isMoving=!1,this.unschedule(t),this.state=0)}.bind(this);this.schedule(t)}else{var i=v.instance.getSoldierRqPos();this.anchorNode.setWorldPosition(i),this.node.lookAt(i),this.ant.isMoving=!0;var o=function(){this.ant.isDead||this.enemy?(this.ant.isMoving=!1,this.unschedule(o),this.state=0):(this.node.lookAt(this.anchorNode.worldPosition),n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.2&&(this.ant.isMoving=!1,this.unschedule(o),this.state=0))}.bind(this);this.schedule(o)}}},o.updateWoodAnt=function(){var t=this;if(0==this.state){if(this.state=1,!this._tempFood){for(var i=[],o=0;o<v.instance.foods.length;o++){var e=v.instance.foods[o];!e||8!=e.id&&9!=e.id||!e.node.activeInHierarchy||e.isDead||i.push(e)}i=i.sort((function(i,o){return n.distance(new n(i.node.worldPosition.x,0,i.node.worldPosition.z),t.node.worldPosition)>n.distance(new n(o.node.worldPosition.x,0,o.node.worldPosition.z),t.node.worldPosition)?1:-1}));for(var s=[],d=0;d<i.length;d++)for(var h=u[d],a=0;a<h;a++)s.push(i[d].sid);var r=null,c=f.getRandomInt(0,s.length-1);if(!s[c])return void this.scheduleOnce((function(){t.state=0}),.5);r=v.instance.getFoodBySid(s[c]),this._tempFood=r}if(this._tempFood){var l=v.instance.getFoodOnePieceByNear(this.node.worldPosition,this._tempFood,2);if(l&&l.piece){this.anchorNode.setWorldPosition(new n(l.piece.worldPosition.x,0,l.piece.worldPosition.z)),this.node.lookAt(this.anchorNode.worldPosition),this.ant.isMoving=!0;var p=function(){var t=this;return!this._tempFood||this._tempFood.isDead?(this._tempFood=null,this.unschedule(p),this.ant.isMoving=!1,void this.scheduleOnce((function(){t.state=0}),.5)):0==this._tempFood.info.foodLeft[l.pieceIndex]?(this.unschedule(p),this.ant.isMoving=!1,void(this.state=0)):void(n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.1&&(this.unschedule(p),this.ant.isMoving=!1,this.ant.changeAnimation("Famu"),this.scheduleOnce((function(){return t.ant.changeAnimation("Idle"),!t._tempFood||t._tempFood.isDead?(t._tempFood=null,t.unschedule(p),t.ant.isMoving=!1,void t.scheduleOnce((function(){t.state=0}),.5)):0==t._tempFood.info.foodLeft[l.pieceIndex]?(t.unschedule(p),t.ant.isMoving=!1,void(t.state=0)):(t.ant.isMoving=!1,t.ant.eatFood(t._tempFood,l.piece,l.pieceIndex),t._tempFood&&t._tempFood.isDead&&(t._tempFood=null),void(t.state=0))}),5)))}.bind(this);this.schedule(p)}else this.scheduleOnce((function(){t.state=0}),.5)}else this.scheduleOnce((function(){t.state=0}),.5)}},o.enemyWokerAntDoWork=function(){for(var t=this,i=[],o=0;o<v.instance.foods.length;o++){var e=v.instance.foods[o];e&&8!=e.id&&9!=e.id&&!e.isDead&&e.node.activeInHierarchy&&i.push(e)}var s=(i=i.sort((function(i,o){return n.distance(new n(i.node.worldPosition.x,0,i.node.worldPosition.z),t.node.worldPosition)>n.distance(new n(o.node.worldPosition.x,0,o.node.worldPosition.z),t.node.worldPosition)?-1:1})))[0];if(s){var d=v.instance.getFoodOnePieceByNear(this.node.worldPosition,s,2);if(d&&d.piece){this.anchorNode.setWorldPosition(new n(d.piece.worldPosition.x,0,d.piece.worldPosition.z)),this.node.lookAt(this.anchorNode.worldPosition),this.ant.isMoving=!0;var h=function(){var t=this;if(s.isDead)return this.unschedule(h),this.ant.isMoving=!1,void this.scheduleOnce((function(){t.state=0}),.5);if(0==s.info.foodLeft[d.pieceIndex])return this.unschedule(h),this.ant.isMoving=!1,void(this.state=0);if(n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.1){this.unschedule(h),this.ant.isMoving=!1,this.ant.eatFood(s,d.piece,d.pieceIndex),this.anchorNode.setWorldPosition(this.ant.firstPos),this.node.lookAt(this.anchorNode.worldPosition),this.ant.isMoving=!0;var i=function(){if(n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.1){this.unschedule(i),this.ant.isMoving=!1;var t=this.ant.node.worldPosition.clone();this.ant.dead(!1),v.instance.showEffect("eff_RedAntGone",t,1)}else this.node.lookAt(this.anchorNode.worldPosition)}.bind(this);this.schedule(i)}else this.node.lookAt(this.anchorNode.worldPosition)}.bind(this);this.schedule(h)}else this.scheduleOnce((function(){t.state=0}),.5)}else this.scheduleOnce((function(){t.state=0}),.5)},o.myWorkerAntDoWork=function(){var t=this,i=this._tempFood;if(null==i){for(var o=[],e=0;e<v.instance.foods.length;e++){var s=v.instance.foods[e];s&&8!=s.id&&9!=s.id&&s.info&&1==s.info.canEat&&!s.isDead&&o.push(s)}o=o.sort((function(i,o){return n.distance(new n(i.node.worldPosition.x,0,i.node.worldPosition.z),t.node.worldPosition)>n.distance(new n(o.node.worldPosition.x,0,o.node.worldPosition.z),t.node.worldPosition)?1:-1}));for(var d=[],h=0;h<o.length;h++)for(var a=u[h],r=0;r<a;r++)d.push(o[h].sid);var c=f.getRandomInt(0,d.length-1);i=v.instance.getFoodBySid(d[c]),this._tempFood=i}else{if(!this._tempFood.node||!this._tempFood.node.parent)return this._tempFood=null,this.ant.isMoving=!1,void(this.state=0);if(this._tempFood&&this._tempFood.isDead)return this._tempFood=null,this.ant.isMoving=!1,void(this.state=0)}if(i){var l=v.instance.getFoodOnePieceByNear(this.node.worldPosition,i,2);if(l&&l.piece){this.anchorNode.setWorldPosition(new n(l.piece.worldPosition.x,0,l.piece.worldPosition.z)),this.node.lookAt(this.anchorNode.worldPosition),this.ant.isMoving=!0;var p=function(){var t=this;return i.isDead?(this._tempFood=null,this.unschedule(p),this.ant.isMoving=!1,void this.scheduleOnce((function(){t.state=0}),.5)):0==i.info.foodLeft[l.pieceIndex]?(this._tempFood=null,this.unschedule(p),this.ant.isMoving=!1,void(this.state=0)):void(n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.12&&(this.unschedule(p),this.ant.isMoving=!1,this.scheduleOnce((function(){if(i.isDead)return t._tempFood=null,t.unschedule(p),t.ant.isMoving=!1,void t.scheduleOnce((function(){t.state=0}),.5);if(0==i.info.foodLeft[l.pieceIndex])return t._tempFood=null,t.unschedule(p),t.ant.isMoving=!1,void(t.state=0);if(t.ant.eatFood(i,l.piece,l.pieceIndex),t.ant.curFoodCount<t.ant.maxFoodCount)return t.unschedule(p),t.ant.isMoving=!1,void(t.state=0);t._tempFood=null;var o=v.instance.getOneHoleNear(t.node.worldPosition);t.anchorNode.setWorldPosition(new n(o.node.worldPosition.x,0,o.node.worldPosition.z)),t.node.lookAt(t.anchorNode.worldPosition),t.ant.isMoving=!0;var e=function(){n.distance(this.node.worldPosition,this.anchorNode.worldPosition)<.1&&(this.unschedule(e),this.ant.isMoving=!1,o.eatFood(this.ant),this.state=0)}.bind(t);t.schedule(e)}),1)))}.bind(this);this.schedule(p)}else this.scheduleOnce((function(){t.state=0}),.5)}else this.scheduleOnce((function(){t.state=0}),.5)},i}(s))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/UILoading.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./Tools.ts"],(function(t){"use strict";var e,i,o,r,n,s,a,l,c,u,p,h,g,d,f,I,P,b,y,L;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.Sprite,r=t.Node,n=t.Label,s=t.SpriteFrame,a=t.UITransform,l=t.director,c=t.tween,u=t.Component},function(t){p=t.applyDecoratedDescriptor,h=t.inheritsLoose,g=t.initializerDefineProperty,d=t.assertThisInitialized,f=t.defineProperty},function(t){I=t.TIP_WORDS,P=t.SKIN_PACKAGE,b=t.CUR_PLATFORM,y=t.PLATFORM_TYPE},function(t){L=t.Tools}],execute:function(){var m,R,T,w,v,x,B,C,D,_,F,A,S;e._RF.push({},"13a38qCUo1D1K/0FiAl98Gd","UILoading",void 0);var O=i.ccclass,z=i.property;t("UILoading",(m=O("UILoading"),R=z(o),T=z(r),w=z(o),v=z(n),x=z(s),m((D=p((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,g(d(e),"progressBar",D,d(e)),g(d(e),"dots",_,d(e)),g(d(e),"logoIcon",F,d(e)),g(d(e),"tipsLabel",A,d(e)),g(d(e),"logos",S,d(e)),f(d(e),"tipIndex",0),f(d(e),"dotIndex",0),f(d(e),"curProgress",0),f(d(e),"tweenProBar",null),f(d(e),"isProgressTweenDone",!1),e}h(e,t);var i=e.prototype;return i.onLoad=function(){this.node.getComponent(a).priority=999,this.initLogo(),l.getScene().on("LOADING_PROGRESS",this.refreshProgress,this),this.schedule(this.updateDot,.5),this.tipIndex=L.getRandomInt(0,I.length-1),this.updateTipLabel(),this.schedule(this.updateTipLabel,4),this.progressBar.fillRange=0,this.initProgress()},i.updateTipLabel=function(){this.tipsLabel.string=I[this.tipIndex],this.tipIndex++,this.tipIndex>=I.length&&(this.tipIndex=0)},i.initLogo=function(){P.length>0||(b==y.OPPO?this.logoIcon.spriteFrame=this.logos[2]:b==y.TT||b==y.VIVO?this.logoIcon.spriteFrame=this.logos[1]:this.logoIcon.spriteFrame=this.logos[0])},i.updateDot=function(){for(var t=0;t<this.dots.length;t++)this.dots[t].active=t<this.dotIndex;this.dotIndex++,this.dotIndex>3&&(this.dotIndex=0)},i.initProgress=function(){var t=this;this.tweenProBar=c(this.progressBar).to(.8,{fillRange:.17}).delay(.3).to(.8,{fillRange:.34}).delay(.3).to(.7,{fillRange:.5}).call((function(){t.isProgressTweenDone=!0})).start()},i.refreshProgress=function(t){if(t>=1&&(t=1),this.curProgress=t,this.isProgressTweenDone){var e=.5*t+.5;this.tweenProBar.stop(),this.tweenProBar=c(this.progressBar).to(.5,{fillRange:e}).start()}if(t>=1){var i=this;this.tweenProBar.stop(),c(this.progressBar).to(.3,{fillRange:1}).call((function(){i.destroyMine()})).start()}},i.onClearClick=function(){l.getScene().emit("CLEAR_CACHE")},i.destroyMine=function(){this.node.removeFromParent(),this.node.destroy()},e}(u)).prototype,"progressBar",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=p(C.prototype,"dots",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=p(C.prototype,"logoIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=p(C.prototype,"tipsLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=p(C.prototype,"logos",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=C))||B));e._RF.pop()}}}));

System.register("chunks:///_virtual/UIFoodVideo.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts"],(function(t){"use strict";var e,i,n,o,c,a,s,r,l,u,d,h,p,f,y,T,v;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Node,o=t.Sprite,c=t.UITransform,a=t.tween,s=t.Vec3,r=t.Component},function(t){l=t.applyDecoratedDescriptor,u=t.inheritsLoose,d=t.initializerDefineProperty,h=t.assertThisInitialized,p=t.defineProperty},function(t){f=t.CUR_PLATFORM,y=t.PLATFORM_TYPE},function(t){T=t.default},function(t){v=t.Tools}],execute:function(){var w,b,g,m,C,V,k,F,I;e._RF.push({},"15ac6g+S2JCkaBvs0M7d8cz","UIFoodVideo",void 0);var M=i.ccclass,B=i.property;t("UIFoodVideo",(w=M("UIFoodVideo"),b=B(n),g=B(o),m=B(n),w((k=l((V=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,d(h(e),"action",k,h(e)),d(h(e),"icon",F,h(e)),d(h(e),"maskNode",I,h(e)),p(h(e),"successCb",null),p(h(e),"actTween",void 0),e}u(e,t);var i=e.prototype;return i.onLoad=function(){this.node.getComponent(c).priority=6,this.action.getChildByName("TT").active=f==y.TT,this.action.getChildByName("Else").active=f!=y.TT},i.init=function(t){t?(this.successCb=t,this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=a(this.action).to(.5,{scale:new s(1,1,1)},{easing:"quintOut"}).start(),T.instance.reportCustom("FoodVideoUIShow"),v.showBanner(!0)):this.closeMine()},i.onBtnVideoClick=function(){v.playSound("click");var t=function(){this.successCb(),this.closeMine()}.bind(this);T.instance.watchVideo("FoodVideo",t)},i.onBtnCloseClick=function(){v.playSound("click"),this.closeMine(),v.showInterstitial()},i.closeMine=function(){this.actTween&&this.actTween.stop(),this.action.active=!1,this.maskNode.active=!1,f!=y.OPPO&&f!=y.VIVO&&v.showBanner(!1)},e}(r)).prototype,"action",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=l(V.prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=l(V.prototype,"maskNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=V))||C));e._RF.pop()}}}));

System.register("chunks:///_virtual/UISet.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts"],(function(e){"use strict";var n,t,i,o,a,r,c,l,s,u,h,p,f,d,y,g,b,S;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.Node,o=e.Label,a=e.ScrollView,r=e.UITransform,c=e.tween,l=e.Vec3,s=e.director,u=e.Component},function(e){h=e.applyDecoratedDescriptor,p=e.inheritsLoose,f=e.initializerDefineProperty,d=e.assertThisInitialized},function(e){y=e.CUR_PLATFORM,g=e.PLATFORM_TYPE},function(e){b=e.default},function(e){S=e.Tools}],execute:function(){var O,m,v,k,C,I,B,N,z,w,U,T,P,_,M,q,L;n._RF.push({},"1aebbd66OtCoaPrhmOMQ9MT","UISet",void 0);var Q=t.ccclass,A=t.property;e("UISet",(O=Q("UISet"),m=A(i),v=A(i),k=A(o),C=A(i),I=A(i),B=A(i),N=A(a),O((U=h((w=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,f(d(n),"action",U,d(n)),f(d(n),"zhengceNode",T,d(n)),f(d(n),"version",P,d(n)),f(d(n),"btnSound",_,d(n)),f(d(n),"btnShake",M,d(n)),f(d(n),"btnQuality",q,d(n)),f(d(n),"scr",L,d(n)),n}p(n,e);var t=n.prototype;return t.onLoad=function(){this.node.getComponent(r).priority=10,this.refreshUI(),this.version.string="ver.1.0.0",this.action.setScale(0,0,0),this.action.getChildByName("ZhengCe").active=y!=g.TT},t.start=function(){c(this.action).to(.5,{scale:new l(1,1,1)},{easing:"quintOut"}).start(),S.showBanner(!0)},t.onBtnSoundClick=function(){S.playSound("click");var e=1==b.instance.soundOpen?0:1;b.instance.soundOpen=e,b.instance.musicOpen=e,localStorage.setItem("soundOpen",b.instance.soundOpen.toString()),localStorage.setItem("musicOpen",b.instance.musicOpen.toString()),this.refreshUI()},t.onBtnShakeClick=function(){S.playSound("click");var e=1==b.instance.shakeOpen?0:1;b.instance.shakeOpen=e,localStorage.setItem("shakeOpen",b.instance.shakeOpen.toString()),this.refreshUI()},t.onBtnQualityClick=function(){S.playSound("click");var e=1==b.instance.qualityOpen?0:1;b.instance.qualityOpen=e,localStorage.setItem("qualityOpen",b.instance.qualityOpen.toString()),this.refreshUI(),s.getScene().emit("ON_QUALITY_CHANGE")},t.refreshUI=function(){this.btnSound.getChildByName("on").active=1==b.instance.soundOpen,this.btnSound.getChildByName("off").active=1!=b.instance.soundOpen,this.btnShake.getChildByName("on").active=1==b.instance.shakeOpen,this.btnShake.getChildByName("off").active=1!=b.instance.shakeOpen,this.btnQuality.getChildByName("on").active=1==b.instance.qualityOpen,this.btnQuality.getChildByName("off").active=1!=b.instance.qualityOpen},t.onBtnZhengCeClick=function(){S.playSound("click"),this.zhengceNode.active=!0},t.onBtnCloseClick=function(){S.playSound("click"),this.zhengceNode.active?this.zhengceNode.active=!1:this.closeMine()},t.onScroll=function(){for(var e=this.scr.getContentPosition(),n=0;n<this.scr.content.children.length;n++){var t=this.scr.content.children[n],i=t.position.y+e.y;t.active=i<700&&i>-500}},t.closeMine=function(){this.node.removeFromParent(),this.node.destroy(),y!=g.OPPO&&y!=g.VIVO&&S.showBanner(!1)},n}(u)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=h(w.prototype,"zhengceNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=h(w.prototype,"version",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=h(w.prototype,"btnSound",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=h(w.prototype,"btnShake",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=h(w.prototype,"btnQuality",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=h(w.prototype,"scr",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=w))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIEnemyMark.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(t){"use strict";var i,e,s,n,o,a,r,c,h,f,l,d,u;return{setters:[function(t){i=t.cclegacy,e=t._decorator,s=t.Node,n=t.Vec3,o=t.UITransform,a=t.Component},function(t){r=t.applyDecoratedDescriptor,c=t.inheritsLoose,h=t.initializerDefineProperty,f=t.assertThisInitialized,l=t.defineProperty},function(t){d=t.Tools},function(t){u=t.GameManager}],execute:function(){var y,v,p,g,m;i._RF.push({},"1d4b9aT7PdE0J6mzGiynZaq","UIEnemyMark",void 0);var S=e.ccclass,C=e.property;t("UIEnemyMark",(y=S("UIEnemyMark"),v=C(s),y((m=r((g=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,h(f(i),"action",m,f(i)),l(f(i),"icons",[]),l(f(i),"target",void 0),l(f(i),"offset",new n(0,0,0)),l(f(i),"rotate",void 0),l(f(i),"isShowScreenIn",!0),i}c(i,t);var e=i.prototype;return e.onLoad=function(){this.node.getComponent(o).priority=4},e.init=function(t){if(0==t.id||6==t.id){var i=this.action.getChildByName("RedAnt");i.active=!0;var e=i.getChildByName("nei"),s=i.getChildByName("wai");this.rotate=s.getChildByName("Change"),this.icons.push(e),this.icons.push(s),this.offset.x=0,this.offset.y=60,6==t.id&&(this.isShowScreenIn=!1)}else{var n=this.action.getChildByName("ZhiZhu");n.active=!0;var o=n.getChildByName("nei"),a=n.getChildByName("wai");this.rotate=a.getChildByName("Change"),this.icons.push(o),this.icons.push(a),this.offset.x=-40,this.offset.y=80,this.isShowScreenIn=!1}this.target=t},e.update=function(t){if(!(t>2))if(this.target){if(this.target.isDead)return this.node.removeFromParent(),void this.node.destroy();this.action.active||(this.action.active=!0);var i=u.instance.getScreenPos(this.target.node),e=d.isScreenIn(i);if(e&&!this.icons[0].active&&this.isShowScreenIn&&(this.icons[0].active=!0),!e&&this.icons[0].active&&(this.icons[0].active=!1),e&&this.icons[1].active&&(this.icons[1].active=!1),e||this.icons[1].active||(this.icons[1].active=!0),e)i.x+=this.offset.x,i.y+=this.offset.y,this.action.setPosition(i);else{var s=d.getScreenBoardPos(i,this.offset.y);this.action.setPosition(s.x+this.offset.x,s.y+this.offset.y,s.z),this.rotate.setScale(s.x>0?1:-1,s.y>0?-1:1,1)}}else this.action.active&&(this.action.active=!1)},i}(a)).prototype,"action",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIBlood.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(t){"use strict";var e,o,i,r,n,a,s,c,l,u,d,p,f;return{setters:[function(t){e=t.cclegacy,o=t._decorator,i=t.Sprite,r=t.Node,n=t.UITransform,a=t.Component},function(t){s=t.applyDecoratedDescriptor,c=t.inheritsLoose,l=t.initializerDefineProperty,u=t.assertThisInitialized,d=t.defineProperty},function(t){p=t.Tools},function(t){f=t.GameManager}],execute:function(){var h,g,v,b,y,m,B;e._RF.push({},"1da2eHHE1FK0rSmNm0XE7F4","UIBlood",void 0);var I=o.ccclass,P=o.property;t("UIBlood",(h=I("UIBlood"),g=P(i),v=P(r),h((m=s((y=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,l(u(e),"bloodBar",m,u(e)),l(u(e),"action",B,u(e)),d(u(e),"target",void 0),e}c(e,t);var o=e.prototype;return o.onLoad=function(){this.node.getComponent(n).priority=4},o.init=function(t){this.target=t},o.update=function(t){if(!(t>2))if(this.target){if(this.target.isDead)return this.node.removeFromParent(),void this.node.destroy();this.target.blood<this.target.bloodMax&&!this.action.active&&(this.action.active=!0),this.bloodBar.fillRange=p.clampf(this.target.blood/this.target.bloodMax,0,1);var e=f.instance.getScreenPos(this.target.node);e.y+=80,this.action.setPosition(e)}else this.action.active&&(this.action.active=!1)},e}(a)).prototype,"bloodBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=s(y.prototype,"action",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));e._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./UITip.ts","./Config.ts","./ShufenManager.ts","./DataManager.ts"],(function(e){"use strict";var n,t,o,r,i,a,s,u,d,c,l,f,h,w,p,m,g,v,x,y,S,T,V,b,R,I,B,C,A,M;return{setters:[function(e){n=e.cclegacy,t=e._decorator,o=e.geometry,r=e.Vec3,i=e.AudioSourceComponent,a=e.view,s=e.loader,u=e.Texture2D,d=e.SpriteFrame,c=e.UITransform,l=e.EventHandler,f=e.MeshRenderer,h=e.Size,w=e.director,p=e.ParticleSystem,m=e.assetManager,g=e.ImageAsset,v=e.Prefab,x=e.instantiate,y=e.Node,S=e.game},function(e){T=e.defineProperty,V=e.asyncToGenerator},function(e){b=e.UITip},function(e){R=e.CUR_PLATFORM,I=e.PLATFORM_TYPE,B=e.SKIN_PACKAGE},function(e){C=e.ShufenEvent,A=e.default},function(e){M=e.default}],execute:function(){var P,E,_;n._RF.push({},"20fdfjf1uBIDrWbsFsYqrHb","Tools",void 0);var k=t.ccclass;t.property,e("Tools",k("Tools")((_=E=function(){function e(){}return e.ShowTip=function(){var e=V(regeneratorRuntime.mark((function e(n,t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===t&&(t=1.5),(o=w.getScene().getChildByName("Canvas"))&&o.parent&&s.loadRes("UITip",v,(function(e,r){if(o&&o.parent&&!e){var i=x(r);o.addChild(i),i.getComponent(b).init(n,t)}}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),e.waitForSec=function(){var e=V(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e()}),1e3*n)})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.clampf=function(e,n,t){return e<n&&(e=n),e>t&&(e=t),e},e.ShowUI=function(){var e=V(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.loadBundle=function(){var e=V(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){m.loadBundle(n,(function(n,t){e(n?null:t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.loadAssetByBundle=function(){var e=V(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){n.load(t,(function(n,t){n?o(n):e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),e.loadAssetsByBundle=function(){var e=V(regeneratorRuntime.mark((function e(n,t){var o,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=[],r=function(e){var r=t[e],i=new Promise((function(e,t){n.load(r,(function(n,t){e(n?null:t)}))}));o.push(i)},i=0;i<t.length;i++)r(i);return e.abrupt("return",Promise.all(o));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),e.timestampToTime=function(e){var n,t,o;return(n=Math.floor(e/60/60%24))<10&&(n="0"+n),(t=Math.floor(e/60%60))<10&&(t="0"+t),(o=Math.floor(e%60))<10&&(o="0"+o),n+":"+t+":"+o},e.timestampToTime1=function(e){var n,t;return(n=Math.floor(e/60/60%24))<10&&(n="0"+n),(t=Math.floor(e/60%60))<10&&(t="0"+t),n+":"+t},e.timestampToTime2=function(e){var n,t;n=Math.floor(e/60%60),t=Math.floor(e%60);var o=e.toFixed(2).split(".");parseInt(o[1]);return n<10&&(n="0"+n),t<10&&(t="0"+t),n+":"+t},e.timestampToMsTime=function(e){var n,t,o;n=Math.floor(e/60%60),t=Math.floor(e%60);var r=e.toFixed(2).split("."),i=parseInt(r[1]);return n<10&&(n="0"+n),t<10&&(t="0"+t),(o=Math.floor(i/99*60))<10&&(o="0"+o),n+":"+t+":"+o},e.timestampToMsDayTime=function(e){var n,t,o=new Date;return o.setTime(e),(n=(n=o.getMonth()+1)<10?"0"+n:n)+"."+(t=(t=o.getDate())<10?"0"+t:t)},e.getRandomInt=function(e,n){return Math.floor(Math.random()*(n+1-e)+e)},e.getRandom=function(e,n){return Math.random()*(n-e)+e},e.weight_rand=function(e){var n,t,o,r=0,i=[];for(n=0;n<e.length;n++){for(o=void 0!==e[n].percent?e[n].percent:0,t=0;t<o;t++)i.push(n);r+=o}return e[i[Math.floor(Math.random()*r)]]},e.getDistance2D=function(e,n,t,o){return Math.sqrt((e-t)*(e-t)+(n-o)*(n-o))},e.splitToNumber=function(e,n){if(!e||0==e.length)return[];for(var t=e.split(n),o=[],r=0;r<t.length;r++)o.push(Number(t[r]));return o},e.splitToString=function(e,n){if(!e||0==e.length)return[];for(var t=e.split(n),o=[],r=0;r<t.length;r++)o.push(t[r]);return o},e.arrayToVec3Array=function(e){for(var n=[],t=0;t<e.length;t+=3)n.push(new r(e[t],e[t+1],e[t+2]));return n},e.numberToStrKM=function(n){if(0===n)return"0";var t=1e3;if(n<t)return Math.floor(n).toString();var o=Math.floor(Math.log(n)/Math.log(t));return(n/Math.pow(t,o)).toPrecision(3)+e._sizes[o]},e.playBGM=function(){var n=V(regeneratorRuntime.mark((function n(t){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.bgm||(e.bgm=new y,S.addPersistRootNode(e.bgm),e.bgm.addComponent(i)),(o=e.bgm.getComponent(i)).playOnAwake=!1,e.soundBundle){n.next=7;break}return n.next=6,e.loadBundle(B+"BundleSound");case 6:e.soundBundle=n.sent;case 7:if(!e.soundBundle){n.next=14;break}return n.next=10,e.loadAssetByBundle(e.soundBundle,t);case 10:r=n.sent,o.clip=r,o.loop=!0,o.play();case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.stopBGM=function(){e.bgm&&e.bgm.getComponent(i).stop()},e.playSound=function(){var n=V(regeneratorRuntime.mark((function n(t,o){var r,a,s,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===o&&(o=!1),1==M.instance.soundOpen){n.next=3;break}return n.abrupt("return");case 3:if(R!=I.VIVO){n.next=19;break}if(!e._soundPool[t]){n.next=10;break}return e._soundPool[t].stop(),e._soundPool[t].play(),n.abrupt("return",e._soundPool[t]);case 10:if(!(r=qg.createInnerAudioContext())){n.next=17;break}return r.src="sounds/"+t+".mp3",r.loop=o,r.play(),e._soundPool[t]=r,n.abrupt("return",r);case 17:n.next=48;break;case 19:if("undefined"==typeof wx||!wx.createInnerAudioContext){n.next=35;break}if(!e._soundPool[t]){n.next=26;break}return e._soundPool[t].stop(),e._soundPool[t].play(),n.abrupt("return",e._soundPool[t]);case 26:if(!(a=wx.createInnerAudioContext({useWebAudioImplement:!0}))){n.next=33;break}return a.src="sounds/"+t+".mp3",a.loop=o,a.play(),e._soundPool[t]=a,n.abrupt("return",a);case 33:n.next=48;break;case 35:if(e.sound||(e.sound=new y,S.addPersistRootNode(e.sound),e.sound.addComponent(i).playOnAwake=!1),s=e.sound.getComponent(i),e.soundBundle){n.next=41;break}return n.next=40,e.loadBundle(B+"BundleSound");case 40:e.soundBundle=n.sent;case 41:if(!e.soundBundle){n.next=48;break}return n.next=44,e.loadAssetByBundle(e.soundBundle,t);case 44:u=n.sent,s.clip=u,s.loop=o,s.play();case 48:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e.HttpPOST=function(){var e=V(regeneratorRuntime.mark((function e(n,t,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=new XMLHttpRequest;i.timeout=o||5e3,i.onreadystatechange=function(){4==i.readyState&&i.status>=200&&i.status<400?e(JSON.parse(i.responseText)):4==i.readyState&&0==i.status&&e(null)},i.ontimeout=function(){e(null)},i.open("POST",n,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(t)})));case 1:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}(),e.HttpGET=function(){var e=V(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var r=new XMLHttpRequest;r.timeout=t||5e3,r.onreadystatechange=function(){4==r.readyState&&r.status>=200&&r.status<400?e(JSON.parse(r.responseText)):4==r.readyState&&0==r.status&&e(null)},r.ontimeout=function(){e(null)},r.open("GET",n,!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send()})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),e.getScreenPos=function(e,n,t){var o=new r;return e instanceof r?n.convertToUINode(e,t,o):n.convertToUINode(e.worldPosition,t,o),o},e.isScreenIn=function(e){var n=a.getVisibleSize(),t=n.width,o=n.height;return e.x>=.5*-t&&e.x<=.5*t&&e.y>=.5*-o&&e.y<=.5*o},e.getScreenBoardPos=function(n,t){var o=a.getVisibleSize(),i=o.width,s=o.height;return new r(e.clampf(n.x,.5*-i+t,.5*i-t),e.clampf(n.y,.5*-s+t,.5*s-t),0)},e.getAngle=function(e,n){return 180*Math.atan2(e,n)/Math.PI},e.AngleBetweenVector1=function(e,n){var t=e.x-n.x,o=e.z-n.z;return 180*Math.atan2(t,o)/Math.PI},e.setImage=function(e,n,t,o){void 0===o&&(o=null),n&&(n.indexOf("http")>-1?s.load({url:n,type:t},(function(t,r){if(e&&e.node&&!t){var i=new u;i.image=r;var a=new d;a.texture=i,e.spriteFrame=a,o&&e.node&&(e.node.getComponent(c).width=o.width,e.node.getComponent(c).height=o.height)}else console.error("设置http图片错误",n,t)})):(t==d?n+="/spriteFrame":t==u&&(n+="/texture"),s.loadRes(n,t,(function(o,r){if(o)console.error("设置图片错误",n,o);else if(e&&e.node)if(t==d)e.spriteFrame=r;else{var i=new d;i.texture=r,e.spriteFrame=i}}))))},e.getBezierPointList=function(e,n){if(e.length<3)return console.error("缺少[起点 控制点 终点]至少3个点"),null;for(var t=e.length,o=[1,1],i=3;i<t+1;i++){for(var a=[],s=0;s<o.length;s++)a.push(o[s]);o[0]=1,o[i-1]=1;for(var u=0;u<a.length-1;u++)o[u+1]=a[u]+a[u+1]}for(var d=[],c=0;c<n;c++){for(var l=c/n,f=new r(0,0,0),h=0;h<t;h++){var w=t-1-h,p=h,m=o[h]*Math.pow(1-l,w)*Math.pow(l,p);f.add(new r(e[h]).multiplyScalar(m))}d.push(f)}return d.push(e[e.length-1]),d},e.cutNameLen=function(e,n,t){void 0===t&&(t="...");var o="";return e.length>n?(o=e.substring(0,n),o+=t):o=e,o},e.addClickEvent=function(e,n,t,o,r){void 0===r&&(r="");var i=new l;i.target=e,i.handler=t,i.component=o,i.customEventData=r,n.clickEvents.push(i)},e.setShadowShow=function(e,n,t){for(var o=e.getComponentsInChildren(f),r=0;r<o.length;r++)o[r].shadowCastingMode=n?1:0,o[r].receiveShadow=t?1:0},e.createVideo=function(n,t){void 0===t&&(t=null),e.wxVideoCb=t;var o=null;if(R==I.OPPO){if(e.wxVideo)return void e.wxVideo.load();var r=qg.getSystemInfoSync();r.platformVersionCode>=1040?e.wxVideo=qg.createRewardedVideoAd({posId:n}):r.platformVersionCode>=1051&&(e.wxVideo=qg.createRewardedVideoAd({adUnitId:n})),e.wxVideo.onLoad((function(n){e.wxVideo.show()})),e.wxVideo.onError((function(n){console.log("激励视频错误",n),e.ShowTip("暂无视频"),e.wxVideoCb=null})),e.wxVideo.onClose((function(n){n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no")),e.wxVideoCb=null})),e.wxVideo.load()}else if(R==I.VIVO){if(e.wxVideo)return void e.wxVideo.load();qg.createRewardedVideoAd&&(e.wxVideo=qg.createRewardedVideoAd({posId:n}),e.wxVideo.load(),e.wxVideo.onLoad((function(n){e.wxVideo.show()})),e.wxVideo.onError((function(n){console.log("激励视频错误",n),e.ShowTip("广告加载失败 请稍后重试"),e.wxVideoCb=null})),e.wxVideo.onClose((function(n){n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no")),e.wxVideoCb=null})))}else if(R==I.WX)e.wxVideo&&(e.wxVideo.destroy(),e.wxVideo=null),o=wx.createRewardedVideoAd({adUnitId:n,multiton:!0}),e.wxVideo=o,o.onLoad((function(n){if(o){o.show(),o=null;var t={event:C.video,cid:M.instance.videoReportPosID,type:2};A.report(t),e.reportEvent(M.instance.videoReportPosID+"_2")}})),o.onError((function(n){e.ShowTip("暂无视频"),e.wxVideoCb&&e.wxVideoCb("error"),e.wxVideo&&(e.wxVideo.destroy(),e.wxVideo=null),e.reportEvent(M.instance.videoReportPosID+"_4")})),o.onClose((function(n){n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no"))})),o.load();else if(R==I.TT)e.wxVideo||(e.wxVideo=tt.createRewardedVideoAd({adUnitId:n}),e.wxVideo.onClose((function(n){n&&n.isEnded?e.wxVideoCb&&e.wxVideoCb("ok"):(e.ShowTip("请完整观看"),e.wxVideoCb&&e.wxVideoCb("no"))}))),e.wxVideo.load().then((function(){e.wxVideo.show();var n={event:C.video,cid:M.instance.videoReportPosID,type:2};A.report(n)})).catch((function(n){"no advertisement"===n.errMsg?e.ShowTip("当前无广告填充，请您稍后再试"):e.ShowTip(n.errMsg)}));else if(R==I.WEIYOU&&MinigameAds){var i=MiniGameAds.isRewardvideoReady();console.log("是否可以显示视频广告：：",i),i?MiniGameAds.showRewardedVideo().then((function(){M.instance.setTime=0,console.info("====> show RewardedVideo success"),e.wxVideoCb&&e.wxVideoCb("ok")})).catch((function(n){M.instance.setTime=0,console.error("====> show RewardedVideo error: "+n.message),e.wxVideoCb&&e.wxVideoCb("no")})):(console.info("====> RewardedVideo not ready"),e.ShowTip("广告加载失败 请稍后重试"),e.wxVideoCb=null)}},e.createBanner=function(n,t){if(e.isShowBanner=t,R==I.OPPO){e.wxBanner&&(e.wxBanner.hide(),e.wxBanner.destroy(),e.wxBanner=null);var o=qg.getSystemInfoSync().screenWidth,r=qg.getSystemInfoSync().screenHeight,i=new h(750,1334),a=o/i.width*i.height,s=o/i.width*100+(r-a)/2,u=qg.createBannerAd({adUnitId:n,style:{top:r-100,left:0,width:o,height:s}});return u.onLoad((function(e){})),u.onError((function(n){e.wxBanner=null})),e.isShowBanner?u.show():u.hide(),u}if(R==I.VIVO){e.wxBanner&&(e.wxBanner.hide(),e.wxBanner.destroy(),e.wxBanner=null);var d=qg.getSystemInfoSync().screenWidth,c=qg.getSystemInfoSync().screenHeight,l=d/2-350,f=qg.createBannerAd({posId:n,style:{left:l,top:c-110}}),w=f.show();return w&&w.then((function(){console.log("vivo banner广告展示成功")})).catch((function(e){switch(e.code){case 30003:case 30009:case 30002:break;default:console.log("banner广告展示失败",JSON.stringify(e))}})),f.onLoad((function(n){e.isShowBanner?f.show():f.hide()})),f}if(R==I.WX){e.wxBanner&&(e.wxBanner.destroy(),e.wxBanner=null);var p=Number(wx.getSystemInfoSync().windowWidth),m=Number(wx.getSystemInfoSync().windowHeight),g=wx.createBannerAd({adUnitId:n,adIntervals:M.instance.bannerInterval,style:{left:10,top:76,width:300}});return g.onResize((function(e){g.style.top=m-e.height,g.style.left=(p-e.width)/2})),g.onLoad((function(n){e.isShowBanner?g.show():g.hide()})),g.onError((function(n){e.wxBanner.destroy(),e.wxBanner=null,console.warn("微信banner出错",n)})),g}},e.createTTBanner=function(n,t,o){if(void 0===t&&(t=null),void 0===o&&(o=!1),e.isShowBanner=o,!tt.createBannerAd)return null;var r=tt.getSystemInfoSync().screenWidth,i=tt.getSystemInfoSync().screenHeight,a=(r-200)/2,s=tt.createBannerAd({adUnitId:n,adIntervals:M.instance.bannerInterval,style:{left:a,top:i-112.5,width:200}}),u=!1;return s.onResize((function(e){u||(u=!0,s.style.top=i-e.height,s.style.left=(r-e.width)/2)})),s.onLoad((function(n){t&&(t.hide(),t.destroy()),e.isShowBanner?s.show():s.hide()})),s.onError((function(e){console.error("头条banner出错",e)})),s},e.showInterstitial=function(){R==I.WEIYOU&&(M.instance.setTime>=60?MiniGameAds.showInterstitial().then((function(){M.instance.setTime=0})).catch((function(e){M.instance.setTime=0})):console.info("====> 展示插屏⼴告 not ready"))},e.showBanner=function(n){if(R==I.WEIYOU)if(n&&MiniGameAds){var t=MiniGameAds.isBannerReady();console.log("是否可以显示banner广告：：",t),t?MiniGameAds.showBanner().then((function(){console.info("====> show banner success")})).catch((function(e){console.error("====> show banner error: "+e.message)})):console.info("====> banner not ready")}else MiniGameAds&&MiniGameAds.hideBanner().then((function(){console.info("====> hide banner success")})).catch((function(e){console.error("====> hide banner error: "+e.message)}));else e.isShowBanner=n,M.instance.nativeAds[1]&&M.instance.nativeAds[1].ad?(w.getScene().emit("NATIVE_BANNER_UPDATE"),e.wxBanner&&e.wxBanner.hide()):n?e.wxBanner&&e.wxBanner.show():e.wxBanner&&e.wxBanner.hide(),e.showCustomAd(e.customAdIcon,!n),e.showCustomAd(e.customAdIcon2,!n)},e.createCustomAd=function(e,n,t,o,r){if(R==I.WX)return r&&r.destroy(),wx.createCustomAd({adUnitId:e,style:{left:n,top:t}})},e.showCustomAd=function(n,t){e.isShowCustomAd=t,t?n&&n.show():n&&n.hide()},e.showCustomAdBar=function(n){e.isShowCustomAdBar=n,n?e.customAdBar&&e.customAdBar.show():e.customAdBar&&e.customAdBar.hide()},e.showInsertAd=function(n){var t=null;if(R==I.VIVO)if(void 0!==qg.createInterstitialAd){console.log("开始加载普通插屏广告");var o=(t=qg.createInterstitialAd({posId:n})).show();o&&o.then((function(){console.log("普通插屏广告展示成功")})).catch((function(e){console.log("普通插屏广告展示失败:"+JSON.stringify(e))}))}else console.error("不支持普通插屏广告");else R==I.OPPO&&void 0!==qg.createInsertAd&&(e.qgVideo?e.qgVideo.load():(t=qg.createInsertAd({adUnitId:n}),e.qgVideo=t,t.onLoad((function(n){e.qgVideo.show()})),t.onError((function(e){})),t.onClose((function(e){})),t.load()))},e.showOVCustumAd=function(e){if(R==I.VIVO)if(qg.createCustomAd){var n=qg.getSystemInfoSync().screenHeight,t=qg.createCustomAd({posId:e,style:{left:0,top:n/2-200}});t.onError((function(e){console.log("原生模板广告加载失败",e)})),t.show().then((function(){console.log("原生模板广告展示完成")})).catch((function(e){console.log("原生模板广告展示失败",JSON.stringify(e))}))}else console.log("原生模板广告 不支持")},e.getGroundTouchPos=function(n,t){t.screenPointToRay(n.x,n.y,e._outRay);var o=e._outRay.o.x+(0-e._outRay.o.y)/e._outRay.d.y*e._outRay.d.x,r=e._outRay.o.z+(0-e._outRay.o.y)/e._outRay.d.y*e._outRay.d.z;return[Math.floor(o),Math.floor(r)]},e.getCirclePoints=function(e,n,t,o){for(var i=[],a=Math.PI/180*Math.round(360/o),s=0;s<o;s++){var u=n+e*Math.sin(a*s),d=t+e*Math.cos(a*s);i.unshift(new r(u,0,d))}return i},e.playerOnceParticleNode=function(e){for(var n=e.getComponentsInChildren(p),t=0;t<n.length;t++)n[t].stop(),n[t].clear(),n[t].play()},e.TTStartRecorder=function(){if(R==I.TT){if(e.isRecord)return void e.ShowTip("正在录屏中");e.isRecord=!0,e.recordTime=0,e.recorder?e.recorder.start({duration:300}):(e.recorder=tt.getGameRecorderManager(),e.recorder.start({duration:300}),e.recorder.onStart((function(n){console.log("录屏开始"),e.recordTime=(new Date).valueOf(),M.instance.TTShareSuccess=!1,w.getScene().emit("REFRESH_LUZHI")})),e.recorder.onStop((function(n){e.isRecord=!1,e.videoPath=n.videoPath,console.log("录制结束：",e.videoPath);var t=((new Date).valueOf()-e.recordTime)/1e3;e.recordDoneTime=t,w.getScene().emit("REFRESH_LUZHI")})),e.recorder.onError((function(n){e.isRecord=!1,e.videoPath=null,console.error("录屏出现错误",n),w.getScene().emit("REFRESH_LUZHI")})))}},e.TTStopRecord=function(){R==I.TT&&e.recorder&&e.recorder.stop()},e.TTShareRecordVideo=function(n){if(void 0===n&&(n=null),R==I.TT){if(0==e.recordTime||e.recordDoneTime<4)return e.TTShowToast({message:"录屏失败：录屏时长低于3秒"}),e.videoPath=null,void w.getScene().emit("REFRESH_LUZHI");e.recordDoneTime=0,tt.shareAppMessage({channel:"video",desc:"",title:"蚂蚁世界模拟器",query:"",extra:{videoPath:e.videoPath,withVideoId:!0,videoTopics:["蚂蚁世界模拟器"],hashtag_list:["蚂蚁世界模拟器"]},success:function(){null!=n&&n(),M.instance.TTShareSuccess=!0,e.videoPath=null,w.getScene().emit("REFRESH_LUZHI")},fail:function(n){e.TTShowToast({message:"分享失败"}),console.log("分享回调后 失败",n),e.videoPath=null,w.getScene().emit("REFRESH_LUZHI")}})}},e.TTShowToast=function(e){R==I.TT&&tt.showToast({icon:"none",title:e.message})},e.getURLSuffix=function(e){return e?e.substring(e.lastIndexOf(".")+1):null},e.httpImageByUrlType=function(e,n){m.downloader.downloadDomImage(n,{ext:".png"},(function(n,t){if(!n){var o=new g(t),r=new u;r.image=o;var i=new d;i.texture=r,e.spriteFrame=i}}))},e.createNativeAd=function(e,n,t){if(void 0===t&&(t=null),R==I.OPPO){t&&t.destroy();var o=qg.createNativeAd({adUnitId:e});o.onLoad((function(t){if(t)if(t.adList[0]&&t.adList[0].icon&&t.adList[0].icon.length>0){var r={adId:t.adList[0].adId,ad:o,videoID:e,title:t.adList[0].title,desc:t.adList[0].desc,icon:t.adList[0].icon,logoUrl:t.adList[0].logoUrl,main:t.adList[0].imgUrlList[0],drag:0,openTime:0,isClose:!1};n&&n(r)}else n&&n(null);else n&&n(null)})),o.onError((function(e){n&&n(null)})),o.load()}},e.reportEvent=function(e,n){void 0===n&&(n=null),"undefined"!=typeof wx&&wx.uma&&(n?wx.uma.trackEvent(e,n):wx.uma.trackEvent(e))},e}(),T(E,"_sizes",["","K","M","B","T"]),T(E,"bgm",null),T(E,"sound",null),T(E,"soundBundle",null),T(E,"_soundPool",{}),T(E,"wxVideo",null),T(E,"wxVideoCb",null),T(E,"videoReportLoadSuccess",""),T(E,"isShowBanner",!1),T(E,"wxBanner",void 0),T(E,"customAdIcon",null),T(E,"customAdIcon2",null),T(E,"customAdBar",null),T(E,"isShowCustomAd",!1),T(E,"isShowCustomAdBar",!1),T(E,"qgVideo",null),T(E,"_outRay",new o.Ray),T(E,"recorder",null),T(E,"videoPath",null),T(E,"isRecord",!1),T(E,"recordTime",0),T(E,"recordDoneTime",0),P=_))||P);Number.prototype.formatMoney=function(e,n,t){void 0===e&&(e=0),void 0===n&&(n=",");var o,r,i=this;return(i<0?"-":"")+((r=(r=(o=parseInt(i=Math.abs(+i||0).toFixed(e),10)+"").length)>3?r%3:0)?o.substr(0,r)+n:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n)},n._RF.pop()}}}));

System.register("chunks:///_virtual/Money.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts"],(function(e){"use strict";var t,n,i,c,o,r,s,h;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Component},function(e){c=e.inheritsLoose,o=e.defineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){h=e.SKIN_PACKAGE}],execute:function(){var a;t._RF.push({},"22617CG0nBOM5E1Ov03DNPl","Money",void 0);var u=n.ccclass;n.property,e("Money",u("Money")(a=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,o(r(t),"_count",1),t}c(t,e);var n=t.prototype;return n.onLoad=function(){this.refreshNodeShow()},n.update=function(e){h.length>0&&"shandian"==this.node.name&&this.node.setRotationFromEuler(0,this.node.eulerAngles.y+1,0)},n.refreshNodeShow=function(){var e=this.node.getChildByName("body");1!=this._count||e.children[0].active?1!=this._count&&e.children[0].active&&(e.children[0].active=!1):e.children[0].active=!0,2!=this._count||e.children[1].active?2!=this._count&&e.children[1].active&&(e.children[1].active=!1):e.children[1].active=!0,this._count>2&&!e.children[2].active?e.children[2].active=!0:this._count<=2&&e.children[2].active&&(e.children[2].active=!1)},s(t,[{key:"count",get:function(){return this._count},set:function(e){this._count=e,this.refreshNodeShow()}}]),t}(i))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/ShufenManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.cclegacy},function(e){n=e.defineProperty},function(e){r=e.CUR_PLATFORM,o=e.PLATFORM_TYPE}],execute:function(){t._RF.push({},"270a5bwHK9AnYUuz6olVxZU","ShufenManager",void 0);var i=e("ShufenEvent",{login:"login",signup:"signup",custom:"custom",video:"video",prop:"prop",guide:"guide",level:"level",load:"load",onlineTime:"onlineTime"}),u=e("default",function(){function e(){}return e.getChannelUserInfo=function(){},e.reportCustom=function(t){if(r==o.WX||r==o.TT){var n={event:i.custom,cid:t};e.report(n)}},e.reportGuide=function(t,n){if(r==o.WX||r==o.TT){var u={event:i.guide,cid:t,type:n};e.report(u)}},e.report=function(t){r!=o.WX&&r!=o.TT||(e.uuidStr=e.generateUUID(),console.log("上报事件",t),t&&t.event&&(t.event==i.load?1==t.type?(e.loadStartTime=e.getTime(),t.len=0,e.send(t)):2==t.type&&(e.loadStartTime?t.len=""+Math.floor((e.getTime()-e.loadStartTime)/1e3):t.len=0,e.send(t)):(t.event,i.login,e.send(t))))},e.send=function(t){t.appid||(t.appid=e.appids[r]),t.userId||(t.userId=e.uuidStr),t.timestamp||(t.timestamp=""+Math.floor(e.getTime()/1e3));var n=e.object2String(t,"&")+"&"+e.secrets[r];t.sign=e.getMD5(n),e.httpRequest(e.shufenUrl,t,null,null,"POST")},e.getTime=function(){return(new Date).getTime()},e.generateUUID=function(){var t="mj_rsck_local_uuid"+e.appids[r],n=localStorage.getItem(t);if(n&&n.length>0)return n;var o=(new Date).getTime(),i=Math.floor(o/1e5)%1e6,u="xx-xxx-yxx-xx".replace(/[xy]/g,(function(e){var t=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==e?t:3&t|8).toString(16)})),a="mj_"+e.appids[r]+"_"+i+"_"+u;return localStorage.setItem(t,a),a},e.object2String=function(e,t){for(var n=Object.keys(e).sort(),r="",o=0;o<n.length;o++)o==n.length-1?r+=n[o]+"="+e[n[o]]:r+=n[o]+"="+e[n[o]]+t;return r},e.getMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,o,i,u;return o=2147483648&e,i=2147483648&t,u=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^u^o^i:n|r?1073741824&u?3221225472^u^o^i:1073741824^u^o^i:u^o^i}function r(e,r,o,i,u,a,s){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(r,o,i),u),s)),n(t(e,a),r)}function o(e,r,o,i,u,a,s){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(r,o,i),u),s)),n(t(e,a),r)}function i(e,r,o,i,u,a,s){return e=n(e,n(n(function(e,t,n){return e^t^n}(r,o,i),u),s)),n(t(e,a),r)}function u(e,r,o,i,u,a,s){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(r,o,i),u),s)),n(t(e,a),r)}function a(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var s,l,f,c,d,g,p,m,h,v=new Array;for(v=function(e){for(var t,n=e.length,r=n+8,o=16*((r-r%64)/64+1),i=new Array(o-1),u=0,a=0;a<n;)u=a%4*8,i[t=(a-a%4)/4]=i[t]|e.charCodeAt(a)<<u,a++;return u=a%4*8,i[t=(a-a%4)/4]=i[t]|128<<u,i[o-2]=n<<3,i[o-1]=n>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),g=1732584193,p=4023233417,m=2562383102,h=271733878,s=0;s<v.length;s+=16)l=g,f=p,c=m,d=h,g=r(g,p,m,h,v[s+0],7,3614090360),h=r(h,g,p,m,v[s+1],12,3905402710),m=r(m,h,g,p,v[s+2],17,606105819),p=r(p,m,h,g,v[s+3],22,3250441966),g=r(g,p,m,h,v[s+4],7,4118548399),h=r(h,g,p,m,v[s+5],12,1200080426),m=r(m,h,g,p,v[s+6],17,2821735955),p=r(p,m,h,g,v[s+7],22,4249261313),g=r(g,p,m,h,v[s+8],7,1770035416),h=r(h,g,p,m,v[s+9],12,2336552879),m=r(m,h,g,p,v[s+10],17,4294925233),p=r(p,m,h,g,v[s+11],22,2304563134),g=r(g,p,m,h,v[s+12],7,1804603682),h=r(h,g,p,m,v[s+13],12,4254626195),m=r(m,h,g,p,v[s+14],17,2792965006),g=o(g,p=r(p,m,h,g,v[s+15],22,1236535329),m,h,v[s+1],5,4129170786),h=o(h,g,p,m,v[s+6],9,3225465664),m=o(m,h,g,p,v[s+11],14,643717713),p=o(p,m,h,g,v[s+0],20,3921069994),g=o(g,p,m,h,v[s+5],5,3593408605),h=o(h,g,p,m,v[s+10],9,38016083),m=o(m,h,g,p,v[s+15],14,3634488961),p=o(p,m,h,g,v[s+4],20,3889429448),g=o(g,p,m,h,v[s+9],5,568446438),h=o(h,g,p,m,v[s+14],9,3275163606),m=o(m,h,g,p,v[s+3],14,4107603335),p=o(p,m,h,g,v[s+8],20,1163531501),g=o(g,p,m,h,v[s+13],5,2850285829),h=o(h,g,p,m,v[s+2],9,4243563512),m=o(m,h,g,p,v[s+7],14,1735328473),g=i(g,p=o(p,m,h,g,v[s+12],20,2368359562),m,h,v[s+5],4,4294588738),h=i(h,g,p,m,v[s+8],11,2272392833),m=i(m,h,g,p,v[s+11],16,1839030562),p=i(p,m,h,g,v[s+14],23,4259657740),g=i(g,p,m,h,v[s+1],4,2763975236),h=i(h,g,p,m,v[s+4],11,1272893353),m=i(m,h,g,p,v[s+7],16,4139469664),p=i(p,m,h,g,v[s+10],23,3200236656),g=i(g,p,m,h,v[s+13],4,681279174),h=i(h,g,p,m,v[s+0],11,3936430074),m=i(m,h,g,p,v[s+3],16,3572445317),p=i(p,m,h,g,v[s+6],23,76029189),g=i(g,p,m,h,v[s+9],4,3654602809),h=i(h,g,p,m,v[s+12],11,3873151461),m=i(m,h,g,p,v[s+15],16,530742520),g=u(g,p=i(p,m,h,g,v[s+2],23,3299628645),m,h,v[s+0],6,4096336452),h=u(h,g,p,m,v[s+7],10,1126891415),m=u(m,h,g,p,v[s+14],15,2878612391),p=u(p,m,h,g,v[s+5],21,4237533241),g=u(g,p,m,h,v[s+12],6,1700485571),h=u(h,g,p,m,v[s+3],10,2399980690),m=u(m,h,g,p,v[s+10],15,4293915773),p=u(p,m,h,g,v[s+1],21,2240044497),g=u(g,p,m,h,v[s+8],6,1873313359),h=u(h,g,p,m,v[s+15],10,4264355552),m=u(m,h,g,p,v[s+6],15,2734768916),p=u(p,m,h,g,v[s+13],21,1309151649),g=u(g,p,m,h,v[s+4],6,4149444226),h=u(h,g,p,m,v[s+11],10,3174756917),m=u(m,h,g,p,v[s+2],15,718787259),p=u(p,m,h,g,v[s+9],21,3951481745),g=n(g,l),p=n(p,f),m=n(m,c),h=n(h,d);return(a(g)+a(p)+a(m)+a(h)).toLowerCase()},e.httpRequest=function(e,t,n,r,o){void 0===o&&(o="GET");var i="";for(var u in t)i&&(i+="&"),i+=u+"="+t[u];var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400){var t=a.responseText;if(t){if(-1!=e.indexOf(".json"))o=JSON.parse(t);else var o=JSON.parse(t);r&&r(o,n)}else r&&r(!1,n)}else r&&r(!1,n)},"GET"==o?(a.open("GET",e+"?"+i,!0),a.send()):(a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),console.log("param",i),a.send(i))},e}());n(u,"appids",{WX:"yryolme80k8iq3pj5y3q",TT:"yrrx8dgd7j7oby0zb5lb"}),n(u,"secrets",{WX:"d5vebts7muiroavydtrb2cem1ym1t9",TT:"kw1n5wkkgr8fxe0i2zxxgjawc73g2o"}),n(u,"shufenUrl","https://ddht.jinkezhexin.com/shufen/writeLog"),n(u,"loadStartTime",null),n(u,"uuidStr",null),t._RF.pop()}}}));

System.register("chunks:///_virtual/GoldFly.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./DataManager.ts","./Tools.ts","./Money.ts","./GameManager.ts"],(function(e){"use strict";var n,o,t,i,s,a,r,d,c,l,u,h,y;return{setters:[function(e){n=e.cclegacy,o=e._decorator,t=e.Vec3,i=e.math,s=e.director,a=e.Component},function(e){r=e.inheritsLoose,d=e.defineProperty,c=e.assertThisInitialized},function(e){l=e.default},function(e){u=e.Tools},function(e){h=e.Money},function(e){y=e.GameManager}],execute:function(){var f;n._RF.push({},"2dfd4AM9bVAd6cCXxihmaMZ","GoldFly",void 0);var p=o.ccclass;o.property,e("GoldFly",p("GoldFly")(f=function(e){function n(){for(var n,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,d(c(n),"body",void 0),d(c(n),"out",new t(0,0,0)),d(c(n),"isRecover",!0),n}r(n,e);var o=n.prototype;return o.onLoad=function(){this.body=this.node.getChildByName("body")},o.update=function(e){e>2||y.instance&&y.instance.curPlayer&&y.instance.curPlayer.node&&(this.body.eulerAngles.add3f(i.random(),i.random(),i.random()),this.node.lookAt(y.instance.curPlayer.node.worldPosition),this.out.z=-2*e,this.node.translate(this.out,0),t.distance(this.node.worldPosition,y.instance.curPlayer.node.worldPosition)<.2&&this.destroyMine())},o.destroyMine=function(){this.isRecover&&("shandian"==this.node.name?(l.instance.gold+=this.node.getComponent(h).count,u.playSound("gold"),s.getScene().emit("MAIN_TASK_PROGRESS",8,0)):(l.instance.wood+=this.node.getComponent(h).count,u.playSound("gold"),s.getScene().emit("MAIN_TASK_PROGRESS",1,8)));var e=y.instance.money.indexOf(this.node);if(e>-1&&y.instance.ants.splice(e,1),this.isRecover){var n=this.node;this.node.removeComponent(this),this.destroy(),y.instance.recoverNodeToPush(n.name,n)}else this.node.active=!1},n}(a))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/JoyStick.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var i,o,e,n,s,h,r,c,a,y,u,l,g,f,d;return{setters:[function(t){i=t.cclegacy,o=t._decorator,e=t.Node,n=t.systemEvent,s=t.SystemEventType,h=t.UITransform,r=t.view,c=t.Vec2,a=t.director,y=t.Component},function(t){u=t.applyDecoratedDescriptor,l=t.inheritsLoose,g=t.initializerDefineProperty,f=t.assertThisInitialized,d=t.defineProperty}],execute:function(){var T,j,p,v,B,_,E;i._RF.push({},"2f130oAAkBPEKc2X/y3r0KB","JoyStick",void 0);var M=o.ccclass,O=o.property;t("JoyStick",(T=M("JoyStick"),j=O(e),p=O(e),T((_=u((B=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];return i=t.call.apply(t,[this].concat(e))||this,g(f(i),"joy",_,f(i)),g(f(i),"joyBg",E,f(i)),d(f(i),"joyBegin",void 0),d(f(i),"joyBgWidth",0),i}l(i,t);var o=i.prototype;return o.start=function(){n.on(s.TOUCH_START,this.onTouchStart,this),n.on(s.TOUCH_MOVE,this.onTouchMoved,this),n.on(s.TOUCH_END,this.onTouchEnded,this),n.on(s.TOUCH_CANCEL,this.onTouchEnded,this),this.joy.active=!1,this.joyBg.active=!1,this.joyBgWidth=this.joyBg.getComponent(h).width},o.onTouchStart=function(t){var i=r.getVisibleSize(),o=new c(i.width/2,i.height/2);this.joyBegin=t.getUILocation().subtract(o),this.joyBg.setPosition(this.joyBegin.x,this.joyBegin.y,0),this.joy.setPosition(0,0,0)},o.onTouchMoved=function(t){if(this.joyBegin){this.joy.active=!0,this.joyBg.active=!0;var i=r.getVisibleSize(),o=new c(i.width/2,i.height/2),e=t.getUILocation().subtract(o),n=e.x-this.joyBegin.x,s=e.y-this.joyBegin.y,h=180*Math.atan2(n,s)/Math.PI,y=n*n,u=s*s,l=this.joyBgWidth/2;if(y+u>=l*l){var g=Math.PI/180*h,f=Math.floor(Math.sin(g)*l),d=Math.floor(Math.cos(g)*l);this.joy.setPosition(f,d,0)}else this.joy.setPosition(n,s,0);(Math.abs(n)>20||Math.abs(s)>20)&&a.getScene().emit("MOVE_PLAYER_ANT",!0,h),a.getScene().emit("ON_JOY_MOVE",t)}},o.onTouchEnded=function(t){this.joyBegin=null,this.joy.active=!1,this.joyBg.active=!1,a.getScene().emit("MOVE_PLAYER_ANT",!1,null),a.getScene().emit("ON_JOY_END",t)},o.onDestroy=function(){n.off(s.TOUCH_START,this.onTouchStart,this),n.off(s.TOUCH_MOVE,this.onTouchMoved,this),n.off(s.TOUCH_END,this.onTouchEnded,this),n.off(s.TOUCH_CANCEL,this.onTouchEnded,this)},i}(y)).prototype,"joy",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=u(B.prototype,"joyBg",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=B))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/Food.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./UIFoodVideoMin.ts","./GameManager.ts"],(function(i){"use strict";var o,e,t,s,n,d,r,h,a,f,c,l,u,p,y,m,g,F;return{setters:[function(i){o=i.cclegacy,e=i._decorator,t=i.Vec3,s=i.MeshRenderer,n=i.tween,d=i.director,r=i.Component},function(i){h=i.applyDecoratedDescriptor,a=i.inheritsLoose,f=i.defineProperty,c=i.assertThisInitialized,l=i.initializerDefineProperty,u=i.asyncToGenerator},function(i){p=i.FOOD_INFO},function(i){y=i.default},function(i){m=i.Tools},function(i){g=i.UIFoodVideoMin},function(i){F=i.GameManager}],execute:function(){var v,b,w,V,T,L,P;o._RF.push({},"388b0KuytlDebueysMAyexs","Food",void 0);var C=e.ccclass,S=e.property;i("Food",C("Food")((w=h((b=function(i){function o(){for(var o,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return o=i.call.apply(i,[this].concat(s))||this,f(c(o),"out",new t),l(c(o),"id",w,c(o)),l(c(o),"sid",V,c(o)),f(c(o),"piece",[]),f(c(o),"isDead",!1),f(c(o),"progress",void 0),f(c(o),"info",null),f(c(o),"body",void 0),l(c(o),"isTempFood",T,c(o)),l(c(o),"isMoneyFood",L,c(o)),l(c(o),"isVideoFood",P,c(o)),f(c(o),"_isShowVideoFood",!1),o}a(o,i);var e=o.prototype;return e.start=function(){if(this.body=this.node.getChildByName("body"),this.piece=this.body.children,this.isTempFood||(this.progress=this.node.getChildByName("Progress").getChildByName("Progress").getComponent(s).material,this.node.getChildByName("Progress").active=!1),this.info=y.instance.getFoodInfoBySID(this.id,this.sid),!this.info){for(var i=[],o=p[this.id].pieceCount,e=0;e<this.piece.length;e++)i.push(o);var d={id:this.id,sid:this.sid,foodLeft:i,deadTime:0,canEat:0,isVideo:0};this.info=d,y.instance.foods.push(d),localStorage.setItem("foods",JSON.stringify(y.instance.foods))}if(this.isVideoFood&&1==this.info.isVideo&&(this.isVideoFood=!1),this.isVideoFood){for(var r=0;r<this.info.foodLeft.length;r++)this.info.foodLeft[r]=0;this.info.deadTime=p[this.id].dead}if(this.isVideoFood&&this.createFoodVideoMinUI(),F.instance.foods.push(this),12==this.id||13==this.id||14==this.id){this.node.name="zhizhu";var h=this;this.scheduleOnce((function(){var i=F.instance.foods.indexOf(h);i>=0&&F.instance.foods.splice(i,1),h.isDead=!0,n(h.node).by(3,{position:new t(0,-2,0)}).call((function(){h.node.removeFromParent(),h.node.destroy()})).start(),y.instance.deleteFoodBySid(h.id,h.sid)}),180)}for(var a=0;a<this.info.foodLeft.length;a++){this.piece[a].active=this.info.foodLeft[a]>0;var f=this.info.foodLeft[a]/p[this.id].pieceCount;this.piece[a].setScale(f,f,f)}this.refreshFoodDead(),this.initFoodCollision()},e.createFoodVideoMinUI=function(){var i=u(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,F.instance.showUI("UIFoodVideoMin");case 2:o=i.sent,o.getComponent(g).init(this);case 5:case"end":return i.stop()}}),i,this)})));return function(){return i.apply(this,arguments)}}(),e.initFoodCollision=function(){if(!this.isMoneyFood)for(var i=0;i<this.body.children.length;i++){this.body.children[i].getComponent(s).model.modelBounds.halfExtents}},e.subFood=function(i){0==p[this.id].type?this.info.foodLeft[i]=m.clampf(this.info.foodLeft[i]-1,0,10):this.info.foodLeft[i]=0,this.isMoneyFood&&(this.info.foodLeft[i]=0),6==this.id&&3==y.instance.gameStep&&y.instance.nextGameStep(4),this.refreshFoodDead()},e.getLeftCount=function(){for(var i=0,o=0;o<this.info.foodLeft.length;o++)this.info.foodLeft[o]>0&&(i+=this.info.foodLeft[o]);return i},e.refreshFoodDead=function(){var i=this;if(!this.isDead){for(var o=0;o<this.info.foodLeft.length;o++)if(this.info.foodLeft[o]>0)return;if(this.isDead=!0,this.info.canEat=0,this.isTempFood){var e=F.instance.foods.indexOf(this);e>=0&&F.instance.foods.splice(e,1),this.scheduleOnce((function(){i.node.removeFromParent(),i.node.destroy()}),1.5),y.instance.deleteFoodBySid(this.id,this.sid)}else 0==this.info.deadTime&&(this.info.deadTime=p[this.id].dead),this.node.getChildByName("body").active=!1,this.node.getChildByName("Progress").active=!0}},e.update=function(i){if(!(i>2)){if(this.isDead&&!this.isTempFood&&!this.isVideoFood){this.info.deadTime=m.clampf(this.info.deadTime-i,0,this.info.deadTime),this.info.deadTime<=0&&this.reborn();var o=this.info.deadTime/p[this.id].dead;this.progress.setProperty("progress",1-o)}!this.isMoneyFood&&F.instance.curPlayer&&this.collsionTest(i)}},e.collsionTest=function(i){this.collisionAnt(F.instance.curPlayer,i)},e.collisionAnt=function(i,o){if(i&&i.node){var e=t.distance(i.node.worldPosition,this.node.worldPosition);if(this.isDead){if(this.isVideoFood)if(e<p[this.id].size){if(!this._isShowVideoFood){this._isShowVideoFood=!0;var s=function(){d.getScene().emit("MONEY_CUBE_USE",0,20),this.isVideoFood=!1,this.info.isVideo=1,this.info.deadTime=0,localStorage.setItem("foods",JSON.stringify(y.instance.foods))}.bind(this);F.instance.uiFoodVideo.init(s)}}else e>p[this.id].size+.1&&(this._isShowVideoFood=!1)}else if(e<.6)for(var n=(i.moveSpeed+i.flyMoveSpeed)*o,r=0;r<this.body.children.length;r++)if(this.info.foodLeft[r]>0){this.out.x=this.body.children[r].worldPosition.x,this.out.y=0,this.out.z=this.body.children[r].worldPosition.z;var h=t.distance(this.out,i.node.worldPosition),a=.12;h<a&&(this.out=t.subtract(this.out,i.node.worldPosition,this.node.worldPosition).normalize(),this.out.x=this.out.x*n*(1+4*(a-h)),this.out.y=0,this.out.z=this.out.z*n*(1+4*(a-h)),i.node.translate(this.out,1))}}},e.reborn=function(){this.isDead=!1,this.info.canEat=0,this.info.deadTime=0,this.node.getChildByName("body").active=!0,this.node.getChildByName("Progress").active=!1;for(var i=0;i<this.info.foodLeft.length;i++){var o=p[this.id].pieceCount;this.info.foodLeft[i]=o,this.piece[i].active=!0,this.piece[i].setScale(1,1,1)}this.node.setPosition(this.node.position.x,5,this.node.position.z),n(this.node).to(1,{position:new t(this.node.position.x,0,this.node.position.z)}).start()},o}(r)).prototype,"id",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),V=h(b.prototype,"sid",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),T=h(b.prototype,"isTempFood",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=h(b.prototype,"isMoneyFood",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=h(b.prototype,"isVideoFood",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=b))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIYinSi.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts"],(function(e){"use strict";var n,t,i,o,r,c,a,l,s,u,p,g,h;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.Node,o=e.ScrollView,r=e.game,c=e.director,a=e.Component},function(e){l=e.applyDecoratedDescriptor,s=e.inheritsLoose,u=e.initializerDefineProperty,p=e.assertThisInitialized},function(e){g=e.CUR_PLATFORM,h=e.PLATFORM_TYPE}],execute:function(){var f,d,S,v,m,y,b;n._RF.push({},"3b49dp+i1RMupdGOH/ksNrF","UIYinSi",void 0);var z=t.ccclass,I=t.property;e("UIYinSi",(f=z("UIYinSi"),d=I(i),S=I(o),f((y=l((m=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,u(p(n),"zhengce",y,p(n)),u(p(n),"scr",b,p(n)),n}s(n,e);var t=n.prototype;return t.onLoad=function(){var e=1==parseInt(localStorage.getItem("isAgreeYinSi")||"0");this.zhengce.active=!e,e&&this.goGame()},t.onBtnAgreeClick=function(){localStorage.setItem("isAgreeYinSi","1"),this.zhengce.active=!1,this.goGame()},t.onScroll=function(){for(var e=this.scr.getContentPosition(),n=0;n<this.scr.content.children.length;n++){var t=this.scr.content.children[n],i=t.position.y+e.y;t.active=i<700&&i>-500}},t.onBtnNoClick=function(){g==h.OPPO?qg.exitApplication({data:""}):r.end()},t.goGame=function(){console.log("进入GameScene"),c.loadScene("GameScene")},n}(a)).prototype,"zhengce",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=l(m.prototype,"scr",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=m))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIFoodVideoMin.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./GameManager.ts"],(function(e){"use strict";var t,o,n,i,r,a,s,u,c,p,d,l,f;return{setters:[function(e){t=e.cclegacy,o=e._decorator,n=e.Node,i=e.UITransform,r=e.tween,a=e.Vec3,s=e.Component},function(e){u=e.applyDecoratedDescriptor,c=e.inheritsLoose,p=e.initializerDefineProperty,d=e.assertThisInitialized,l=e.defineProperty},function(e){f=e.GameManager}],execute:function(){var h,g,m,y,v,j,F;t._RF.push({},"3f069PTD3tEmqu+BojReYzA","UIFoodVideoMin",void 0);var N=o.ccclass,w=o.property;e("UIFoodVideoMin",(h=N("UIFoodVideoMin"),g=w(n),m=w(n),h((j=u((v=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,p(d(t),"action",j,d(t)),p(d(t),"jumpNode",F,d(t)),l(d(t),"target",void 0),t}c(t,e);var o=t.prototype;return o.onLoad=function(){this.node.getComponent(i).priority=4},o.init=function(e){this.target=e},o.start=function(){var e=r(this.jumpNode).to(1.1,{position:new a(0,55,0)},{easing:"sineOut"}),t=r(this.jumpNode).to(.7,{position:new a(0,0,0)},{easing:"sineIn"});r(this.jumpNode).sequence(e,t).repeatForever().start();var o=r(this.jumpNode).to(2,{eulerAngles:new a(0,15,-2)}),n=r(this.jumpNode).to(2,{eulerAngles:new a(0,-15,2)});r(this.jumpNode).sequence(o,n).repeatForever().start()},o.update=function(e){if(!(e>2)&&f.instance.curPlayer&&this.target&&this.target.node)if(this.target.isVideoFood){var t=f.instance.getScreenPos(this.target.node);t.y+=50,this.action.setPosition(t)}else this.node.removeFromParent(),this.node.destroy()},t}(s)).prototype,"action",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=u(v.prototype,"jumpNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/TestCount.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,n,o,s;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.Component},function(t){s=t.inheritsLoose}],execute:function(){var r;e._RF.push({},"49300oJWMhLYYev/slqxsp2","TestCount",void 0);var c=n.ccclass;n.property,t("TestCount",c("TestCount")(r=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.start=function(){console.log(this.node.name,this.node.getChildByName("body").children.length)},e}(o))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./ShufenManager.ts","./Tools.ts"],(function(t){"use strict";var e,n,i,a,s,o,r,d,h,l,c,g,f,u,I,p,S,m,v;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.sys,a=t.director},function(t){s=t.createClass,o=t.defineProperty,r=t.asyncToGenerator},function(t){d=t.CUR_PLATFORM,h=t.PLATFORM_TYPE,l=t.SKIN_PACKAGE,c=t.OFFLINE_MIN_TIME,g=t.OFFLINE_GOLD_TIME,f=t.OFFLINE_MAX_GOLD,u=t.SCENE_INFO,I=t.ANT_LIFE_STATE,p=t.FOOD_INFO},function(t){S=t.ShufenEvent,m=t.default},function(t){v=t.Tools}],execute:function(){e._RF.push({},"4a5ec8slSVNzZNhiVVnrIDy","DataManager",void 0);n.ccclass,n.property;var A=t("default",function(){function t(){o(this,"sidCount",0),o(this,"musicOpen",1),o(this,"soundOpen",1),o(this,"shakeOpen",1),o(this,"qualityOpen",1),o(this,"curSceneId",1),o(this,"gold",0),o(this,"wood",0),o(this,"ants",[]),o(this,"foods",[]),o(this,"areas",[]),o(this,"playerFoodCountMax",2),o(this,"isOpenRedAnt",!1),o(this,"isOpenTask",!1),o(this,"isOpenZhizhu",!1),o(this,"isOpenSoldier",!1),o(this,"isOpenHighAnt",!1),o(this,"isOpenBugSave",!1),o(this,"taskInfo",null),o(this,"buildingInfo",[]),o(this,"offlineTime",0),o(this,"offlineGold",0),o(this,"changSceneCount",0),o(this,"TTShareSuccess",!1),o(this,"gameStep",1),o(this,"mainTaskInfo",null),o(this,"bannerInterval",30),o(this,"wxVideoSpr",0),o(this,"gongYi",0),o(this,"bingYi",0),o(this,"ziYuanJiangLi",0),o(this,"ziYuanLiBao",0),o(this,"showBannerTime",0),o(this,"startTimes",1),o(this,"isNewPlayer",!1),o(this,"nativeAds",[]),o(this,"gongxiDelayTime",0),o(this,"gongxiShowWin2Rate",0),o(this,"gongxiInterAdRate",0),o(this,"gongxiInterAdDelay",0),o(this,"flyDay",0),o(this,"flyTimes",0),o(this,"setTime",60),o(this,"nativeBannerDragCan",!1),o(this,"nativeBannerDragTimeStamp",0),o(this,"nativeBannerDragInterval",30),o(this,"nativeAdCloseJumpRate",0),o(this,"nativeInterAdDragCan",!1),o(this,"nativeInterAdDragTimeStamp",0),o(this,"nativeInterAdDragInterval",30),o(this,"jingxiCanShow",!1),o(this,"jingxiShowInterval",40),o(this,"jingxiDelayEx",1),o(this,"jingxiFirstShow",120),o(this,"videoCan",!0),o(this,"videoReportPosID",""),t._instance=this}var e=t.prototype;return e.init=function(){var e=this;window.DataManager=this;(new Date).valueOf();var n=(new Date).getDate();if(d==h.WEIYOU){setInterval((function(){t.instance.setTime+=1}),1e3)}var a=localStorage.getItem("data_version")||"";if(0==l.length);else{"1.0"!=a&&(localStorage.clear(),localStorage.setItem("data_version","1.0"))}this.flyDay=parseInt(localStorage.getItem("flyDay")||"0"),this.flyTimes=parseInt(localStorage.getItem("flyTimes")||"0"),this.sidCount=parseInt(localStorage.getItem("sidCount")||"0"),this.startTimes=parseInt(localStorage.getItem("startTimes")||"1"),this.isNewPlayer=1==this.startTimes,this.gameStep=parseInt(localStorage.getItem("gameStep")||"1"),this.offlineTime=parseInt(localStorage.getItem("offlineTime")||"0"),this.changSceneCount=parseInt(localStorage.getItem("changSceneCount")||"0"),this.musicOpen=parseInt(localStorage.getItem("musicOpen")||"1"),this.soundOpen=parseInt(localStorage.getItem("soundOpen")||"1"),this.shakeOpen=parseInt(localStorage.getItem("shakeOpen")||"1"),this.qualityOpen=parseInt(localStorage.getItem("qualityOpen")||(i.os==i.OS.IOS?"0":"1")),this.isOpenTask=1==parseInt(localStorage.getItem("isOpenTask")||"0"),this.isOpenRedAnt=1==parseInt(localStorage.getItem("isOpenRedAnt")||"0"),this.isOpenZhizhu=1==parseInt(localStorage.getItem("isOpenZhizhu")||"0"),this.isOpenSoldier=1==parseInt(localStorage.getItem("isOpenSoldier")||"0"),this.isOpenHighAnt=1==parseInt(localStorage.getItem("isOpenHighAnt")||"0"),this.isOpenBugSave=1==parseInt(localStorage.getItem("isOpenBugSave")||"0"),this.curSceneId=parseInt(localStorage.getItem("curSceneId")||"1"),this.gold=parseInt(localStorage.getItem("gold")||"0"),this.wood=parseInt(localStorage.getItem("wood")||"0"),this.ants=JSON.parse(localStorage.getItem("ants")||"[]"),this.foods=JSON.parse(localStorage.getItem("foods")||"[]"),this.playerFoodCountMax=parseInt(localStorage.getItem("playerFoodCountMax")||"2"),this.areas=JSON.parse(localStorage.getItem("areas")||"[]"),this.mainTaskInfo=JSON.parse(localStorage.getItem("mainTaskInfo")||"{}");var s=localStorage.getItem("taskInfo")||null;null!=s?this.taskInfo=JSON.parse(s):this.initTaskInfo(),n!=this.flyDay&&(this.flyDay=n,localStorage.setItem("flyDay",this.flyDay.toString()),this.flyTimes=0,localStorage.setItem("flyTimes",this.flyTimes.toString())),this.buildingInfo=JSON.parse(localStorage.getItem("buildingInfo")||"[]"),0==this.ants.length&&this.initScene(),0==this.offlineTime&&(this.offlineTime=(new Date).valueOf()),this.initOfflineMoney(),setInterval((function(){e.offlineTime=(new Date).valueOf(),localStorage.setItem("offlineTime",e.offlineTime.toString())}),1e4),this.initAdPolicy(),this.startTimes+=1,localStorage.setItem("startTimes",this.startTimes.toString())},e.getWebTTOpen=function(){var t=r(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="https://kcmnq.jinkezhexin.top/AntColony/web_tt_open.json?r="+v.getRandomInt(0,99999),t.next=3,v.HttpGET(e);case 3:if(!(n=t.sent)){t.next=12;break}if(1==n.isOpen){t.next=9;break}return t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:t.next=13;break;case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.initOfflineMoney=function(){var t=(new Date).valueOf(),e=t/1e3/60,n=this.offlineTime/1e3/60,i=Math.floor(e-n);i>=c&&(this.offlineGold=Math.floor(v.clampf(i*g,0,f))),this.offlineTime=t,localStorage.setItem("offlineTime",this.offlineTime.toString())},e.initScene=function(){this.ants=[];for(var t=u[this.curSceneId-1],e=0;e<t.ants;e++)this.addAntByID(0)},e.initTaskInfo=function(){this.taskInfo={isOpen:0,leftTime:0,tasks:[],isGet:0},localStorage.setItem("taskInfo",JSON.stringify(this.taskInfo))},e.addAntByID=function(t,e){void 0===e&&(e=-1);var n={id:t,sid:e=e<0?this.createSid():e,state:I.LIFE};if(this.ants.push(n),localStorage.setItem("ants",JSON.stringify(this.ants)),1==this.curSceneId){if(0==t){var i=this.getAntCountByID(0,!0);i<=10&&(this.reportCustom("Ant"+Math.floor(i)),v.reportEvent("Ant"+Math.floor(i)))}if(1==t){var a=this.getAntCountByID(1,!0);a<=5&&(this.reportCustom("SoldierAnt"+Math.floor(a)),v.reportEvent("SoldierAnt"+Math.floor(a)))}if(2==t){var s=this.getAntCountByID(2,!0);s<=5&&(this.reportCustom("WoodAnt"+Math.floor(s)),v.reportEvent("WoodAnt"+Math.floor(s)))}}return n},e.deadAntBySID=function(t,e){void 0===e&&(e=!0);for(var n=0;n<this.ants.length;n++)if(this.ants[n].sid==t){this.ants[n].state=e?I.DEAD:I.LIFE;break}localStorage.setItem("ants",JSON.stringify(this.ants))},e.createSid=function(){return this.sidCount++,localStorage.setItem("sidCount",this.sidCount.toString()),this.sidCount},e.getBuildingInfoBySID=function(t,e){for(var n=0;n<this.buildingInfo.length;n++)if(this.buildingInfo[n].id==t&&this.buildingInfo[n].sid==e)return this.buildingInfo[n];return null},e.getFoodInfoBySID=function(t,e){for(var n=0;n<this.foods.length;n++)if(this.foods[n].id==t&&this.foods[n].sid==e)return this.foods[n];return null},e.getAreaInfoByID=function(t){for(var e=0;e<this.areas.length;e++)if(this.areas[e].id==t)return this.areas[e];return null},e.deleteFoodBySid=function(t,e){for(var n=0;n<this.foods.length;n++)if(this.foods[n].id==t&&this.foods[n].sid==e){this.foods.splice(n,1);break}localStorage.setItem("foods",JSON.stringify(this.foods))},e.getAntCountByID=function(t,e){void 0===e&&(e=!1);var n=-1;e?n=t:0!=t&&1!=t&&2!=t||(n=t+7);for(var i=0,a=0;a<this.ants.length;a++)this.ants[a].id!=t&&this.ants[a].id!=n||i++;return i},e.getAntsCount=function(t){for(var e=0,n=0;n<this.ants.length;n++)t.indexOf(this.ants[n].id)>-1&&e++;return e},e.getFoodIDByPieceName=function(t){for(var e=t.split("_")[0],n=-1,i=0;i<p.length;i++)if(p[i].piecePrefab==e){n=p[i].id;break}return n},e.nextGameStep=function(e){e<6?(this.gameStep=e,localStorage.setItem("gameStep",this.gameStep.toString()),a.getScene().emit("ON_GAME_STEP_REFRESH")):setTimeout((function(){t.instance.gameStep=e,localStorage.setItem("gameStep",t.instance.gameStep.toString()),a.getScene().emit("ON_GAME_STEP_REFRESH")}),1e3)},e.initAdPolicy=function(){var t=r(regeneratorRuntime.mark((function t(){var e,n,i,s,o,r,l,c,g,f,u,I,p,S,m,A,O,T,y,w,x,b,C,N,D,B,_,k,E,P,R,F,J,M,V,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d!=h.WX){t.next=15;break}return"https://ga.gametdd.com/adCtrl/agd/conf",(e={}).id="62c550517a6efc2a5c1b2460",t.next=6,v.HttpPOST("https://ga.gametdd.com/adCtrl/agd/conf",JSON.stringify(e));case 6:n=t.sent,console.log("策略",n),n&&n.data&&(i=parseInt(n.data.p1),this.bannerInterval=i,s=parseInt(n.data.p3),this.wxVideoSpr=s,o=v.splitToNumber(n.data.p4,","),r=o[0],this.gongYi=r,l=o[1],this.bingYi=l,c=v.splitToNumber(n.data.p5,","),g=c[0],this.ziYuanJiangLi=g,f=c[1],this.ziYuanLiBao=f,u=c[2],this.showBannerTime=u,console.log("开关0",this.wxVideoSpr,"开关1",this.gongYi,"开关2",this.bingYi,"开关3",this.ziYuanJiangLi,"开关4",this.ziYuanLiBao,"开关5",this.showBannerTime)),this.initBanner(),this.initCustomAd(),I=this,setInterval((function(){I.initCustomAd()}),4e4),t.next=84;break;case 15:if(d!=h.OPPO){t.next=52;break}return I=this,p="https://ga.gametdd.com/adCtrl/agd/conf",(S={}).id="62ccdf897a6efc2a5c1d529e",t.next=22,v.HttpPOST(p,JSON.stringify(S));case 22:if(null!=(m=t.sent)){t.next=27;break}return t.next=26,v.HttpPOST(p,JSON.stringify(S));case 26:m=t.sent;case 27:if(null!=m){t.next=31;break}return t.next=30,v.HttpPOST(p,JSON.stringify(S));case 30:m=t.sent;case 31:console.log("策略:"+JSON.stringify(m)),A=0,O=0,T=0,y=0,w=0,m&&m.data&&(A=parseInt(m.data.p1),O=parseInt(m.data.p2),T=parseInt(m.data.p3),this.gongxiDelayTime=parseInt(m.data.p4),this.gongxiShowWin2Rate=parseInt(m.data.p5),this.bannerInterval=parseInt(m.data.p6),x=v.splitToNumber(m.data.p7,","),this.nativeBannerDragCan=1==x[0],this.nativeBannerDragInterval=x[1],this.nativeAdCloseJumpRate=parseInt(m.data.p8),b=v.splitToNumber(m.data.p9,","),this.nativeInterAdDragCan=1==b[0],this.nativeInterAdDragInterval=b[1],C=v.splitToNumber(m.data.p10,","),this.jingxiCanShow=1==C[0],this.jingxiShowInterval=C[1],this.jingxiDelayEx=C[2],this.jingxiFirstShow=C[3],y=parseInt(m.data.p11),w=parseInt(m.data.p12)),this.initBanner(),v.createNativeAd("566766",(function(t){I.nativeAds[0]=t,a.getScene().emit("NATIVE_BANNER_UPDATE"),I.nativeAds[0]&&I.nativeAds[0].ad&&I.nativeAds[0].ad.reportAdShow({adId:I.nativeAds[0].adId})})),v.createNativeAd("737025",(function(t){I.nativeAds[1]=t,a.getScene().emit("NATIVE_BANNER_UPDATE"),I.nativeAds[1]&&I.nativeAds[1].ad&&I.nativeAds[1].ad.reportAdShow({adId:I.nativeAds[1].adId})})),v.createNativeAd("566767",(function(t){I.nativeAds[2]=t,a.getScene().emit("NATIVE_BANNER_UPDATE"),I.nativeAds[2]&&I.nativeAds[2].ad&&I.nativeAds[2].ad.reportAdShow({adId:I.nativeAds[2].adId})})),this.refreshOppoNative(0,["566766"],30,A),N=0==y?this.bannerInterval:y,D=0==O?this.bannerInterval:O,this.refreshOppoNative(1,["737025","737025"],[N,D],[y,O]),B=0==w?this.bannerInterval:w,_=0==T?this.bannerInterval:T,this.refreshOppoNative(2,["573572","566767"],[B,_],[w,T]),this.jingxiCanShow&&setTimeout((function(){setInterval((function(){a.getScene().emit("SHOW_JING_XI_UI")}),1e3*I.jingxiShowInterval)}),1e3*I.jingxiFirstShow),t.next=84;break;case 52:if(d!=h.VIVO){t.next=74;break}return I=this,k="https://ga.gametdd.com/adCtrl/agd/conf",(E={}).id="62cbd2877a6efc2a5c1cc214",t.next=59,v.HttpPOST(k,JSON.stringify(E));case 59:if(null!=(P=t.sent)){t.next=64;break}return t.next=63,v.HttpPOST(k,JSON.stringify(E));case 63:P=t.sent;case 64:if(null!=P){t.next=68;break}return t.next=67,v.HttpPOST(k,JSON.stringify(E));case 67:P=t.sent;case 68:console.log("策略 "+JSON.stringify(P)),P&&P.data&&(R=parseInt(P.data.p1),this.bannerInterval=R,F=v.splitToNumber(P.data.p2,","),this.gongxiInterAdRate=F[0],this.gongxiInterAdDelay=F[1],J=v.splitToNumber(P.data.p3,","),this.jingxiCanShow=1==J[0],this.jingxiShowInterval=J[1],this.jingxiDelayEx=J[2],this.jingxiFirstShow=J[3]),this.initBanner(),this.jingxiCanShow&&setTimeout((function(){setInterval((function(){a.getScene().emit("SHOW_JING_XI_UI")}),1e3*I.jingxiShowInterval)}),1e3*I.jingxiFirstShow),t.next=84;break;case 74:if(d!=h.TT){t.next=84;break}return"https://ga.gametdd.com/adCtrl/agd/conf",(M={}).id="62cd1c7a7a6efc2a5c1d6cbb",t.next=80,v.HttpPOST("https://ga.gametdd.com/adCtrl/agd/conf",JSON.stringify(M));case 80:V=t.sent,console.log("策略",V),V&&V.data&&(j=parseInt(V.data.p1),this.bannerInterval=j),this.initBanner();case 84:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.refreshOppoNative=function(t,e,n,i){var s=this,o=0,r=0,d=0;if(setInterval((function(){if(s.nativeAds[t]&&s.nativeAds[t].ad&&s.nativeAds[t].isClose){if((new Date).valueOf()>=s.nativeAds[t].openTime){s.nativeAds[t].isClose=!1,r=0;var i=e[o];v.createNativeAd(i,(function(n){(o+=1)>=e.length&&(o=0),n?(d=0,s.nativeAds[t]=n,a.getScene().emit("NATIVE_BANNER_UPDATE"),s.nativeAds[t]&&s.nativeAds[t].ad&&s.nativeAds[t].ad.reportAdShow({adId:s.nativeAds[t].adId})):++d<3&&(s.nativeAds[t].isClose=!0)}),null!=s.nativeAds[t]?s.nativeAds[t].ad:null)}}else{r+=1;var h=60;if(h="number"==typeof n?n:n[o],r>=h){r=0;var l=e[o];v.createNativeAd(l,(function(n){(o+=1)>=e.length&&(o=0),n?(d=0,s.nativeAds[t]=n,a.getScene().emit("NATIVE_BANNER_UPDATE"),s.nativeAds[t]&&s.nativeAds[t].ad&&s.nativeAds[t].ad.reportAdShow({adId:s.nativeAds[t].adId})):++d<3&&(r=h)}),null!=s.nativeAds[t]?s.nativeAds[t].ad:null)}}}),1e3),"number"==typeof i)i>0&&setInterval((function(){s.nativeAds[t]&&s.nativeAds[t].ad&&s.nativeAds[t].ad.reportAdShow({adId:s.nativeAds[t].adId})}),1e3*i);else{var h=0;setInterval((function(){if(s.nativeAds[t]&&s.nativeAds[t].ad){var n=s.nativeAds[t].videoID,a=e.indexOf(n),o=i[a];o>0&&++h>=o&&(h=0,s.nativeAds[t].ad.reportAdShow({adId:s.nativeAds[t].adId}))}}),1e3)}},e.initBanner=function(){d==h.WX?l.length>0?v.wxBanner=v.createBanner("adunit-52ed570df45a7a96",v.isShowBanner):v.wxBanner=v.createBanner("adunit-48a75ad37c4df72a",v.isShowBanner):d==h.TT?v.wxBanner=v.createTTBanner("lkbek3ps5g3o5dld2l",v.wxBanner,v.isShowBanner):d==h.OPPO?v.wxBanner=v.createBanner("737015",v.isShowBanner):d==h.VIVO&&(v.wxBanner=v.createBanner("a3623463543741788f6ccd23e83d65ce",v.isShowBanner))},e.initCustomAd=function(){if(d==h.WX){var t=.85*wx.getSystemInfoSync().screenWidth,e=.3*wx.getSystemInfoSync().screenHeight;l.length>0?(v.customAdIcon=v.createCustomAd("adunit-35645b43b9afd492",t,e,350,v.customAdIcon),v.showCustomAd(v.customAdIcon,v.isShowCustomAd),v.customAdIcon2=v.createCustomAd("adunit-759354fc81332a6a",t,e+121,350,v.customAdIcon2),v.showCustomAd(v.customAdIcon2,v.isShowCustomAd)):(v.customAdIcon=v.createCustomAd("adunit-23471c7b5e510b9d",t,e,350,v.customAdIcon),v.showCustomAd(v.customAdIcon,v.isShowCustomAd),v.customAdIcon2=v.createCustomAd("adunit-fcd8bd80dd94dd3c",t,e+121,350,v.customAdIcon2),v.showCustomAd(v.customAdIcon2,v.isShowCustomAd))}},e.watchVideo=function(e,n,i){if(this.videoCan)if(this.videoCan=!1,setTimeout((function(){t.instance.videoCan=!0}),2e3),this.videoReportPosID=e,d==h.OPPO){var s=function(t){"ok"==t?n&&n():i&&i()}.bind(this);v.createVideo("737018",s)}else if(d==h.VIVO){var o=function(t){"ok"==t?n&&n():i&&i(),a.resume()}.bind(this);v.createVideo("0a201a98de63491ab8e5401f02564146",o)}else if(d==h.WX){var r={event:S.video,cid:this.videoReportPosID,type:1};m.report(r),v.reportEvent(e+"_1");var c=function(t){if("ok"==t){n&&n();var a={event:S.video,cid:e,type:3};m.report(a),v.reportEvent(e+"_3")}else i&&i()};l.length>0?v.createVideo("adunit-b08dfe39d643b593",c):v.createVideo("adunit-a26775fd6dab6567",c)}else if(d==h.TT){var g={event:S.video,cid:this.videoReportPosID,type:1};m.report(g);v.createVideo("317106kjin0if5n1k5",(function(t){if("ok"==t){n&&n();var a={event:S.video,cid:e,type:3};m.report(a)}else i&&i()}))}else if(d==h.WEIYOU){var f=function(t){"ok"==t?n&&n():i&&i(),a.resume()}.bind(this);v.createVideo("0a201a98de63491ab8e5401f02564146",f)}else console.log("WEB看视频成功"),n&&n();else v.ShowTip("Video loading, please wait")},e.reportCustom=function(t){0==this.changSceneCount&&m.reportCustom(t)},s(t,null,[{key:"instance",get:function(){return t._instance||(t._instance=new t,t._instance.init()),t._instance}}]),t}());o(A,"_instance",null),e._RF.pop()}}}));

System.register("chunks:///_virtual/UITip.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var n,t,i,o,r,a,s,c,l,u,p;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.LabelComponent,o=e.UITransform,r=e.Vec3,a=e.tween,s=e.Component},function(e){c=e.applyDecoratedDescriptor,l=e.inheritsLoose,u=e.initializerDefineProperty,p=e.assertThisInitialized}],execute:function(){var d,f,h,y,g;n._RF.push({},"58a35YDsXlEFYNH+dkdeo7k","UITip",void 0);var v=t.ccclass,b=t.property;e("UITip",(d=v("UITip"),f=b(i),d((g=c((y=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i))||this,u(p(n),"label",g,p(n)),n}l(n,e);var t=n.prototype;return t.onLoad=function(){this.node.getComponent(o).priority=998},t.init=function(e,n){var t=this;this.label.string=e,this.node.scale=new r(0,0,0),a(this.node).to(.1,{scale:new r(1,1,1)},{easing:"elasticInOut"}).to(n,{position:new r(0,200,0)},{easing:"quadIn"}).union().start(),this.scheduleOnce((function(){t.node.removeFromParent(),t.node.destroy()}),n)},n}(s)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIHelpMe.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./LocalizedLabel.ts","./GameManager.ts"],(function(t){"use strict";var e,n,i,a,o,s,c,r,h,l,d,u,v,p,f,g,m,N,b,I,C,A;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Node,a=t.Label,o=t.Sprite,s=t.UITransform,c=t.tween,r=t.Vec3,h=t.director,l=t.Component},function(t){d=t.applyDecoratedDescriptor,u=t.inheritsLoose,v=t.initializerDefineProperty,p=t.assertThisInitialized,f=t.defineProperty},function(t){g=t.CUR_PLATFORM,m=t.PLATFORM_TYPE,N=t.ANT_INFO},function(t){b=t.default},function(t){I=t.Tools},function(t){C=t.LocalizedLabel},function(t){A=t.GameManager}],execute:function(){var y,w,T,S,B,_,E,k,H,L,O,P,U,R,D,M,z,x,V,F,J;e._RF.push({},"606e1R0u1tHS7IvYDKOQXFD","UIHelpMe",void 0);var W=n.ccclass,G=n.property;t("UIHelpMe",(y=W("UIHelpMe"),w=G(i),T=G(i),S=G(a),B=G(a),_=G(i),E=G(i),k=G(i),H=G(i),L=G(o),y((U=d((P=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,v(p(e),"action",U,p(e)),v(p(e),"maskNode",R,p(e)),v(p(e),"descLabel",D,p(e)),v(p(e),"titleLabel",M,p(e)),v(p(e),"icons",z,p(e)),v(p(e),"shuxing",x,p(e)),v(p(e),"btnClose",V,p(e)),v(p(e),"nativeNode",F,p(e)),v(p(e),"nativeIcon",J,p(e)),f(p(e),"ant",void 0),f(p(e),"actTween",void 0),f(p(e),"btnParentNode",void 0),f(p(e),"isCanJump",!0),f(p(e),"isCloseNative",!1),e}u(e,t);var n=e.prototype;return n.onLoad=function(){this.node.getComponent(s).priority=6,this.action.getChildByName("TT").active=g==m.TT,this.action.getChildByName("Else").active=g!=m.TT,this.initNativeHelpMe()},n.refreshUI=function(t){if(this.btnParentNode=g==m.TT?this.action.getChildByName("TT"):this.action.getChildByName("Else"),t){if(this.isCloseNative=!1,A.instance.addSecUI(this.node),this.updateNativeAdShow(),!this.action.active){this.ant=t;var e=Math.floor(this.ant.id-7);if(1==e&&b.instance.bingYi)return this.onBtnVideoClick(),void this.refreshUI(null);var n=b.instance.getAntCountByID(this.ant.id),i=7==this.ant.id&&0==n;if(this.btnParentNode.getChildByName("BtnFree").active=i,this.btnParentNode.getChildByName("BtnVideo").active=!i,i)b.instance.reportCustom("HelpUIShow"+e+"Free"),I.reportEvent("Help"+e+"_ShowFree");else{if(0==e&&b.instance.gongYi)return this.onBtnVideoClick(),void this.refreshUI(null);b.instance.reportCustom("HelpUIShow"+e),I.reportEvent("Help"+e+"_Show")}this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=c(this.action).to(.5,{scale:new r(1,1,1)},{easing:"quintOut"}).start();for(var a=0;a<this.icons.length;a++)this.icons[a].active=e==a;for(var o=0;o<this.icons.length;o++)this.shuxing[o].active=e==o;this.descLabel.string=N[this.ant.id].desc,this.titleLabel.node.getComponent(C).key="helpme_ant"+e,this.titleLabel.node.getComponent(C).fetchRender(),I.showBanner(!0)}}else A.instance.subSecUI(this.node),this.actTween&&this.actTween.stop(),this.action.active=!1,this.maskNode.active=!1,g!=m.OPPO&&g!=m.VIVO&&I.showBanner(!1)},n.onBtnVideoClick=function(){if(I.playSound("click"),this.ant){var t=Math.floor(this.ant.id-7),e=b.instance.getAntCountByID(this.ant.id);if(7==this.ant.id&&0==e)this.sendReward(),b.instance.reportCustom("HelpUIShow"+t+"FreeDone"),I.reportEvent("Help"+t+"_FreeDone");else{var n=function(){if(this.sendReward(),this.ant){var t=this.ant.id;if((g==m.OPPO||g==m.VIVO)&&(b.instance.gongxiDelayTime>0||b.instance.gongxiInterAdRate>0)){var e={type:1,id:t,count:1};A.instance.uiGongXi.init(e)}}}.bind(this),i="Help"+Math.floor(t);b.instance.watchVideo(i,n)}}},n.sendReward=function(){if(this.ant){A.instance.ants.push(this.ant),this.ant.isHelpMeAnt=!1,this.ant.body1&&(this.ant.body1.active=!1,this.ant.body.active=!0);var t=b.instance.addAntByID(this.ant.id,this.ant.sid);I.playSound("getant"),A.instance.showEffect("eff_BornAnt",this.ant.node.position,1),h.getScene().emit("BUILDING_ANT_CLEAR",this.ant),A.instance.tryTaskSomeThingByCreateAntSuccess(t.id),this.refreshUI(null)}},n.onBtnCloseClick=function(){I.playSound("click"),h.getScene().emit("SHOW_HELP_ME_UI",null),h.getScene().emit("NATIVE_BANNER_SHOW",!0),I.showInterstitial()},n.onBtnCloseClickOPPO=function(){I.playSound("click"),I.getRandomInt(0,100)<b.instance.nativeAdCloseJumpRate&&this.onBtnNativeAdClick(),h.getScene().emit("SHOW_HELP_ME_UI",null),h.getScene().emit("NATIVE_BANNER_SHOW",!0)},n.initNativeHelpMe=function(){g==m.OPPO?(this.nativeNode.active=!0,this.nativeIcon.node.on("touch-start",this.onTouch,this),this.nativeIcon.node.on("touch-move",this.onTouch,this),this.nativeIcon.node.on("touch-end",this.onTouchEnd,this),this.nativeIcon.node.on("touch-canvel",this.onTouchEnd,this),this.maskNode.on("touch-start",this.onTouch,this),this.maskNode.on("touch-move",this.onTouch,this),this.maskNode.on("touch-end",this.onTouchEnd,this),this.maskNode.on("touch-cancel",this.onTouchEnd,this),this.updateNativeAdShow()):this.nativeNode.active=!1},n.onTouch=function(t){if(this.isCanJump){var e=t.getUILocation().x-cc.winSize.width/2,n=t.getUILocation().y-cc.winSize.height/2,i=this.nativeIcon.node.parent.position,a=this.nativeIcon.node.getComponent(s),o=i.x-a.width/2,c=i.x+a.width/2,r=i.y+a.height/2,h=i.y-a.height/2;e>=o&&e<=c&&n>=h&&n<=r&&(this.isCanJump=!1,this.autoJump())}},n.onTouchEnd=function(t){this.isCanJump=!0},n.autoJump=function(){if(b.instance.nativeBannerDragCan){var t=(new Date).valueOf();if(b.instance.nativeAds[1]&&b.instance.nativeAds[1].ad&&t>=b.instance.nativeBannerDragTimeStamp){var e=t+1e3*b.instance.nativeBannerDragInterval;b.instance.nativeBannerDragTimeStamp=e,this.onBtnNativeAdClick()}}},n.onBtnNativeAdClick=function(){b.instance.nativeAds[1]&&b.instance.nativeAds[1].ad&&b.instance.nativeAds[1].ad.reportAdClick({adId:b.instance.nativeAds[1].adId+""})},n.onBtnNativeCloseClick=function(){b.instance.nativeAds[1]&&b.instance.nativeAds[1].ad&&(this.isCloseNative=!0,this.updateNativeAdShow())},n.updateNativeAdShow=function(){if(b.instance.nativeAds[1]&&b.instance.nativeAds[1].ad&&!this.isCloseNative){this.nativeNode.active=!0,this.btnClose.active=!1,h.getScene().emit("NATIVE_BANNER_SHOW",!1),I.wxBanner&&I.wxBanner.hide();var t=b.instance.nativeAds[1].main;t||(t=b.instance.nativeAds[1].logoUrl),t||(t=b.instance.nativeAds[1].icon);var e=I.getURLSuffix(t);e&&e.length>=7?I.httpImageByUrlType(this.nativeIcon,t):I.setImage(this.nativeIcon,t,e),b.instance.nativeAds[1].ad.reportAdShow({adId:b.instance.nativeAds[1].adId}),this.action.setPosition(0,-150,0)}else g==m.OPPO&&(h.getScene().emit("NATIVE_BANNER_SHOW",!0),I.wxBanner&&I.wxBanner.hide()),this.nativeNode.active=!1,this.btnClose.active=!0,this.action.setPosition(0,0,0)},e}(l)).prototype,"action",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=d(P.prototype,"maskNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=d(P.prototype,"descLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=d(P.prototype,"titleLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=d(P.prototype,"icons",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=d(P.prototype,"shuxing",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=d(P.prototype,"btnClose",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=d(P.prototype,"nativeNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=d(P.prototype,"nativeIcon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=P))||O));e._RF.pop()}}}));

System.register("chunks:///_virtual/UIStarAnimation.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts"],(function(t){"use strict";var e,n,i,o,r,s,a;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Component},function(t){o=t.inheritsLoose,r=t.defineProperty,s=t.assertThisInitialized},function(t){a=t.Tools}],execute:function(){var c;e._RF.push({},"64118lHkw1NEYmD2ikw88fy","UIStarAnimation",void 0);var l=n.ccclass;n.property,t("UIStarAnimation",l("UIStarAnimation")(c=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(s(e),"scaleMax",1),r(s(e),"timer",0),r(s(e),"speed",3),e}o(e,t);var n=e.prototype;return n.onLoad=function(){this.scaleMax=a.getRandom(.5,1),this.speed=a.getRandom(2,3)},n.update=function(t){this.timer+=t*this.speed;var e=(.5*Math.sin(this.timer)+.5)*this.scaleMax;this.node.setScale(e,e,1)},e}(i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/videoSpr.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./DataManager.ts"],(function(e){"use strict";var r,t,i,o,n,a,p,c,u,l,s;return{setters:[function(e){r=e.cclegacy,t=e._decorator,i=e.Node,o=e.SpriteFrame,n=e.SpriteComponent,a=e.Component},function(e){p=e.applyDecoratedDescriptor,c=e.inheritsLoose,u=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){s=e.default}],execute:function(){var d,v,f,h,S,y,b;r._RF.push({},"6baedq9dIpFBZh6iI8Oh2Pe","videoSpr",void 0);var g=t.ccclass,m=t.property;e("videoSpr",(d=g("videoSpr"),v=m(i),f=m(o),d((y=p((S=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,u(l(r),"videoNode",y,l(r)),u(l(r),"videoSpr",b,l(r)),r}return c(r,e),r.prototype.start=function(){s.instance.wxVideoSpr&&(this.videoNode.getComponent(n).spriteFrame=this.videoSpr)},r}(a)).prototype,"videoNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p(S.prototype,"videoSpr",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./ShufenManager.ts","./DataManager.ts","./Tools.ts","./CameraFollow.ts","./Money.ts","./Ant.ts","./Food.ts","./UIHelpMe.ts","./UIFly.ts","./UIGongXi.ts","./UIBugSave.ts","./UIMoney.ts","./MoneyCube.ts","./UIMoneyCubeMark.ts","./UIFoodVideo.ts"],(function(e){"use strict";var t,n,i,s,a,o,r,h,d,l,u,c,f,g,m,b,S,p,_,I,v,k,x,A,y,O,R,T,B,P,w,C,U,G,E,N,D,M,F,W,H,z,L,J,j,Z,V,q,K,X,Y,Q,$,ee,te,ne,ie,se;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.setDisplayStats,s=e.director,a=e.systemEvent,o=e.SystemEventType,r=e.Vec3,h=e.tween,d=e.instantiate,l=e.Animation,u=e.ParticleSystem,c=e.Component,f=e.sys,g=e.SpriteFrame,m=e.Camera,b=e.find,S=e.Canvas},function(e){p=e.defineProperty,_=e.inheritsLoose,I=e.assertThisInitialized,v=e.asyncToGenerator},function(e){k=e.ANT_INFO,x=e.ANT_LIFE_STATE,A=e.MONEY_MAX_SHOW_COUNT,y=e.RED_ANT_TIME,O=e.RQ_TIME,R=e.SOLDIER_ID,T=e.MONEY_CUBE_INTERVAL,B=e.MAIN_TASK_INFO,P=e.SKIN_PACKAGE,w=e.TASK_HIDE_TIME,C=e.TASK_SHOW_TIME,U=e.TASK_FOOD_MIN_PIECE_COUNT,G=e.TASK_RAND_COUNT,E=e.TASK_FOOD_COUNT,N=e.CUR_PLATFORM,D=e.PLATFORM_TYPE,M=e.BUGSAVE_SHOW_INTERVAL,F=e.FOOD_INFO,W=e.PLAYER_POS_INSCENE,H=e.BUGSAVE_HIDE_INTERVAL,z=e.MONEY_STEP},function(e){L=e.default,J=e.ShufenEvent},function(e){j=e.default},function(e){Z=e.Tools},function(e){V=e.CameraFollow},function(e){q=e.Money},function(e){K=e.Ant},function(e){X=e.Food},function(e){Y=e.UIHelpMe},function(e){Q=e.UIFly},function(e){$=e.UIGongXi},function(e){ee=e.UIBugSave},function(e){te=e.UIMoney},function(e){ne=e.MoneyCube},function(e){ie=e.UIMoneyCubeMark},function(e){se=e.UIFoodVideo}],execute:function(){var ae,oe,re;t._RF.push({},"72664kaPMRGF6N9HB6y2Gb5","GameManager",void 0);var he=n.ccclass;n.property,e("GameManager",he("GameManager")((re=oe=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,p(I(t),"bundleAnts",void 0),p(I(t),"bundleGame",void 0),p(I(t),"bundleScene",void 0),p(I(t),"bundleUI",void 0),p(I(t),"bundleZi",void 0),p(I(t),"camera",void 0),p(I(t),"canvas",void 0),p(I(t),"cameraFollow",void 0),p(I(t),"env",void 0),p(I(t),"curPlayer",void 0),p(I(t),"prefabs",{}),p(I(t),"money",[]),p(I(t),"foods",[]),p(I(t),"antRedPos",[]),p(I(t),"ants",[]),p(I(t),"soldierArea",void 0),p(I(t),"label3dPool",[]),p(I(t),"areas",[]),p(I(t),"buildings",[]),p(I(t),"isCantAutSave",!1),p(I(t),"nodePool",[]),p(I(t),"isGameStart",!1),p(I(t),"foodIcons",[]),p(I(t),"isAutoShowTask",!1),p(I(t),"isShowedUITask",!1),p(I(t),"uiHelpMe",void 0),p(I(t),"uiBugSave",void 0),p(I(t),"uiFly",void 0),p(I(t),"uiGongXi",void 0),p(I(t),"uiMoney",void 0),p(I(t),"uiFoodVideo",void 0),p(I(t),"loadStartTime",0),p(I(t),"xinjiazaiTime",0),p(I(t),"secUI",[]),p(I(t),"bugSaveTo",void 0),p(I(t),"bugRandomPos",[]),p(I(t),"moneyCubePos",[]),p(I(t),"moneyCube",null),p(I(t),"lastTime",0),p(I(t),"_taskTipTimer",0),p(I(t),"_redAntTimer",0),p(I(t),"_hasSaveBug",!1),p(I(t),"_saveBug",null),p(I(t),"_saveBugTimer",0),p(I(t),"_saveBugOriginPos",void 0),p(I(t),"_saveBugTween",void 0),p(I(t),"_saveBugTimerPause",!1),p(I(t),"_rqTimer",0),p(I(t),"_rqType",0),p(I(t),"_moneyCubeTimer",0),p(I(t),"_isCanShowMoney",!0),t}_(t,e);var n=t.prototype;return n.onLoad=function(){i(!1),t.instance=this,window.GameManager=this,2==j.instance.gameStep?j.instance.gold<5&&(j.instance.gold=21):14==j.instance.gameStep&&j.instance.wood<5&&(j.instance.wood=9),this.xinjiazaiTime=(new Date).valueOf(),this.reportUmaProgress("xinjiazai1"),this.reportLoad(1),L.report({event:J.login}),s.getScene().on("LOADING_PROGRESS",this.logTime,this),s.getScene().on("ON_SCENE_USE",this.onUseBuilding,this),s.getScene().on("ON_TASK_ADD",this.onTaskAdd,this),s.getScene().on("CLEAR_CACHE",this.clearCache,this),s.getScene().on("ON_QUALITY_CHANGE",this.onQualityChange,this),s.getScene().on("MAIN_TASK_PROGRESS",this.onMainTaskProgress,this),s.getScene().on("MAIN_TASK_CAMERA_JUMP",this.onMainTaskJump,this),s.getScene().on("SHOW_HELP_ME_UI",this.onShowOrHideUIHelpMe,this),s.getScene().on("SHOW_JING_XI_UI",this.onShowUIJingXi,this),s.getScene().on("SHOW_BUGSAVE_UI",this.onShowUIBugSave,this),s.getScene().on("MONEY_CUBE_USE",this.onGetMoneyCube,this),a.on(o.KEY_UP,this.onKeyUp,this),this.init(),this.schedule((function(){var e={event:J.onlineTime,len:30};L.report(e)}),30)},n.reportLoad=function(e){j.instance.isNewPlayer&&(L.report({event:J.load,type:e}),j.instance.reportCustom("xs"+Math.floor(e)),console.log("打点启动加载 类型",e))},n.reportUmaProgress=function(e){if(1==j.instance.curSceneId){if(j.instance.isNewPlayer){var t=(new Date).valueOf(),n=Math.floor(.001*(t-this.xinjiazaiTime));this.xinjiazaiTime=t;var i="xs_"+e;Z.reportEvent(i,n.toString())}var s="all_"+e;Z.reportEvent(s)}},n.clearCache=function(){this.isCantAutSave=!0,localStorage.clear(),Z.ShowTip("清理缓存成功! 请重进游戏")},n.onQualityChange=function(){s.getScene().globals.shadows.enabled=1==j.instance.qualityOpen},n.logTime=function(e,t){void 0===t&&(t="");var n=(new Date).valueOf(),i=(.001*(n-this.lastTime)).toFixed(2);console.log("加载进度:",e,"耗时:",i+"秒",t),this.lastTime=n},n.init=function(){var e=v(regeneratorRuntime.mark((function e(){var t,n,i,a,o,r,h,l,u,c,p,_,I,v,x,A,y,O,R,B,w,C,U,G,E,H,z,L,J,q,X,ne,ie,ae,oe,re,he,de,le,ue,ce,fe,ge,me,be,Se,pe,_e,Ie,ve,ke,xe;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.onQualityChange(),this.lastTime=(new Date).valueOf(),this.loadStartTime=(new Date).valueOf(),this.reportUmaProgress("xinjiazai2"),this.canvas=b("Canvas").getComponent(S),this.canvas.node.active=!0,s.getScene().emit("LOADING_PROGRESS",.05),this.reportUmaProgress("xinjiazai3"),e.next=11,Z.loadBundle(P+"BundleAnts");case 11:return this.bundleAnts=e.sent,s.getScene().emit("LOADING_PROGRESS",.1),this.reportUmaProgress("xinjiazai4"),e.next=16,Z.loadBundle(P+"BundleGame");case 16:return this.bundleGame=e.sent,s.getScene().emit("LOADING_PROGRESS",.15),this.reportUmaProgress("xinjiazai5"),e.next=21,Z.loadBundle(P+"BundleScene"+j.instance.curSceneId);case 21:return this.bundleScene=e.sent,s.getScene().emit("LOADING_PROGRESS",.2),this.reportUmaProgress("xinjiazai6"),e.next=26,Z.loadBundle(P+"BundleUI");case 26:return this.bundleUI=e.sent,s.getScene().emit("LOADING_PROGRESS",.25),this.reportUmaProgress("xinjiazai7"),e.next=31,Z.loadBundle(P+"BundleZI");case 31:this.bundleZi=e.sent,t=["0","1","2","3","4","5","6","7","8","9","gang","L","M","maohao"],n=0;case 34:if(!(n<t.length)){e.next=43;break}return i=t[n],e.next=38,Z.loadAssetByBundle(this.bundleZi,i);case 38:for(a=e.sent,o=0;o<40;o++)r=d(a),this.node.addChild(r),r.name=i,r.active=!1,this.label3dPool.push(r);case 40:n++,e.next=34;break;case 43:return s.getScene().emit("LOADING_PROGRESS",.3),this.reportUmaProgress("xinjiazai8"),e.next=47,Z.loadAssetByBundle(this.bundleScene,"prefabs/Env");case 47:return h=e.sent,this.env=d(h),this.node.addChild(this.env),this.env.setPosition(0,0,0),this.antRedPos=this.env.getChildByName("AntRedPos").children,this.soldierArea=this.env.getChildByName("SoldierArea"),this.bugSaveTo=this.env.getChildByName("BugSave"),l=this.env.getChildByName("MoneyPos"),this.moneyCubePos=l.children,u=this.env.getChildByName("BugRandom"),this.bugRandomPos=u.children,s.getScene().emit("LOADING_PROGRESS",.35),this.reportUmaProgress("xinjiazai9"),e.next=62,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_Player");case 62:return c=e.sent,p=d(c),this.node.addChild(p),_=W[j.instance.curSceneId-1],p.setPosition(_[0],_[1],_[2]),this.curPlayer=p.addComponent(K),this.initCurPlayer(),s.getScene().emit("LOADING_PROGRESS",.4),this.reportUmaProgress("xinjiazai10"),Z.loadAssetByBundle(this.bundleUI,"prefabs/UITask"),Z.loadAssetByBundle(this.bundleUI,"prefabs/UISet"),s.getScene().emit("LOADING_PROGRESS",.45),this.reportUmaProgress("xinjiazai11"),e.next=77,Z.loadAssetByBundle(this.bundleGame,"prefabs/Camera");case 77:I=e.sent,v=d(I),this.node.addChild(v),v.setPosition(0,0,0),this.camera=v.getChildByName("Main Camera").getComponent(m),this.cameraFollow=v.getComponent(V),this.cameraFollow.setTarget(p),s.getScene().emit("LOADING_PROGRESS",.5),this.reportUmaProgress("xinjiazai12"),x=1;case 87:if(!(x<F.length)){e.next=98;break}if(""==(A=F[x].piecePrefab)){e.next=95;break}if(this.prefabs[A+"_suipian"]){e.next=94;break}return e.next=93,Z.loadAssetByBundle(this.bundleGame,"foods_suipian/"+A);case 93:this.prefabs[A+"_suipian"]=e.sent;case 94:for(y=0;y<15;y++)this.initNodeToPool(A+"_suipian",this.prefabs[A+"_suipian"]);case 95:x++,e.next=87;break;case 98:return s.getScene().emit("LOADING_PROGRESS",.55),this.reportUmaProgress("xinjiazai13"),e.next=102,Z.loadAssetByBundle(this.bundleGame,"prefabs/shandian");case 102:return this.prefabs.shandian=e.sent,e.next=105,Z.loadAssetByBundle(this.bundleGame,"prefabs/mutou");case 105:return this.prefabs.mutou=e.sent,e.next=108,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_PlayerUp");case 108:return this.prefabs.eff_PlayerUp=e.sent,e.next=111,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_Famu");case 111:return this.prefabs.eff_Famu=e.sent,s.getScene().emit("LOADING_PROGRESS",.6),this.reportUmaProgress("xinjiazai14"),e.next=116,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_BornAnt");case 116:return this.prefabs.eff_BornAnt=e.sent,e.next=119,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_EnemyHit");case 119:return this.prefabs.eff_EnemyHit=e.sent,e.next=122,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_ZhiShiBiao");case 122:return this.prefabs.eff_ZhiShiBiao=e.sent,s.getScene().emit("LOADING_PROGRESS",.65),this.reportUmaProgress("xinjiazai15"),e.next=127,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_RedAntGone");case 127:return this.prefabs.eff_RedAntGone=e.sent,e.next=130,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_Dead");case 130:return this.prefabs.eff_Dead=e.sent,e.next=133,Z.loadAssetByBundle(this.bundleAnts,"effects/eff_ZhiZhuShow");case 133:for(this.prefabs.eff_ZhiZhuShow=e.sent,s.getScene().emit("LOADING_PROGRESS",.7),this.reportUmaProgress("xinjiazai16"),O=0;O<1;O++)this.initNodeToPool("eff_PlayerUp",this.prefabs.eff_PlayerUp);for(R=0;R<3;R++)this.initNodeToPool("eff_Famu",this.prefabs.eff_Famu);for(B=0;B<1;B++)this.initNodeToPool("eff_BornAnt",this.prefabs.eff_BornAnt);for(w=0;w<3;w++)this.initNodeToPool("eff_EnemyHit",this.prefabs.eff_EnemyHit);for(C=0;C<3;C++)this.initNodeToPool("eff_RedAntGone",this.prefabs.eff_RedAntGone);for(U=0;U<3;U++)this.initNodeToPool("eff_Dead",this.prefabs.eff_Dead);for(G=0;G<1;G++)this.initNodeToPool("eff_ZhiZhuShow",this.prefabs.eff_ZhiZhuShow);for(E=0;E<3;E++)this.initNodeToPool("eff_ZhiShiBiao",this.prefabs.eff_ZhiShiBiao);s.getScene().emit("LOADING_PROGRESS",.75),this.reportUmaProgress("xinjiazai17"),H=this.env.getChildByName("Area1").getChildByName("ChaoXue"),z=4*j.instance.ants.length,L=Z.getCirclePoints(.35,H.worldPosition.x,H.worldPosition.z,z),J=0;case 150:if(!(J<j.instance.ants.length)){e.next=164;break}if(q=j.instance.ants[J],X=k[q.id],null!=this.prefabs[X.prefab]){e.next=157;break}return e.next=156,Z.loadAssetByBundle(this.bundleAnts,"ants/"+X.prefab);case 156:this.prefabs[X.prefab]=e.sent;case 157:ne=Math.floor(2*J),ie=L[ne],ae=this.prefabs[X.prefab],this.createAnt(q.id,0,q.sid,!0,q.state,ie,ae);case 161:J++,e.next=150;break;case 164:if(s.getScene().emit("LOADING_PROGRESS",.8),this.reportUmaProgress("xinjiazai18"),this.prefabs.Ant){e.next=170;break}return e.next=169,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant");case 169:this.prefabs.Ant=e.sent;case 170:if(this.prefabs.Ant_famu){e.next=174;break}return e.next=173,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_famu");case 173:this.prefabs.Ant_famu=e.sent;case 174:if(this.prefabs.Ant_Soldier){e.next=178;break}return e.next=177,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_Soldier");case 177:this.prefabs.Ant_Soldier=e.sent;case 178:if(this.prefabs.Ant_Soldier_Red){e.next=182;break}return e.next=181,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_Soldier_Red");case 181:this.prefabs.Ant_Soldier_Red=e.sent;case 182:if(this.prefabs.Ant_Soldier_1){e.next=186;break}return e.next=185,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_Soldier_1");case 185:this.prefabs.Ant_Soldier_1=e.sent;case 186:if(this.prefabs.Ant_famu_1){e.next=190;break}return e.next=189,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_famu_1");case 189:this.prefabs.Ant_famu_1=e.sent;case 190:if(this.prefabs.Ant_1){e.next=194;break}return e.next=193,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_1");case 193:this.prefabs.Ant_1=e.sent;case 194:return s.getScene().emit("LOADING_PROGRESS",.85),this.reportUmaProgress("xinjiazai19"),e.next=198,Z.loadAssetByBundle(this.bundleAnts,"ants/Ant_red");case 198:return this.prefabs.Ant_red=e.sent,e.next=201,Z.loadAssetByBundle(this.bundleAnts,"ants/zhizhu1");case 201:return this.prefabs.zhizhu1=e.sent,e.next=204,Z.loadAssetByBundle(this.bundleGame,"tempFood/Dead_zhizhu1");case 204:return this.prefabs.Dead_zhizhu1=e.sent,s.getScene().emit("LOADING_PROGRESS",.9),this.reportUmaProgress("xinjiazai20"),e.next=209,this.showUI("UIMain");case 209:return e.next=211,this.showUI("UIGuide");case 211:return this.showUI("UIJuHua"),e.next=214,this.showUI("UIHelpMe");case 214:return oe=e.sent,this.uiHelpMe=oe.getComponent(Y),this.uiHelpMe.refreshUI(null),e.next=219,this.showUI("UIBugSave");case 219:return re=e.sent,this.uiBugSave=re.getComponent(ee),this.uiBugSave.refreshUI(null),e.next=224,this.showUI("UIMoney");case 224:return he=e.sent,this.uiMoney=he.getComponent(te),this.uiMoney.init(null),e.next=229,this.showUI("UIFoodVideo");case 229:return de=e.sent,this.uiFoodVideo=de.getComponent(se),this.uiFoodVideo.init(null),e.next=234,this.showUI("UIFly");case 234:if(le=e.sent,this.uiFly=le.getComponent(Q),this.uiFly.init(null),N!=D.TT){e.next=240;break}e.next=247;break;case 240:if(N!=D.OPPO&&N!=D.VIVO&&N!=D.WEB){e.next=247;break}return e.next=243,this.showUI("UIGongXi");case 243:ue=e.sent,this.uiGongXi=ue.getComponent($),this.uiGongXi.init(null),N==D.OPPO&&this.showUI("UINativeBanner");case 247:for(s.getScene().emit("LOADING_PROGRESS",.95),this.reportUmaProgress("xinjiazai21"),ce=0;ce<10;ce++)this.initNodeToPool("Ant",this.prefabs.Ant);for(fe=0;fe<3;fe++)this.initNodeToPool("Ant_Soldier",this.prefabs.Ant_Soldier);for(ge=0;ge<3;ge++)this.initNodeToPool("Ant_Soldier_Red",this.prefabs.Ant_Soldier_Red);for(me=0;me<2;me++)this.initNodeToPool("Ant_famu",this.prefabs.Ant_famu);for(be=0;be<1;be++)this.initNodeToPool("Ant_red",this.prefabs.Ant_red);for(Se=0;Se<1;Se++)this.initNodeToPool("zhizhu1",this.prefabs.zhizhu1);for(pe=0;pe<50;pe++)this.initNodeToPool("shandian",this.prefabs.shandian);for(_e=0;_e<50;_e++)this.initNodeToPool("mutou",this.prefabs.mutou);this.showUI("UIPlayerCircle"),Ie=0;case 259:if(!(Ie<F.length)){e.next=271;break}if(!(F[Ie].icon&&F[Ie].icon.length>0)){e.next=267;break}return e.next=263,Z.loadAssetByBundle(this.bundleUI,"textreus/foods/"+F[Ie].icon+"/spriteFrame");case 263:ve=e.sent,this.foodIcons.push(ve),e.next=268;break;case 267:this.foodIcons.push(new g);case 268:Ie++,e.next=259;break;case 271:return s.getScene().on("ON_GAME_STEP_REFRESH",this.refreshGameStep,this),e.next=274,this.refreshGameStep();case 274:this.tryTipMainTaskTarget(),s.getScene().emit("LOADING_PROGRESS",1),this.reportUmaProgress("xinjiazai22"),this.isGameStart=!0,this.reportLoad(2),this.reportUmaProgress("xinjiazai23"),this.schedule(this.updateSaveData,1),this.schedule(this.updateAntRed,1),this.schedule(this.updateRqAnt,1),this.schedule(this.updateTask,1),this._moneyCubeTimer=Z.clampf(T-120,0,T),this.schedule(this.updateMoneyCube,1),this.schedule(this.updateBugSave,1),this._saveBugTimer=Z.clampf(M-30,0,M),j.instance.mainTaskInfo.id&&j.instance.mainTaskInfo.id>6&&!j.instance.isOpenBugSave&&(j.instance.isOpenBugSave=!0,localStorage.setItem("isOpenBugSave","1")),Z.playSound("tip"),N!=D.OPPO&&N!=D.VIVO?Z.showBanner(!1):Z.showBanner(!0),j.instance.offlineGold>0&&this.showUI("UIOffline"),ke=(new Date).valueOf(),xe=Math.floor(.001*(ke-this.loadStartTime)),console.log("加载总耗时",xe),j.instance.isNewPlayer&&1==j.instance.curSceneId&&(f.os==f.OS.IOS?Z.reportEvent("ios_jiazai_time",xe.toString()):Z.reportEvent("android_jiazai_time",xe.toString())),this._taskTipTimer=0;case 297:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initCurPlayer=function(){var e={id:0,team:0,sid:j.instance.createSid(),isAI:!1,att:k[0].att,blood:k[0].blood,attCD:k[0].attCD,attRatio:k[0].attRatio,moveSpeed:3*k[0].move,bodyRatio:k[0].bodyRatio,state:x.LIFE};this.curPlayer.init(e),this.ants.push(this.curPlayer)},n.showUI=function(){var e=v(regeneratorRuntime.mark((function e(t){var n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="prefabs/"+t,e.next=3,Z.loadAssetByBundle(this.bundleUI,n);case 3:return i=e.sent,s=d(i),this.canvas.node.addChild(s),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onMainTaskProgress=function(e,t){var n=j.instance.mainTaskInfo.id;if(null!=n){var i=B[n];if(i.type==e)if("number"==typeof i.targetID){i.targetID==t&&(j.instance.mainTaskInfo.progress+=1,localStorage.setItem("mainTaskInfo",JSON.stringify(j.instance.mainTaskInfo)),this._taskTipTimer=0);var a=j.instance.mainTaskInfo.progress;3==n&&1==a?j.instance.nextGameStep(6):1==n?(6==a&&j.instance.nextGameStep(7),10==a&&(j.instance.isOpenHighAnt=!0,localStorage.setItem("isOpenHighAnt","1"))):0==n&&2==a?s.emit("CLEAR_GUIDE_ARROW"):6==n&&10==a&&(j.instance.isOpenBugSave=!0,this._saveBugTimer=999,localStorage.setItem("isOpenBugSave","1"))}else i.targetID.indexOf(t)>-1&&(j.instance.mainTaskInfo.progress+=1,localStorage.setItem("mainTaskInfo",JSON.stringify(j.instance.mainTaskInfo)),this._taskTipTimer=0)}},n.tryTipMainTaskTarget=function(){var e=j.instance.mainTaskInfo.id;if(null!=e)if(1==e)for(var t=0;t<this.foods.length;t++){var n=this.foods[t];if(n&&6==n.id&&1==n.sid)return this.changeCameraFollow(n.node),void s.emit("GUIDE_ARROW_SHOW",n.node,10)}else if(3==e)for(var i=0;i<this.buildings.length;i++){var a=this.buildings[i];if(0==a.id){this.changeCameraFollow(a.node),s.emit("GUIDE_ARROW_SHOW",a.node);break}}else if(6==e)for(var o=0;o<this.buildings.length;o++){var r=this.buildings[o];if(7==r.id&&0==r.sid)return this.changeCameraFollow(r.node),void s.emit("GUIDE_ARROW_SHOW",r.node,10)}else if(17==e)for(var h=0;h<this.buildings.length;h++){var d=this.buildings[h];if(9==d.id&&1==d.sid)return this.changeCameraFollow(d.node),void s.emit("GUIDE_ARROW_SHOW",d.node,10)}},n.onShowOrHideUIHelpMe=function(e){this.uiHelpMe.refreshUI(e)},n.onShowUIJingXi=function(){0==this.secUI.length&&this.showUI("UIJingXi")},n.onShowUIBugSave=function(e){this.uiBugSave.refreshUI(e)},n.onMainTaskJump=function(e){if(void 0===e&&(e=!1),this.cameraFollow.target==this.curPlayer.node){var t=j.instance.mainTaskInfo.id;if(null!=t){var n=B[t];if(0==n.type){for(var i=0;i<this.ants.length;i++)if(!this.ants[i].isDead&&1==this.ants[i].team&&this.ants[i].id==n.targetID)return this.changeCameraFollow(this.ants[i].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.ants[i].node,10))}else if(1==n.type){var a=-1;a="number"==typeof n.targetID?n.targetID:n.targetID[0];for(var o=0;o<this.foods.length;o++)if(!this.foods[o].isDead&&this.foods[o].id==a)return this.changeCameraFollow(this.foods[o].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.foods[o].node,10));for(var r=0;r<this.foods.length;r++)if(this.foods[r].id==a)return this.changeCameraFollow(this.foods[r].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.foods[r].node,10))}else if(2==n.type||3==n.type){for(var h=0;h<this.buildings.length;h++)if(this.buildings[h].id==n.targetID)return this.changeCameraFollow(this.buildings[h].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.buildings[h].node,10))}else if(4==n.type){for(var d=0;d<this.areas.length;d++)if(this.areas[d].id==n.targetID)return this.changeCameraFollow(this.areas[d].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.areas[d].node,10))}else if(5==n.type){for(var l=0;l<this.buildings.length;l++)if(this.buildings[l].id==n.targetID&&this.buildings[l].sid==n.targetSid)return this.changeCameraFollow(this.buildings[l].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.buildings[l].node,10))}else if(6==n.type){for(var u=0;u<this.buildings.length;u++)if(6==this.buildings[u].id)return this.changeCameraFollow(this.buildings[u].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.buildings[u].node,10))}else if(7==n.type){for(var c=0;c<this.buildings.length;c++)if(4==this.buildings[c].id)return this.changeCameraFollow(this.buildings[c].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.buildings[c].node,10))}else if(8==n.type)for(var f=0;f<this.buildings.length;f++)if(7==this.buildings[f].id&&0==this.buildings[f].sid)return this.changeCameraFollow(this.buildings[f].node),void(e&&s.emit("GUIDE_ARROW_SHOW",this.buildings[f].node,10))}}},n.getMoneyCount=function(e){for(var t=0,n=0;n<this.money.length;n++)this.money[n].name==e&&t++;return t},n.getNearMoney=function(e,t,n){for(var i=[],s=0;s<this.money.length;s++){var a=this.money[s];a&&a.name==e&&a.parent&&r.distance(t,a.worldPosition)<n&&i.push(a)}return i.length>0?i[Z.getRandomInt(0,i.length-1)]:null},n.createSingeMoney=function(e,t,n,i){var s=this,a=this.getNodeByPool(n);a.active=!0,a.getComponent(q).count=i,a.name=n,a.setPosition(e),a.setRotationFromEuler(180*Math.random(),180*Math.random(),180),h(a).to(.5,{position:t},{easing:"sineOut"}).call((function(){s.scheduleOnce((function(){s.money.push(a)}),.5)})).start(),h(a).to(.5,{eulerAngles:new r(0,0,0)},{easing:"sineOut"}).start()},n.createMoney=function(e,t,n,i){var s=this,a=this.getMoneyCount(n),o=this,d=this.getNodeByPool(n);if(d.active=!0,d.getComponent(q).count=1,d.name=n,d.setPosition(e),d.setRotationFromEuler(180*Math.random(),180*Math.random(),180),a>=A){var l=this.getNearMoney(n,e,.6);l&&l.parent?(t=l.position.clone(),h(d).to(.5,{position:t},{easing:"sineOut"}).call((function(){l&&l.parent&&(l.getComponent(q).count+=1),s.recoverNodeToPush(d.name,d)})).start(),h(d).to(.5,{eulerAngles:new r(0,0,0)},{easing:"sineOut"}).start()):(h(d).to(.5,{position:t},{easing:"sineOut"}).call((function(){o.scheduleOnce((function(){o.money.push(d)}),.5)})).start(),h(d).to(.5,{eulerAngles:new r(0,0,0)},{easing:"sineOut"}).start())}else h(d).to(.5,{position:t},{easing:"sineOut"}).call((function(){o.scheduleOnce((function(){o.money.push(d)}),.5)})).start(),h(d).to(.5,{eulerAngles:new r(0,0,0)},{easing:"sineOut"}).start()},n.updateSaveData=function(){this.isCantAutSave||(localStorage.setItem("gold",Math.floor(j.instance.gold).toString()),localStorage.setItem("wood",Math.floor(j.instance.wood).toString()),localStorage.setItem("foods",JSON.stringify(j.instance.foods)),localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo)),localStorage.setItem("areas",JSON.stringify(j.instance.areas)))},n.updateAntRed=function(){if(j.instance.isOpenRedAnt&&(this._redAntTimer+=1,this._redAntTimer>=y)){this._redAntTimer=0;var e=Z.getRandomInt(0,this.antRedPos.length-1),t=this.antRedPos[e].worldPosition,n=this.createAnt(0,1,-1,!0,x.LIFE,t,"Ant_red");9==j.instance.gameStep&&(this.changeCameraFollow(n.node),s.emit("GUIDE_ARROW_SHOW",n.node,5))}},n.updateBugSave=function(){var e=v(regeneratorRuntime.mark((function e(){var t,n,i,a,o,d,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._saveBugTimerPause){e.next=2;break}return e.abrupt("return");case 2:if(!j.instance.isOpenBugSave){e.next=27;break}if(!this._hasSaveBug){e.next=8;break}this._saveBugTimer+=1,this._saveBugTimer>=H&&(this._saveBugTimer=0,this._hasSaveBug=!1,t=this._saveBug,this._saveBug=null,s.getScene().emit("BUG_SAVE_UPDATE"),t.changeAnimation("Run"),t.node.lookAt(this._saveBugOriginPos),n=r.distance(t.node.worldPosition,this._saveBugOriginPos),this._saveBugTween=h(t.node).to(n/t.moveSpeed,{position:this._saveBugOriginPos}).call((function(){t.node.removeFromParent(),t.node.destroy()})).start()),e.next=27;break;case 8:if(this._saveBugTimer+=1,!(this._saveBugTimer>=M)){e.next=27;break}return this._saveBugTimer=0,this._hasSaveBug=!0,i=Z.getRandomInt(0,this.bugRandomPos.length-1),a=this.bugRandomPos[i].worldPosition,this._saveBugOriginPos=a.clone(),o=Z.getRandomInt(10,33),e.next=18,Z.loadAssetByBundle(this.bundleAnts,"ants/"+k[o].prefab);case 18:d=e.sent,this._saveBug=this.createAnt(o,0,-1,!0,1,a,d,!1,!0),l=this,this._saveBug.changeAnimation("Run"),this._saveBug.node.lookAt(this.bugSaveTo.worldPosition),u=r.distance(this._saveBug.node.worldPosition,this.bugSaveTo.worldPosition),this._saveBugTween=h(this._saveBug.node).to(u/this._saveBug.moveSpeed,{position:this.bugSaveTo.position}).call((function(){l._saveBug.changeAnimation("Idle")})).start(),this.changeCameraFollow(this._saveBug.node),s.getScene().emit("BUG_SAVE_UPDATE");case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.bugSaveSuccess=function(){if(this._saveBug){this._saveBugTween&&this._saveBugTween.stop(),this.ants.push(this._saveBug),this._saveBug.isBugSave=!1;var e=this._saveBug.node.getChildByName("liulei");e&&(e.active=!1);var t=j.instance.addAntByID(this._saveBug.id,this._saveBug.sid);this.showEffect("eff_BornAnt",this._saveBug.node.position,1),this.tryTaskSomeThingByCreateAntSuccess(t.id),Z.playSound("getant"),this._hasSaveBug=!1,this._saveBugTimer=0,this._saveBug=null,s.getScene().emit("BUG_SAVE_UPDATE")}},n.updateRqAnt=function(){if(this._rqTimer+=1,this._rqTimer>=O)if(this._rqTimer=0,0==this._rqType){if(this._rqType=1,j.instance.isOpenZhizhu){for(var e=0;e<this.ants.length;e++)if((3==this.ants[e].id||4==this.ants[e].id||5==this.ants[e].id)&&!this.ants[e].isDead)return;for(var n=[],i=0;i<this.buildings.length;i++){var s=this.buildings[i];8==s.id&&2==s.info.state&&n.push(s.node.worldPosition.clone())}if(n.length>0){var a=n[Z.getRandomInt(0,n.length-1)],o=new r(a.x,0,a.z);t.instance.createAnt(3,1,-1,!0,1,o,k[3].prefab),this.showEffect("eff_ZhiZhuShow",o,1)}}}else if(1==this._rqType&&(this._rqType=0,j.instance.isOpenSoldier)){for(var h=0;h<this.ants.length;h++)if(6==this.ants[h].id&&!this.ants[h].isDead)return;var d=Z.getRandomInt(0,this.antRedPos.length-1),l=this.antRedPos[d].worldPosition,u=3,c=j.instance.getAntsCount(R);c>3&&(u=c),u>6&&(u=6),u<3&&(u=3);for(var f=0;f<u;f++){var g=new r(l.x+Z.getRandom(-.3,.3),0,l.z+Z.getRandom(-.3,.3));this.createAnt(6,1,-1,!0,1,g,k[6].prefab)}this.changeCameraFollow(this.antRedPos[d])}},n.updateMoneyCube=function(){if(!(j.instance.mainTaskInfo.id&&j.instance.mainTaskInfo.id<2)&&!this.moneyCube&&(this._moneyCubeTimer+=1,this._moneyCubeTimer>=T)){this._moneyCubeTimer=0;for(var e=null!=j.instance.mainTaskInfo.id?B[j.instance.mainTaskInfo.id]:B[B.length-1],t=[],n=0;n<e.money[4];n++)t.push(0);for(var i=0;i<e.money[5];i++)t.push(2);if(t.length>0){var s=t[Z.getRandomInt(0,t.length-1)],a=e.money[s],o=e.money[s+1],r={type:2==s?1:0,count:Z.getRandomInt(a,o)};this.createMoneyCube(r)}}},n.createMoneyCube=function(){var e=v(regeneratorRuntime.mark((function e(t){var n,i,s,a,o,r,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1==t.type?"eff_mutou":"eff_shandian",e.next=3,Z.loadAssetByBundle(this.bundleGame,"prefabs/"+n);case 3:return i=e.sent,s=d(i),this.node.addChild(s),a=Z.getRandomInt(0,this.moneyCubePos.length-1),o=this.moneyCubePos[a].worldPosition,s.setWorldPosition(o),(r=s.addComponent(ne)).init(t),this.moneyCube=r,e.next=14,this.showUI("UIMoneyCubeMark");case 14:h=e.sent,h.getComponent(ie).init(s,t.type);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onGetMoneyCube=function(e,n){for(var i=0==e?"shandian":"mutou",s=Z.getRandomInt(8,14),a=[],o=0;o<s;o++)a.push(0);for(var h=0,d=0;d<n;d++)a[h]++,++h>=a.length&&(h=0);for(var l=t.instance.curPlayer.node.worldPosition,u=0;u<a.length;u++){var c=a[u];if(c>0){var f=Z.getRandom(-.3,.3),g=Z.getRandom(-.3,.3),m=new r(l.x,0,l.z),b=new r(m.x+f,0,m.z+g);t.instance.createSingeMoney(m,b,i,c)}}},n.updateTask=function(){if(!(P.length>0)&&j.instance.isOpenTask){var e=j.instance.taskInfo;if(e.leftTime=Z.clampf(e.leftTime-1,0,e.leftTime),e.leftTime<=0)if(1==e.isOpen)e.leftTime=w,e.isOpen=0,e.isGet=0,e.tasks=[],localStorage.setItem("taskInfo",JSON.stringify(j.instance.taskInfo)),s.getScene().emit("CLOSE_UI_TASK"),this.isAutoShowTask=!1;else{e.leftTime=C,e.isOpen=1,e.isGet=0,e.tasks=[];var t=this.randomTaskInfo();if(!(t.length>0))return e.leftTime=w,e.isOpen=0,void localStorage.setItem("taskInfo",JSON.stringify(j.instance.taskInfo));e.tasks=t,localStorage.setItem("taskInfo",JSON.stringify(j.instance.taskInfo)),this.isShowedUITask||this.showUI("UITask")}else if(1==e.isOpen&&!this.isAutoShowTask){for(var n=!0,i=1==j.instance.taskInfo.isGet,a=0;a<j.instance.taskInfo.tasks.length;a++){var o=j.instance.taskInfo.tasks[a];if(o)Math.floor(o.progress)<Math.floor(o.max)&&(n=!1)}!i&&n&&(this.isAutoShowTask=!0,this.isShowedUITask||this.showUI("UITask"))}}},n.randomTaskInfo=function(){for(var e=[],t=[],n=0;n<this.foods.length;n++){var i=this.foods[n];if(i&&!i.isDead&&i.node.activeInHierarchy&&!i.isMoneyFood)if(i.getLeftCount()>=U){for(var s=!1,a=0;a<t.length;a++)if(t[a].id==i.id){s=!0;break}s||t.push(i)}}var o=Z.getRandomInt(G[0],G[1]);if(t.length>=o){t=t.sort((function(e,t){return Math.random()>.5?1:-1}));for(var r=0;r<o;r++){var h=t[r],d=Z.getRandomInt(E[0],E[1]),l={foodId:h.id,progress:0,max:d};e.push(l)}}return e},n.onTaskAdd=function(e){var t=j.instance.taskInfo,n=-1;if(8!=e&&9!=e||(n=8==e?9:8),1==t.isOpen)for(var i=0;i<t.tasks.length;i++)if((t.tasks[i].foodId==e||t.tasks[i].foodId==n)&&t.tasks[i].progress<t.tasks[i].max)return t.tasks[i].progress=Z.clampf(t.tasks[i].progress+1,0,t.tasks[i].max),void localStorage.setItem("taskInfo",JSON.stringify(j.instance.taskInfo))},n.createAnt=function(e,t,n,i,s,a,o,r,h){void 0===n&&(n=-1),void 0===r&&(r=!1),void 0===h&&(h=!1);var l=null;"string"==typeof o?l=this.getNodeByPool(o):(l=d(o),this.node.addChild(l)),l.active=!0,l.setWorldPosition(a);var u=l.addComponent(K),c={id:e,team:t,sid:n=n<0?j.instance.createSid():n,isAI:i,att:k[e].att,blood:k[e].blood,attCD:k[e].attCD,attRatio:k[e].attRatio,moveSpeed:k[e].move,bodyRatio:k[e].bodyRatio,state:s,isHelpMeAnt:r,isBugSave:h};return u.init(c),r||h||this.ants.push(u),u},n.update=function(e){if(!(e>2)){var t=j.instance.mainTaskInfo.id;null!=t&&(1==B[t].autoTip?(this._taskTipTimer+=e,this._taskTipTimer>=60&&(this._taskTipTimer=0,this.onMainTaskJump(!0))):this._taskTipTimer=0)}},n.getFoodBySid=function(e){for(var t=0;t<this.foods.length;t++)if(this.foods[t]&&this.foods[t].sid==e)return this.foods[t];return null},n.getFoodOnePieceByNear=function(e,t,n){var i=[];if(t&&t.piece&&t.node.parent){for(var s=t.piece.length,a=0;a<s;a++)if(t&&t.info.foodLeft[a]>0&&t.piece[a]){var o=r.distance(e,new r(t.piece[a].worldPosition.x,0,t.piece[a].worldPosition.z)),h={piece:t.piece[a],dis:o,pieceIndex:a};i.push(h)}if(0==i.length)return null;var d=[];if((d=(i=i.sort((function(e,t){return e.dis<t.dis?-1:1}))).length>n?i.splice(0,n):i).length>0)return d[Z.getRandomInt(0,d.length-1)]}return null},n.getOneHoleNear=function(e){for(var t=999,n=-1,i=0;i<this.buildings.length;i++)if(7==this.buildings[i].id&&2==this.buildings[i].info.state){var s=r.distance(this.buildings[i].node.worldPosition,e);s<t&&(t=s,n=i)}return this.buildings[n]},n.getSoldierMovePos=function(){var e=this.soldierArea.scale.x/2,t=this.soldierArea.scale.z/2,n=this.soldierArea.worldPosition,i=Z.getRandom(-e,e)+n.x,s=Z.getRandom(-t,t)+n.z;return new r(i,0,s)},n.showMoney=function(e,t){var n=this;this._isCanShowMoney&&(this._isCanShowMoney=!1,this.scheduleOnce((function(){for(var i=99999,s=-1,a=0,o=0;o<z.length;o++){var r=Math.abs(t-z[o]);r<i&&(i=r,s=o)}a=s>-1?z[s]:z[z.length-1];var h={type:e,count:a};n.uiMoney.init(h)}),1))},n.closedShowMoney=function(){var e=this;this.scheduleOnce((function(){e._isCanShowMoney=!0}),5)},n.getSoldierRqPos=function(){for(var e=null,t=0;t<this.buildings.length;t++)7==this.buildings[t].id&&0==this.buildings[t].sid&&(e=this.buildings[t].node.worldPosition);var n=Z.getRandom(-.7,.7)+e.x,i=Z.getRandom(-.7,.7)+e.z;return new r(n,0,i)},n.getLabel3DByPool=function(e){for(var t=0;t<this.label3dPool.length;t++)if(this.label3dPool[t].name==e)return this.label3dPool.splice(t,1)[0];return null},n.recoverLabel3DToPool=function(e){e.setParent(this.node),e.active=!1,this.label3dPool.push(e)},n.tryUnlockNextWorld=function(){for(var e=0,t=0;t<this.buildings.length;t++){var n=this.buildings[t];6==n.id&&n.info&&n.info.state>=1&&e++}if(e>=2)for(var i=0;i<this.buildings.length;i++){var s=this.buildings[i];if(9==s.id&&s.info&&0==s.info.state)return s.info.state=1,localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo)),this.changeCameraFollow(s.node),void s.refreshShow()}},n.onUseBuilding=function(e){if(0==e.id||1==e.id||2==e.id){var t=e.id,n=j.instance.addAntByID(t),i=new r(e.node.worldPosition.x+.24,0,e.node.worldPosition.z-.35);this.createAnt(n.id,0,n.sid,!0,1,i,k[n.id].prefab),Z.playSound("getant"),this.showEffect("eff_BornAnt",i,1),this.tryTaskSomeThingByCreateAntSuccess(t);var a=j.instance.getAntCountByID(0);if((N==D.OPPO||N==D.VIVO)&&(j.instance.gongxiDelayTime>0||j.instance.gongxiInterAdRate>0)&&(0==t&&a>=3||1==t||2==t)){var o={type:1,id:t,count:1};this.uiGongXi.init(o)}}else if(3==e.id);else if(4==e.id){var h=function(t){this.curPlayer.setFly(t),Z.playSound("fly"),e.updateFlyTime(),s.getScene().emit("MAIN_TASK_PROGRESS",7,4)}.bind(this);0==e.info.useTimes?(h(!0),s.emit("CLEAR_GUIDE_ARROW")):N==D.TT?this.uiFly.init(h):j.instance.watchVideo("FlyReward",h)}else if(5==e.id&&(j.instance.playerFoodCountMax+=1,localStorage.setItem("playerFoodCountMax",j.instance.playerFoodCountMax.toString()),Z.ShowTip("Update Successed !"),Z.playSound("fuzhong"),s.getScene().emit("MAIN_TASK_PROGRESS",3,e.id),1==j.instance.curSceneId)){var d=Math.floor(j.instance.playerFoodCountMax-1);j.instance.reportCustom("AntLevel"+d),Z.reportEvent("AntLevel"+d)}},n.tryTaskSomeThingByCreateAntSuccess=function(e){var t=j.instance.getAntCountByID(0);6==j.instance.gameStep&&t>=2||t>=3||j.instance.gameStep,s.getScene().emit("MAIN_TASK_PROGRESS",2,e)},n.refreshGameStep=function(){var e=v(regeneratorRuntime.mark((function e(){var t,n,i,a,o,r,h,l,u,c,f,g,m,b,S,p,_,I,v,k,x,A,R,B,P,w,C,U,G,E,N,D,M,F,W,H,z,L,J,V,q,K,X,Y,Q,$,ee,te,ne,ie,se,ae,oe,re,he,de,le,ue,ce,fe,ge,me,be,Se=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=j.instance.gameStep){e.next=10;break}return e.next=3,Z.loadAssetByBundle(this.bundleGame,"tempFood/TempFoodGold");case 3:t=e.sent,n=d(t),this.node.addChild(n),n.setPosition(-.2,0,-1.3),s.emit("GUIDE_ARROW_SHOW",n),e.next=466;break;case 10:if(2!=j.instance.gameStep){e.next=25;break}j.instance.reportCustom("xs3"),Z.reportEvent("yindao0"),i=0;case 14:if(!(i<this.buildings.length)){e.next=23;break}if(7!=(a=this.buildings[i]).id||0!=a.sid){e.next=20;break}return this.changeCameraFollow(a.node),s.emit("GUIDE_ARROW_SHOW",a.node),e.abrupt("return");case 20:i++,e.next=14;break;case 23:e.next=466;break;case 25:if(3!=j.instance.gameStep){e.next=37;break}o=0;case 27:if(!(o<this.foods.length)){e.next=35;break}if(!(r=this.foods[o])||6!=r.id||1!=r.sid){e.next=32;break}return s.emit("GUIDE_ARROW_SHOW",r.node),e.abrupt("return");case 32:o++,e.next=27;break;case 35:e.next=466;break;case 37:if(4!=j.instance.gameStep){e.next=52;break}j.instance.reportCustom("xs4"),Z.reportEvent("yindao1"),h=0;case 41:if(!(h<this.buildings.length)){e.next=50;break}if(7!=(l=this.buildings[h]).id||0!=l.sid){e.next=47;break}return this.changeCameraFollow(l.node),s.emit("GUIDE_ARROW_SHOW",l.node),e.abrupt("return");case 47:h++,e.next=41;break;case 50:e.next=466;break;case 52:if(5!=j.instance.gameStep){e.next=70;break}j.instance.reportCustom("xs5"),Z.reportEvent("yindao2"),u=0;case 56:if(!(u<this.buildings.length)){e.next=67;break}if(0!=(c=this.buildings[u]).id){e.next=64;break}return 0==c.info.state&&(c.info.state=2,localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo))),c.refreshShow(),this.changeCameraFollow(c.node),s.emit("GUIDE_ARROW_SHOW",c.node),e.abrupt("break",67);case 64:u++,e.next=56;break;case 67:null==j.instance.mainTaskInfo.id&&1==j.instance.curSceneId&&(f={id:0,progress:0,isGet:0},j.instance.mainTaskInfo=f,localStorage.setItem("mainTaskInfo",JSON.stringify(j.instance.mainTaskInfo)),j.instance.reportCustom("TaskStart"+Math.floor(f.id))),e.next=466;break;case 70:if(6!=j.instance.gameStep){e.next=86;break}if(0!=j.instance.changSceneCount){e.next=84;break}g=0;case 73:if(!(g<this.buildings.length)){e.next=84;break}if(4!=(m=this.buildings[g]).id){e.next=81;break}return 0==m.info.state&&(m.info.state=2,localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo))),m.refreshShow(),this.changeCameraFollow(m.node),s.emit("GUIDE_ARROW_SHOW",m.node,10),e.abrupt("break",84);case 81:g++,e.next=73;break;case 84:e.next=466;break;case 86:if(7!=j.instance.gameStep){e.next=101;break}b=0;case 88:if(!(b<this.buildings.length)){e.next=99;break}if(5!=(S=this.buildings[b]).id){e.next=96;break}return 0==S.info.state&&(S.info.state=2,localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo))),S.refreshShow(),this.changeCameraFollow(S.node),s.emit("GUIDE_ARROW_SHOW",S.node,10),e.abrupt("return");case 96:b++,e.next=88;break;case 99:e.next=466;break;case 101:if(8!=j.instance.gameStep){e.next=123;break}this._moneyCubeTimer=T,j.instance.isOpenZhizhu=!0,localStorage.setItem("isOpenZhizhu","1"),this._rqTimer=O,this._rqType=0,p=0;case 108:if(!(p<this.buildings.length)){e.next=121;break}if(8!=(_=this.buildings[p]).id||0!=_.info.state){e.next=118;break}return _.info.state=2,_.info.progress=120,_.refreshShow(),localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo)),this.changeCameraFollow(_.node),s.emit("GUIDE_ARROW_SHOW",_.node,5),e.abrupt("return");case 118:p++,e.next=108;break;case 121:e.next=466;break;case 123:if(9!=j.instance.gameStep){e.next=130;break}this._redAntTimer=y,j.instance.isOpenRedAnt=!0,localStorage.setItem("isOpenRedAnt","1"),j.instance.nextGameStep(10),e.next=466;break;case 130:if(11!=j.instance.gameStep){e.next=147;break}I=0;case 132:if(!(I<this.buildings.length)){e.next=145;break}if(1!=(v=this.buildings[I]).id||0!=v.info.state){e.next=142;break}return v.info.state=2,v.isNeedRefreshLabel=!0,v.refreshShow(),j.instance.nextGameStep(12),this.changeCameraFollow(v.node),s.emit("GUIDE_ARROW_SHOW",v.node,5),e.abrupt("return");case 142:I++,e.next=132;break;case 145:e.next=466;break;case 147:if(12!=j.instance.gameStep){e.next=152;break}this.scheduleOnce((function(){j.instance.isOpenSoldier=!0,localStorage.setItem("isOpenSoldier","1"),Se._rqTimer=O,Se._rqType=1}),15),this.scheduleOnce((function(){j.instance.isOpenTask=!0,localStorage.setItem("isOpenTask","1")}),30),e.next=466;break;case 152:if(13!=j.instance.gameStep){e.next=163;break}return e.next=155,Z.loadAssetByBundle(this.bundleGame,"tempFood/TempFoodWood");case 155:k=e.sent,x=d(k),this.node.addChild(x),x.setPosition(-3,0,-.82),this.changeCameraFollow(x),s.emit("GUIDE_ARROW_SHOW",x),e.next=466;break;case 163:if(14!=j.instance.gameStep){e.next=179;break}j.instance.getAreaInfoByID(2).state=1,localStorage.setItem("areas",JSON.stringify(j.instance.areas)),A=0;case 168:if(!(A<this.areas.length)){e.next=177;break}if(2!=this.areas[A].id){e.next=174;break}return this.areas[A].refreshShow(),this.changeCameraFollow(this.areas[A].node),s.emit("GUIDE_ARROW_SHOW",this.areas[A].node,5),e.abrupt("return");case 174:A++,e.next=168;break;case 177:e.next=466;break;case 179:if(15!=j.instance.gameStep){e.next=192;break}R=0;case 181:if(!(R<this.buildings.length)){e.next=190;break}if(7!=(B=this.buildings[R]).id||1!=B.sid){e.next=187;break}return this.changeCameraFollow(B.node),s.emit("GUIDE_ARROW_SHOW",B.node,10),e.abrupt("return");case 187:R++,e.next=181;break;case 190:e.next=466;break;case 192:if(16!=j.instance.gameStep){e.next=208;break}P=0;case 194:if(!(P<this.buildings.length)){e.next=206;break}if(2!=(w=this.buildings[P]).id||0!=w.info.state){e.next=203;break}return w.info.state=2,w.isNeedRefreshLabel=!0,w.refreshShow(),this.changeCameraFollow(w.node),s.emit("GUIDE_ARROW_SHOW",w.node,10),e.abrupt("return");case 203:P++,e.next=194;break;case 206:e.next=466;break;case 208:if(17!=j.instance.gameStep){e.next=224;break}C=0;case 210:if(!(C<this.buildings.length)){e.next=222;break}if(3!=(U=this.buildings[C]).id||0!=U.info.state){e.next=219;break}return U.info.state=1,U.isNeedRefreshLabel=!0,U.refreshShow(),this.changeCameraFollow(U.node),s.emit("GUIDE_ARROW_SHOW",U.node,10),e.abrupt("return");case 219:C++,e.next=210;break;case 222:e.next=466;break;case 224:if(18!=j.instance.gameStep){e.next=240;break}j.instance.getAreaInfoByID(3).state=1,localStorage.setItem("areas",JSON.stringify(j.instance.areas)),G=0;case 229:if(!(G<this.areas.length)){e.next=238;break}if(3!=this.areas[G].id){e.next=235;break}return this.areas[G].refreshShow(),this.changeCameraFollow(this.areas[G].node),s.emit("GUIDE_ARROW_SHOW",this.areas[G].node,20),e.abrupt("break",238);case 235:G++,e.next=229;break;case 238:e.next=466;break;case 240:if(19!=j.instance.gameStep){e.next=256;break}E=0;case 242:if(!(E<this.buildings.length)){e.next=254;break}if(7!=(N=this.buildings[E]).id||2!=N.sid||2==N.info.state){e.next=251;break}return N.info.state=1,N.isNeedRefreshLabel=!0,N.refreshShow(),this.changeCameraFollow(N.node),s.emit("GUIDE_ARROW_SHOW",N.node,10),e.abrupt("return");case 251:E++,e.next=242;break;case 254:e.next=466;break;case 256:if(20!=j.instance.gameStep){e.next=272;break}D=0;case 258:if(!(D<this.buildings.length)){e.next=270;break}if(6!=(M=this.buildings[D]).id||0!=M.sid||0!=M.info.state){e.next=267;break}return M.info.state=1,M.isNeedRefreshLabel=!0,M.refreshShow(),this.changeCameraFollow(M.node),s.emit("GUIDE_ARROW_SHOW",M.node,10),e.abrupt("return");case 267:D++,e.next=258;break;case 270:e.next=466;break;case 272:if(21!=j.instance.gameStep){e.next=285;break}F=0;case 274:if(!(F<this.foods.length)){e.next=283;break}if(!(W=this.foods[F])||3!=W.id||15!=W.sid){e.next=280;break}return this.changeCameraFollow(W.node),s.emit("GUIDE_ARROW_SHOW",W.node,10),e.abrupt("return");case 280:F++,e.next=274;break;case 283:e.next=466;break;case 285:if(22!=j.instance.gameStep){e.next=298;break}H=0;case 287:if(!(H<this.buildings.length)){e.next=296;break}if(6!=(z=this.buildings[H]).id||0!=z.sid){e.next=293;break}return this.changeCameraFollow(z.node),s.emit("GUIDE_ARROW_SHOW",z.node,10),e.abrupt("return");case 293:H++,e.next=287;break;case 296:e.next=466;break;case 298:if(23!=j.instance.gameStep){e.next=310;break}L=0;case 300:if(!(L<this.buildings.length)){e.next=308;break}if(6!=(J=this.buildings[L]).id||1!=J.sid){e.next=305;break}return 0==J.info.state&&(J.info.state=1,J.isNeedRefreshLabel=!0,J.refreshShow(),this.changeCameraFollow(J.node),s.emit("GUIDE_ARROW_SHOW",J.node,10)),e.abrupt("return");case 305:L++,e.next=300;break;case 308:e.next=466;break;case 310:if(24!=j.instance.gameStep){e.next=323;break}V=0;case 312:if(!(V<this.buildings.length)){e.next=321;break}if(0!=(q=this.buildings[V]).id){e.next=318;break}return this.changeCameraFollow(q.node),s.emit("GUIDE_ARROW_SHOW",q.node,10),e.abrupt("return");case 318:V++,e.next=312;break;case 321:e.next=466;break;case 323:if(25!=j.instance.gameStep){e.next=336;break}K=0;case 325:if(!(K<this.foods.length)){e.next=334;break}if(!(X=this.foods[K])||10!=X.id||8!=X.sid){e.next=331;break}return this.changeCameraFollow(X.node),s.emit("GUIDE_ARROW_SHOW",X.node,10),e.abrupt("return");case 331:K++,e.next=325;break;case 334:e.next=466;break;case 336:if(26!=j.instance.gameStep){e.next=349;break}Y=0;case 338:if(!(Y<this.buildings.length)){e.next=347;break}if(1!=(Q=this.buildings[Y]).id){e.next=344;break}return this.changeCameraFollow(Q.node),s.emit("GUIDE_ARROW_SHOW",Q.node,10),e.abrupt("return");case 344:Y++,e.next=338;break;case 347:e.next=466;break;case 349:if(27!=j.instance.gameStep){e.next=362;break}$=0;case 351:if(!($<this.buildings.length)){e.next=360;break}if(7!=(ee=this.buildings[$]).id||0!=ee.sid){e.next=357;break}return this.changeCameraFollow(ee.node),s.emit("GUIDE_ARROW_SHOW",ee.node,5),e.abrupt("return");case 357:$++,e.next=351;break;case 360:e.next=466;break;case 362:if(28!=j.instance.gameStep){e.next=377;break}te=0;case 364:if(!(te<this.buildings.length)){e.next=375;break}if(7!=(ne=this.buildings[te]).id||1!=ne.sid){e.next=372;break}return 0==ne.info.state&&(ne.info.state=1),ne.refreshShow(),this.changeCameraFollow(ne.node),s.emit("GUIDE_ARROW_SHOW",ne.node,10),e.abrupt("return");case 372:te++,e.next=364;break;case 375:e.next=466;break;case 377:if(29!=j.instance.gameStep){e.next=392;break}ie=0;case 379:if(!(ie<this.buildings.length)){e.next=390;break}if(2!=(se=this.buildings[ie]).id||3!=se.sid){e.next=387;break}return 2!=se.info.state&&(se.info.state=2),se.refreshShow(),this.changeCameraFollow(se.node),s.emit("GUIDE_ARROW_SHOW",se.node,10),e.abrupt("return");case 387:ie++,e.next=379;break;case 390:e.next=466;break;case 392:if(30!=j.instance.gameStep){e.next=405;break}ae=0;case 394:if(!(ae<this.foods.length)){e.next=403;break}if(!(oe=this.foods[ae])||8!=oe.id||3!=oe.sid){e.next=400;break}return this.changeCameraFollow(oe.node),s.emit("GUIDE_ARROW_SHOW",oe.node,10),e.abrupt("return");case 400:ae++,e.next=394;break;case 403:e.next=466;break;case 405:if(31!=j.instance.gameStep){e.next=420;break}re=0;case 407:if(!(re<this.buildings.length)){e.next=418;break}if(3!=(he=this.buildings[re]).id||3!=he.sid){e.next=415;break}return 0==he.info.state&&(he.info.state=1),he.refreshShow(),this.changeCameraFollow(he.node),s.emit("GUIDE_ARROW_SHOW",he.node,10),e.abrupt("return");case 415:re++,e.next=407;break;case 418:e.next=466;break;case 420:if(32!=j.instance.gameStep){e.next=433;break}de=0;case 422:if(!(de<this.buildings.length)){e.next=431;break}if(7!=(le=this.buildings[de]).id||0!=le.sid){e.next=428;break}return this.changeCameraFollow(le.node),s.emit("GUIDE_ARROW_SHOW",le.node,5),e.abrupt("return");case 428:de++,e.next=422;break;case 431:e.next=466;break;case 433:if(33!=j.instance.gameStep){e.next=448;break}ue=0;case 435:if(!(ue<this.buildings.length)){e.next=446;break}if(7!=(ce=this.buildings[ue]).id||2!=ce.sid){e.next=443;break}return 0==ce.info.state&&(ce.info.state=1),ce.refreshShow(),this.changeCameraFollow(ce.node),s.emit("GUIDE_ARROW_SHOW",ce.node,10),e.abrupt("return");case 443:ue++,e.next=435;break;case 446:e.next=466;break;case 448:if(34!=j.instance.gameStep){e.next=452;break}for(fe=0;fe<this.buildings.length;fe++)6==(ge=this.buildings[fe]).id&&(0==ge.info.state&&(ge.info.state=1),ge.refreshShow(),0==ge.sid&&(this.changeCameraFollow(ge.node),s.emit("GUIDE_ARROW_SHOW",ge.node,10)));e.next=466;break;case 452:if(35!=j.instance.gameStep){e.next=465;break}me=0;case 454:if(!(me<this.buildings.length)){e.next=463;break}if(6!=(be=this.buildings[me]).id||0!=be.sid){e.next=460;break}return this.changeCameraFollow(be.node),s.emit("GUIDE_ARROW_SHOW",be.node,10),e.abrupt("return");case 460:me++,e.next=454;break;case 463:e.next=466;break;case 465:j.instance.gameStep;case 466:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createTempFood=function(){var e=v(regeneratorRuntime.mark((function e(t,n){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.prefabs[t],this.prefabs[t]){e.next=5;break}return e.next=4,Z.loadAssetByBundle(this.bundleGame,"tempFood/"+t);case 4:i=e.sent;case 5:s=d(i),this.node.addChild(s),s.setWorldPosition(n),s.getComponent(X).sid=j.instance.createSid()+1e6;case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.changeCameraFollow=function(e){for(var t=this,n=0;n<this.buildings.length;n++)if(5==this.buildings[n].id)return this.cameraFollow.setTarget(e),void this.scheduleOnce((function(){t.cameraFollow.setTarget(t.curPlayer.node)}),1.5)},n.flyMoney=function(e,t,n){var i=this,s=this.getNodeByPool(e);s.active=!0,s.position=t,s.getChildByName("body").setRotationFromEuler(180*Math.random(),180*Math.random(),180*Math.random()),h(s).to(.15,{position:n}).call((function(){s.getChildByName("body").setRotationFromEuler(0,0,0),i.recoverNodeToPush(s.name,s)})).start()},n.getScreenPos=function(e){return this.camera?Z.getScreenPos(e,this.camera,this.canvas.node):new r(0,0,0)},n.showEffect=function(e,t,n){var i=this,s=this.getNodeByPool(e);if(s){s.active=!0,s.setPosition(t);for(var a=s.getComponentsInChildren(l),o=0;o<a.length;o++)a[o].stop(),a[o].play(a[o].clips[0].name);for(var r=s.getComponentsInChildren(u),h=0;h<r.length;h++)r[h].stop(),r[h].clear(),r[h].play();this.scheduleOnce((function(){i.recoverNodeToPush(e,s)}),n)}},n.ChuiShaoEffect=function(e,t){var n=this,i=this.getNodeByPool("eff_ZhiShiBiao");if(i){i.active=!0,i.setPosition(e);for(var s=i.getChildByName("body").getComponentsInChildren(l),a=0;a<s.length;a++)s[a].stop(),s[a].play(s[a].clips[0].name);i.lookAt(t),this.scheduleOnce((function(){n.recoverNodeToPush("eff_ZhiShiBiao",i)}),2)}},n.initNodeToPool=function(e,t){var n=d(t);this.node.addChild(n),n.active=!1,this.recoverNodeToPush(e,n)},n.getNodeByPool=function(e){for(var t=0;t<this.nodePool.length;t++)if(this.nodePool[t].name==e)return this.nodePool.splice(t,1)[0];var n=this.prefabs[e];if(!n)return console.error("找不到prefab",e),null;var i=d(n);return this.node.addChild(i),i.active=!1,i},n.recoverNodeToPush=function(e,t){t.active=!1,t.name=e,this.nodePool.push(t)},n.addSecUI=function(e){this.secUI.push(e)},n.subSecUI=function(e){var t=this.secUI.indexOf(e);t>-1&&this.secUI.splice(t,1)},n.nextScene=function(){if(this.isCantAutSave=!0,j.instance.changSceneCount+=1,localStorage.setItem("changSceneCount",j.instance.changSceneCount.toString()),j.instance.curSceneId+=1,j.instance.curSceneId>2&&(j.instance.curSceneId=1),localStorage.setItem("curSceneId",j.instance.curSceneId.toString()),j.instance.gold=20,localStorage.setItem("gold",j.instance.gold.toString()),j.instance.wood=10,localStorage.setItem("wood",j.instance.wood.toString()),j.instance.ants=[],j.instance.initScene(),localStorage.setItem("ants",JSON.stringify(j.instance.ants)),j.instance.foods=[],localStorage.setItem("foods",JSON.stringify(j.instance.foods)),j.instance.areas=[],localStorage.setItem("areas",JSON.stringify(j.instance.areas)),j.instance.buildingInfo=[],localStorage.setItem("buildingInfo",JSON.stringify(j.instance.buildingInfo)),j.instance.playerFoodCountMax=2,localStorage.setItem("playerFoodCountMax",j.instance.playerFoodCountMax.toString()),localStorage.setItem("isOpenRedAnt","1"),localStorage.setItem("isOpenTask","1"),localStorage.setItem("isOpenZhizhu","1"),localStorage.setItem("isOpenSoldier","1"),localStorage.setItem("isOpenHighAnt","1"),localStorage.setItem("isOpenBugSave","1"),j.instance.taskInfo.leftTime=w,j.instance.taskInfo.isOpen=0,j.instance.taskInfo.tasks=[],j.instance.taskInfo.isGet=0,localStorage.setItem("taskInfo",JSON.stringify(j.instance.taskInfo)),2==j.instance.curSceneId){var e={id:18,progress:0,isGet:0};j.instance.mainTaskInfo=e,localStorage.setItem("mainTaskInfo",JSON.stringify(j.instance.mainTaskInfo)),j.instance.reportCustom("TaskStart"+Math.floor(e.id)),j.instance.gameStep=24,localStorage.setItem("gameStep",j.instance.gameStep.toString())}else j.instance.mainTaskInfo={},localStorage.setItem("mainTaskInfo",JSON.stringify(j.instance.mainTaskInfo)),j.instance.gameStep=99,localStorage.setItem("gameStep",j.instance.gameStep.toString());s.loadScene("GameScene")},n.onKeyUp=function(){var e=v(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:49==t.keyCode?(j.instance.gold+=100,Z.ShowTip("金币+100"),j.instance.wood+=100,Z.ShowTip("木材+100")):50==t.keyCode?(j.instance.isOpenRedAnt=!0,this._redAntTimer=y):51==t.keyCode?(j.instance.isOpenZhizhu=!0,j.instance.isOpenSoldier=!0,this._rqTimer=O,this._rqType=1,Z.ShowTip("作弊蜘蛛入侵")):52==t.keyCode?this.nextScene():53==t.keyCode?(j.instance.isOpenBugSave=!0,this._saveBugTimer=H):54==t.keyCode&&null!=(n=j.instance.mainTaskInfo.id)&&("number"==typeof(i=B[n]).targetID?this.onMainTaskProgress(i.type,i.targetID):this.onMainTaskProgress(i.type,i.targetID[0]));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(c),p(oe,"instance",null),ae=re))||ae);t._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"73c7c8Obu5Liad5/km0sqS0","Config",void 0);e("SKIN_PACKAGE","New");var a=e("PLATFORM_TYPE",{WEB:"WEB",WX:"WX",QQ:"QQ",TT:"TT",OPPO:"OPPO",VIVO:"VIVO",WEIYOU:"WEIYOU"});e("CUR_PLATFORM",a.WEIYOU),e("CHEAT_OPEN",!1),e("ANT_INFO",[{id:0,name:"工蚁",desc:"工作的蚂蚁",move:.3,att:100,blood:200,attRatio:.1,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"Ant"},{id:1,name:"兵蚁",desc:"战斗的蚂蚁",move:.4,att:50,blood:300,attRatio:.1,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"Ant_Soldier"},{id:2,name:"木蚁",desc:"伐木的蚂蚁",move:.3,att:100,blood:200,attRatio:.1,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"Ant_famu"},{id:3,name:"蜘蛛1",desc:"蜘蛛1",move:.25,att:70,blood:500,attRatio:.2,bodyRatio:.3,searchRatio:1.3,attCD:1,prefab:"zhizhu1"},{id:4,name:"蜘蛛2",desc:"蜘蛛2",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.3,searchRatio:1.3,attCD:1,prefab:"zhizhu2"},{id:5,name:"蜘蛛3",desc:"蜘蛛3",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.3,searchRatio:1.3,attCD:1,prefab:"zhizhu3"},{id:6,name:"入侵兵蚁",desc:"入侵兵蚁",move:.3,att:30,blood:300,attRatio:.1,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"Ant_Soldier_Red"},{id:7,name:"高级工蚁",desc:"Advanced worker ant has higher carrying quantity and HP than Worker-Ant",move:.3,att:100,blood:250,attRatio:.1,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"Ant_1"},{id:8,name:"高级兵蚁",desc:"Advanced Soldier-Ant has higher ATK power and HP than Soldier-Ant",move:.4,att:70,blood:350,attRatio:.1,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"Ant_Soldier_1"},{id:9,name:"高级木蚁",desc:"Advanced Carpenter-Ant has faster collection speed and HP than Carpenter-Ant",move:.3,att:100,blood:250,attRatio:.1,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"Ant_famu_1"},{id:10,name:"瓢虫1",desc:"瓢虫1",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_10"},{id:11,name:"瓢虫2",desc:"瓢虫2",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_11"},{id:12,name:"瓢虫3",desc:"瓢虫3",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_12"},{id:13,name:"甲虫1",desc:"甲虫1",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_13"},{id:14,name:"甲虫2",desc:"甲虫2",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_14"},{id:15,name:"甲虫3",desc:"甲虫3",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_15"},{id:16,name:"飞虫1",desc:"飞虫1",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_16"},{id:17,name:"飞虫2",desc:"飞虫2",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_17"},{id:18,name:"飞虫3",desc:"飞虫3",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_18"},{id:19,name:"昆虫1",desc:"昆虫1",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_19"},{id:20,name:"昆虫2",desc:"昆虫2",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_20"},{id:21,name:"昆虫3",desc:"昆虫3",move:.25,att:20,blood:400,attRatio:.2,bodyRatio:.1,searchRatio:1.3,attCD:1,prefab:"kunchong_21"},{id:22,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_22"},{id:23,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_23"},{id:24,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_24"},{id:25,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_25"},{id:26,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_26"},{id:27,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_27"},{id:28,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_28"},{id:29,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_29"},{id:30,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_30"},{id:31,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_31"},{id:32,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_32"},{id:33,name:"虫子",desc:"虫子",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_33"},{id:34,name:"蜘蛛",desc:"蜘蛛",move:.4,att:75,blood:450,attRatio:.2,bodyRatio:.1,searchRatio:50,attCD:1,prefab:"kunchong_34"}]),e("WORKER_ID",[0,7,10,11,12,13,14,15,16,17,18,19,20,21]),e("WOOD_WORKER_ID",[2,9]),e("SOLDIER_ID",[1,3,4,5,6,8,22,23,24,25,26,27,28,29,30,31,32,33,34]),e("ANT_LIFE_STATE",{LIFE:1,DEAD:0}),e("WOKER_FOOD_WEIGHT",[40,20,10,10,10,8,8,5,5,5,5,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0]),e("FOOD_INFO",[{id:0},{id:1,name:"草莓",icon:"caomei",piecePrefab:"caomei",type:0,dead:60,pieceCount:5,size:.35},{id:2,name:"猕猴桃",icon:"kiwi",piecePrefab:"kiwi",type:0,dead:60,pieceCount:5,size:.5},{id:3,name:"鸡腿",icon:"jitui2",piecePrefab:"jitui2",type:0,dead:60,pieceCount:5,size:.6},{id:4,name:"汉堡",icon:"hanbao",piecePrefab:"hanbao",type:0,dead:60,pieceCount:5,size:.3},{id:5,name:"薯条",icon:"shutiao",piecePrefab:"shutiao",type:0,dead:60,pieceCount:5,size:.35},{id:6,name:"面包片",icon:"mianbaopian",piecePrefab:"mianbaopian",type:0,dead:60,pieceCount:5,size:.5},{id:7,name:"甜甜圈",icon:"tiantianquan",piecePrefab:"tiantianquan",type:0,dead:60,pieceCount:5,size:.6},{id:8,name:"木板",icon:"muban",piecePrefab:"mutou",type:1,dead:60,pieceCount:5,size:.6},{id:9,name:"木刀",icon:"mudao",piecePrefab:"mutou",type:1,dead:60,pieceCount:5,size:.6},{id:10,name:"奶酪",icon:"nailao2",piecePrefab:"nailao2",type:0,dead:60,pieceCount:5,size:.5},{id:11,name:"香蕉",icon:"xiangjiao",piecePrefab:"xiangjiao",type:0,dead:60,pieceCount:5,size:.5},{id:12,name:"死掉的蜘蛛1",icon:"zhizhu",piecePrefab:"zhizhu",type:0,dead:60,pieceCount:2,size:.6},{id:13,name:"死掉的蜘蛛2",icon:"zhizhu",piecePrefab:"",type:0,dead:60,pieceCount:3,size:.6},{id:14,name:"死掉的蜘蛛3",icon:"zhizhu",piecePrefab:"",type:0,dead:60,pieceCount:3,size:.6},{id:15,name:"临时金币",piecePrefab:"",type:0,dead:60,pieceCount:1,size:.6},{id:16,name:"临时木头",piecePrefab:"",type:1,dead:60,pieceCount:1,size:.6},{id:17,name:"西红柿",icon:"xihongshi",piecePrefab:"xihongshi",type:0,dead:60,pieceCount:5,size:.5}]),e("BUILDING_INFO",[{id:0,desc:"工蚁招募",maxCount:30,unlockType:0,unlockPrice:0,buyType:0,price:[10,15,25,35,50,65,80,100,120,145,170,200],label3DPos:[-.05,.02,-.3],nextSceneState:2},{id:1,desc:"兵蚁招募",maxCount:5,unlockType:0,unlockPrice:0,buyType:0,price:[50,80,120,180,240,300],label3DPos:[-.05,.02,-.3],nextSceneState:2},{id:2,desc:"木蚁招募",maxCount:10,unlockType:0,unlockPrice:0,buyType:0,price:[60,80,110,150,200],label3DPos:[-.05,.02,-.3],nextSceneState:2},{id:3,desc:"瞭望塔功能",maxCount:0,unlockType:1,unlockPrice:150,buyType:0,price:[],label3DPos:[-.02,.02,-.1],nextSceneState:1},{id:4,desc:"飞行功能",maxCount:0,unlockType:0,unlockPrice:0,buyType:-1,price:[],label3DPos:[-.03,.02,-.3],nextSceneState:2},{id:5,desc:"升级主角",maxCount:5,unlockType:0,unlockPrice:0,buyType:0,price:[30,50,70,90,110],label3DPos:[-.05,.02,-.3],nextSceneState:2},{id:6,desc:"种植区",maxCount:0,unlockType:1,unlockPrice:[200,300],buyType:-1,price:[],label3DPos:[-.02,.02,-.15],nextSceneState:1},{id:7,desc:"巢穴口",maxCount:0,unlockType:0,unlockPrice:[5,200,500,800],buyType:-1,price:[],label3DPos:[-.04,.03,0],nextSceneState:1},{id:8,desc:"蜘蛛洞穴",maxCount:0,unlockType:0,unlockPrice:0,buyType:0,price:[],label3DPos:[0,0,0],nextSceneState:2},{id:9,desc:"下一世界大门",maxCount:0,unlockType:0,unlockPrice:2e3,buyType:-1,price:[],label3DPos:[-.05,.02,-.27],nextSceneState:0}]),e("SCENE_INFO",[{id:1,golds:500,ants:0,areaInfo:[{id:1,unlockType:0,unlockPrice:0},{id:2,unlockType:1,unlockPrice:5},{id:3,unlockType:1,unlockPrice:250},{id:4,unlockType:1,unlockPrice:300}]},{id:2,golds:1500,ants:1},{id:3,golds:2500,ants:0}]),e("PLAYER_POS_INSCENE",[[-.8,0,-1.8],[0,0,-3.7]]),e("TASK_SHOW_TIME",300),e("TASK_HIDE_TIME",180),e("TASK_RAND_COUNT",[3,4]),e("TASK_FOOD_COUNT",[6,18]),e("TASK_REWARD_SCALE",1),e("TASK_FOOD_MIN_PIECE_COUNT",10),e("OFFLINE_MIN_TIME",10),e("OFFLINE_GOLD_TIME",1),e("OFFLINE_MAX_GOLD",100),e("TOWER_FIND_TIME",60),e("MONEY_MAX_SHOW_COUNT",150),e("FLY_TIME",120),e("RED_ANT_TIME",60),e("RQ_TIME",150),e("CAIJI_CD",[.5,.3]),e("MAIN_TASK_INFO",[{id:0,scene:1,desc:"Recruit 2\nWorker-Ants",icon:"task0",type:2,targetID:0,count:2,rewardID:0,rewardCount:10,openID:-1,money:[0,0,0,0,0,0],autoTip:1},{id:1,scene:1,desc:"Gather 15 breadcrumbs",icon:"task2",type:1,targetID:6,count:15,rewardID:0,rewardCount:5,openID:8,money:[0,0,0,0,0,0],autoTip:1},{id:2,scene:1,desc:"Kill a Spider",icon:"task3",type:0,targetID:3,count:1,rewardID:0,rewardCount:10,openID:-1,money:[30,40,0,0,1,0],autoTip:0},{id:3,scene:1,desc:"Recruit 2 Worker-Ants",icon:"task0",type:2,targetID:0,count:2,rewardID:0,rewardCount:10,openID:9,money:[30,40,0,0,1,0],autoTip:1},{id:4,scene:1,desc:"Kill a red Worker-Ant",icon:"task4",type:0,targetID:0,count:1,rewardID:0,rewardCount:5,openID:11,money:[30,40,0,0,1,0],autoTip:0},{id:5,scene:1,desc:"Recruit a Soldier-Ant",icon:"task5",type:2,targetID:1,count:1,rewardID:0,rewardCount:10,openID:-1,money:[40,50,0,0,1,0],autoTip:1},{id:6,scene:1,desc:"Collect 30 energy",icon:"task13",type:8,targetID:0,count:30,rewardID:0,rewardCount:5,openID:13,money:[40,50,0,0,1,0],autoTip:1},{id:7,scene:1,desc:"Unlock new areas",icon:"task7",type:4,targetID:2,count:1,rewardID:0,rewardCount:10,openID:-1,money:[40,50,0,0,1,0],autoTip:0},{id:8,scene:1,desc:"Build new ant nests",icon:"task8",type:5,targetID:7,targetSid:1,count:1,rewardID:0,rewardCount:10,openID:16,money:[40,50,0,0,1,0],autoTip:1},{id:9,scene:1,desc:"Recruit a\nCarpenter-Ant",icon:"task15",type:2,targetID:2,count:1,rewardID:0,rewardCount:10,openID:-1,money:[50,60,30,40,7,3],autoTip:1},{id:10,scene:1,desc:"Gather 20 Wood Fragments",icon:"task9",type:1,targetID:[8,9],count:20,rewardID:0,rewardCount:10,openID:17,money:[50,60,30,40,7,3],autoTip:1},{id:11,scene:1,desc:"Build a Watchtower",icon:"task10",type:5,targetID:3,targetSid:3,count:1,rewardID:0,rewardCount:10,openID:18,money:[50,60,30,40,2,8],autoTip:0},{id:12,scene:1,desc:"Unlock new areas",icon:"task7",type:4,targetID:3,count:1,rewardID:0,rewardCount:10,openID:-1,money:[60,80,40,60,0,1],autoTip:0},{id:13,scene:1,desc:"Build new ant nests",icon:"task8",type:5,targetID:7,targetSid:2,count:1,rewardID:0,rewardCount:10,openID:-1,money:[60,80,40,60,1,0],autoTip:1},{id:14,scene:1,desc:"Gather 20 Chicken Drumsticks",icon:"task11",type:1,targetID:3,count:20,rewardID:0,rewardCount:10,openID:20,money:[60,80,40,60,1,1],autoTip:1},{id:15,scene:1,desc:"Build Plantation Farm",icon:"task12",type:5,targetID:6,targetSid:0,count:1,rewardID:0,rewardCount:10,openID:-1,money:[60,80,40,60,2,8],autoTip:1},{id:16,scene:1,desc:"Plant and harvest 50 energy",icon:"task13",type:6,targetID:0,count:50,rewardID:0,rewardCount:10,openID:-1,money:[60,80,40,60,1,0],autoTip:1},{id:17,scene:1,desc:"Unlock Courtyard",icon:"task14",type:5,targetID:9,targetSid:1,count:1,rewardID:0,rewardCount:10,openID:-1,money:[60,80,40,60,1,0],autoTip:0}]),e("HELP_ANT_INTERVAL",10),e("MONEY_TEMP_SCALE",2),e("TIP_WORDS",["Recruiting more Worker-Ants to help you collect resources quickly","Recruit Soldier-Ant to prevent other insects attack","Upgrading the protagonist ant can increase effectiveness of transports and combat","We need wood to build some buildings","Flying mode can greatly increase movement speed and acquisition speed","Advanced Worker-Ant is twice than Worker-Ant in carry capacity","You can get lots of energy rewards by completing the orders of the queen of ants"]),e("BUGSAVE_SHOW_INTERVAL",30),e("BUGSAVE_HIDE_INTERVAL",180),e("MONEY_STEP",[30,50,90]),e("MONEY_CUBE_INTERVAL",180);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIExReward.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(n){"use strict";var t,e,i,a,o,s,c,r,u,d,h,l,v,g,p,f,m,A;return{setters:[function(n){t=n.cclegacy,e=n._decorator,i=n.Node,a=n.Label,o=n.Sprite,s=n.UITransform,c=n.director,r=n.Component},function(n){u=n.applyDecoratedDescriptor,d=n.inheritsLoose,h=n.initializerDefineProperty,l=n.assertThisInitialized,v=n.defineProperty},function(n){g=n.CUR_PLATFORM,p=n.PLATFORM_TYPE},function(n){f=n.default},function(n){m=n.Tools},function(n){A=n.GameManager}],execute:function(){var I,b,w,C,N,y,T,B,S,L,x,P,R,E,O,D,k;t._RF.push({},"740692SAGBHgrrCgvlg2gFw","UIExReward",void 0);var U=e.ccclass,_=e.property;n("UIExReward",(I=U("UIExReward"),b=_(i),w=_(i),C=_(i),N=_(a),y=_(o),T=_(a),B=_(a),I((x=u((L=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=n.call.apply(n,[this].concat(i))||this,h(l(t),"action",x,l(t)),h(l(t),"BG",P,l(t)),h(l(t),"maskNode",R,l(t)),h(l(t),"countLabel",E,l(t)),h(l(t),"nativeIcon",O,l(t)),h(l(t),"nativeNameLabel",D,l(t)),h(l(t),"nativeDescLabel",k,l(t)),v(l(t),"goldCount",0),v(l(t),"isCanJump",!0),t}d(t,n);var e=t.prototype;return e.onLoad=function(){this.node.getComponent(s).priority=7,this.nativeIcon.node.on("touch-start",this.onTouch,this),this.nativeIcon.node.on("touch-move",this.onTouch,this),this.nativeIcon.node.on("touch-end",this.onTouchEnd,this),this.nativeIcon.node.on("touch-canvel",this.onTouchEnd,this),this.maskNode.on("touch-start",this.onTouch,this),this.maskNode.on("touch-move",this.onTouch,this),this.maskNode.on("touch-end",this.onTouchEnd,this),this.maskNode.on("touch-cancel",this.onTouchEnd,this)},e.onTouch=function(n){if(this.isCanJump){var t=n.getUILocation().x-cc.winSize.width/2,e=n.getUILocation().y-cc.winSize.height/2,i=this.nativeIcon.node.parent.position,a=this.nativeIcon.node.getComponent(s),o=i.x-a.width/2,c=i.x+a.width/2,r=i.y+a.height/2,u=i.y-a.height/2;t>=o&&t<=c&&e>=u&&e<=r&&(this.isCanJump=!1,this.autoJump())}},e.onTouchEnd=function(n){this.isCanJump=!0},e.autoJump=function(){if(f.instance.nativeInterAdDragCan){var n=(new Date).valueOf();if(f.instance.nativeAds[2]&&f.instance.nativeAds[2].ad&&n>=f.instance.nativeInterAdDragTimeStamp){var t=n+1e3*f.instance.nativeInterAdDragInterval;f.instance.nativeInterAdDragTimeStamp=t,this.onBtnNativeAdClick()}}},e.start=function(){if((A.instance.addSecUI(this.node),this.goldCount=m.getRandomInt(3,5),this.countLabel.string="x"+Math.floor(this.goldCount),g==p.OPPO||g==p.VIVO?this.updateNativeAdShow():(this.updateNativeAdShow(),m.showBanner(!0)),g==p.VIVO)&&(f.instance.gongxiInterAdRate>0&&m.getRandomInt(0,100)<=f.instance.gongxiInterAdRate)){var n=Math.floor(1e3*f.instance.gongxiInterAdDelay);setTimeout((function(){m.showOVCustumAd("30b45f1ac08a4d4a999b81cccc03870c")}),n)}},e.updateNativeAdShow=function(){if(f.instance.nativeAds[2]&&f.instance.nativeAds[2].ad&&!f.instance.nativeAds[2].isClose){this.BG.getComponent(s).height=700,this.action.setPosition(0,0,0),this.BG.setPosition(0,62,0),c.getScene().emit("NATIVE_BANNER_SHOW",!1),m.wxBanner&&m.wxBanner.hide();var n=f.instance.nativeAds[2].main;n||(n=f.instance.nativeAds[2].logoUrl),n||(n=f.instance.nativeAds[2].icon);var t=m.getURLSuffix(n);t&&t.length>=7?m.httpImageByUrlType(this.nativeIcon,n):m.setImage(this.nativeIcon,n,t),this.nativeNameLabel.string=f.instance.nativeAds[2].title,this.nativeDescLabel.string=f.instance.nativeAds[2].desc,f.instance.nativeAds[2].ad.reportAdShow({adId:f.instance.nativeAds[2].adId})}else g==p.OPPO&&(c.getScene().emit("NATIVE_BANNER_SHOW",!0),m.wxBanner&&m.wxBanner.hide()),this.nativeIcon.node.parent.active=!1,this.BG.getComponent(s).height=519,this.action.setPosition(0,-106,0),this.BG.setPosition(0,163,0)},e.onBtnGetClick=function(){m.playSound("click"),f.instance.gold+=this.goldCount,this.closeMine()},e.onBtnNativeAdClick=function(){f.instance.nativeAds[2]&&f.instance.nativeAds[2].ad&&f.instance.nativeAds[2].ad.reportAdClick({adId:f.instance.nativeAds[2].adId+""})},e.onBtnNativeCloseClick=function(){if(f.instance.nativeAds[2]&&f.instance.nativeAds[2].ad){var n=(new Date).valueOf();f.instance.nativeAds[2].openTime=n+3e4,f.instance.nativeAds[2].isClose=!0,this.updateNativeAdShow()}},e.closeMine=function(){g==p.OPPO?m.showBanner(!0):m.showBanner(!1),A.instance.subSecUI(this.node),this.node.removeFromParent(),this.node.destroy(),c.getScene().emit("NATIVE_BANNER_SHOW",!0)},t}(r)).prototype,"action",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=u(L.prototype,"BG",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=u(L.prototype,"maskNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=u(L.prototype,"countLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=u(L.prototype,"nativeIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=u(L.prototype,"nativeNameLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=u(L.prototype,"nativeDescLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=L))||S));t._RF.pop()}}}));

System.register("chunks:///_virtual/MoneyCube.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./UIMoneyCube.ts","./GameManager.ts"],(function(e){"use strict";var n,t,o,r,i,s,u,c,a,h;return{setters:[function(e){n=e.cclegacy,t=e._decorator,o=e.Vec3,r=e.Component},function(e){i=e.inheritsLoose,s=e.defineProperty,u=e.assertThisInitialized,c=e.asyncToGenerator},function(e){a=e.UIMoneyCube},function(e){h=e.GameManager}],execute:function(){var y;n._RF.push({},"747bfLR1wxIWbNKmx3JNwK7","MoneyCube",void 0);var f=t.ccclass;t.property,e("MoneyCube",f("MoneyCube")(y=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,s(u(n),"info",null),s(u(n),"_isShowUI",!1),n}i(n,e);var t=n.prototype;return t.init=function(e){this.info=e},t.update=function(e){h.instance&&h.instance.curPlayer&&(o.distance(this.node.worldPosition,h.instance.curPlayer.node.worldPosition)<.3&&!this._isShowUI&&(this._isShowUI=!0,this.showUIMoneyCube()))},t.showUIMoneyCube=function(){var e=c(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.instance.showUI("UIMoneyCube");case 2:n=e.sent,n.getComponent(a).init({type:this.info.type,count:this.info.count}),h.instance.moneyCube=null,this.node.removeFromParent(),this.node.destroy();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n}(r))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIJuHua.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,i,r,n,o,u,a,c,l,s,p,h,f;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.Node,n=e.Label,o=e.Vec3,u=e.UITransform,a=e.director,c=e.Component},function(e){l=e.applyDecoratedDescriptor,s=e.inheritsLoose,p=e.initializerDefineProperty,h=e.assertThisInitialized,f=e.defineProperty}],execute:function(){var d,b,y,g,m,v,L,z,w;t._RF.push({},"83b40bWzqlMypf9RGLLD4gk","UIJuHua",void 0);var H=i.ccclass,J=i.property;e("UIJuHua",(d=H("UIJuHua"),b=J(r),y=J(r),g=J(n),d((L=l((v=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,p(h(t),"maskNode",L,h(t)),p(h(t),"circle",z,h(t)),p(h(t),"descLabel",w,h(t)),f(h(t),"out",new o),t}s(t,e);var i=t.prototype;return i.onLoad=function(){this.maskNode.active=!1,this.node.getComponent(u).priority=100,a.getScene().on("JUHUA_REFRESH",this.showJuhua,this)},i.update=function(e){this.out.z=this.circle.eulerAngles.z-60*e,this.circle.setRotationFromEuler(this.out)},i.showJuhua=function(e,t){e&&t&&(this.descLabel.string=t),this.maskNode.active=e},t}(c)).prototype,"maskNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=l(v.prototype,"circle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=l(v.prototype,"descLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));t._RF.pop()}}}));

System.register("chunks:///_virtual/UIMoneyCubeMark.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(t){"use strict";var e,i,n,r,o,a,c,s,u,l,p,f;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Node,r=t.UITransform,o=t.Component},function(t){a=t.applyDecoratedDescriptor,c=t.inheritsLoose,s=t.initializerDefineProperty,u=t.assertThisInitialized,l=t.defineProperty},function(t){p=t.Tools},function(t){f=t.GameManager}],execute:function(){var h,y,g,v,d,b,m,M,P;e._RF.push({},"890f7LxC/FDzJjlkWPRVsRG","UIMoneyCubeMark",void 0);var C=i.ccclass,I=i.property;t("UIMoneyCubeMark",(h=C("UIMoneyCubeMark"),y=I(n),g=I(n),v=I(n),h((m=a((b=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,s(u(e),"action",m,u(e)),s(u(e),"rotate",M,u(e)),s(u(e),"icon",P,u(e)),l(u(e),"target",void 0),e}c(e,t);var i=e.prototype;return i.onLoad=function(){this.node.getComponent(r).priority=4},i.init=function(t,e){this.target=t,this.action.active=!1,this.icon[e].active=!0},i.update=function(t){if(!(t>2))if(this.target&&this.target.parent){var e=f.instance.getScreenPos(this.target);if(p.isScreenIn(e))this.action.active&&(this.action.active=!1);else{this.action.active||(this.action.active=!0);var i=p.getScreenBoardPos(e,30);i.y+=80,this.rotate.setScale(i.x>0?1:-1,i.y>0?-1:1,1),this.action.setPosition(i)}}else this.node.removeFromParent(),this.node.destroy()},e}(o)).prototype,"action",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=a(b.prototype,"rotate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=a(b.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=b))||d));e._RF.pop()}}}));

System.register("chunks:///_virtual/UIOffline.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(n){"use strict";var e,t,i,o,r,a,l,c,s,u,f,d,h,p,b,g,w;return{setters:[function(n){e=n.cclegacy,t=n._decorator,i=n.Node,o=n.Label,r=n.UITransform,a=n.tween,l=n.Vec3,c=n.Component},function(n){s=n.applyDecoratedDescriptor,u=n.inheritsLoose,f=n.initializerDefineProperty,d=n.assertThisInitialized},function(n){h=n.CUR_PLATFORM,p=n.PLATFORM_TYPE},function(n){b=n.default},function(n){g=n.Tools},function(n){w=n.GameManager}],execute:function(){var y,m,S,I,L,M,O,v,C;e._RF.push({},"8c54bzsuAtFhrAVWqXiNbto","UIOffline",void 0);var R=t.ccclass,U=t.property;n("UIOffline",(y=R("UIOffline"),m=U(i),S=U(o),I=U(o),y((O=s((M=function(n){function e(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i))||this,f(d(e),"action",O,d(e)),f(d(e),"rewardLabel",v,d(e)),f(d(e),"doubleLabel",C,d(e)),e}u(e,n);var t=e.prototype;return t.onLoad=function(){this.node.getComponent(r).priority=11,this.rewardLabel.string=Math.floor(b.instance.offlineGold).toString(),this.doubleLabel.string=Math.floor(2*b.instance.offlineGold).toString(),this.action.setScale(0,0,0),b.instance.reportCustom("OfflineUIShow"),w.instance.addSecUI(this.node)},t.start=function(){a(this.action).to(.5,{scale:new l(1,1,1)},{easing:"quintOut"}).start(),g.showBanner(!0)},t.onBtnGetClick=function(){g.playSound("click"),this.sendReward(!1),g.showInterstitial()},t.onBtnVideoClick=function(){g.playSound("click");var n=function(){this.sendReward(!0)}.bind(this);b.instance.watchVideo("OfflineReward",n)},t.onBtnCloseClick=function(){g.playSound("click"),this.closeMine()},t.sendReward=function(n){var e=n?2:1,t=Math.floor(b.instance.offlineGold*e);b.instance.gold+=t,localStorage.setItem("gold",b.instance.gold.toString()),g.ShowTip("Claimed"),b.instance.offlineGold=0,this.closeMine()},t.closeMine=function(){w.instance.subSecUI(this.node),this.node.removeFromParent(),this.node.destroy(),h!=p.OPPO&&h!=p.VIVO&&g.showBanner(!1)},e}(c)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=s(M.prototype,"rewardLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=s(M.prototype,"doubleLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=M))||L));e._RF.pop()}}}));

System.register("chunks:///_virtual/Building.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts","./Label3D.ts","./UILockTip.ts"],(function(i){"use strict";var e,s,t,o,n,r,h,a,d,l,c,f,u,g,p,y,P,m,v,N,b,w,S,T,C;return{setters:[function(i){e=i.cclegacy,s=i._decorator,t=i.MeshRenderer,o=i.Node,n=i.SkeletalAnimation,r=i.director,h=i.Vec3,a=i.Component},function(i){d=i.applyDecoratedDescriptor,l=i.inheritsLoose,c=i.initializerDefineProperty,f=i.assertThisInitialized,u=i.defineProperty,g=i.asyncToGenerator},function(i){p=i.HELP_ANT_INTERVAL,y=i.BUILDING_INFO,P=i.SKIN_PACKAGE,m=i.FLY_TIME,v=i.TOWER_FIND_TIME,N=i.ANT_INFO},function(i){b=i.default},function(i){w=i.Tools},function(i){S=i.GameManager},function(i){T=i.Label3D},function(i){C=i.UILockTip}],execute:function(){var z,F,L,M;e._RF.push({},"8f1871qB5BLN4SPXdLouIdi","Building",void 0);var x=s.ccclass,A=s.property;i("Building",x("Building")((L=d((F=function(i){function e(){for(var e,s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];return e=i.call.apply(i,[this].concat(t))||this,c(f(e),"id",L,f(e)),c(f(e),"sid",M,f(e)),u(f(e),"lockNode",void 0),u(f(e),"unlockNode",void 0),u(f(e),"buySuccessNode",void 0),u(f(e),"label3D",void 0),u(f(e),"isCanUse",!1),u(f(e),"isNeedRefreshLabel",!1),u(f(e),"info",null),u(f(e),"zhongzhiFoodCount",0),u(f(e),"isZhongzhiFooding",!1),u(f(e),"holeOffsets",[]),u(f(e),"zhongzhiEffectNode",void 0),u(f(e),"towerPlayer",void 0),u(f(e),"towerPlayerAnim",void 0),u(f(e),"towerTimer",0),u(f(e),"uiLockTip",void 0),u(f(e),"buildingProgressNode",void 0),u(f(e),"buildingProgress",void 0),u(f(e),"flyFree",void 0),u(f(e),"flyVideo",void 0),u(f(e),"flyVideo2",void 0),u(f(e),"maxNode",void 0),u(f(e),"helpmePoint",void 0),u(f(e),"helpmeAnt",void 0),u(f(e),"step",1),u(f(e),"_helpAntTimer",0),e}l(e,i);var s=e.prototype;return s.onLoad=function(){var i=this;this.lockNode=this.node.getChildByName("Lock"),this.unlockNode=this.node.getChildByName("Unlock"),this.buySuccessNode=this.node.getChildByName("BuySuccess"),this.helpmePoint=this.node.getChildByName("Helpme");var e=this.buySuccessNode.getChildByName("Ground");e&&(this.buildingProgressNode=e.getChildByName("Progress"),this.maxNode=e.getChildByName("MAX"),this.buildingProgress=this.buildingProgressNode.getComponent(t).material,this.buildingProgressNode.active=!1,this.maxNode&&(this.maxNode.active=!1));var s=this.unlockNode.getChildByName("Ground");s&&(this.buildingProgressNode=s.getChildByName("Progress"),this.maxNode=s.getChildByName("MAX"),this.buildingProgress=this.buildingProgressNode.getComponent(t).material,this.buildingProgressNode.active=!1,this.maxNode&&(this.maxNode.active=!1));var h=new o;if(this.node.addChild(h),h.setPosition(0,.02,-.34),this.label3D=h.addComponent(T),this.info=b.instance.getBuildingInfoBySID(this.id,this.sid),!this.info){var a={id:this.id,sid:this.sid,progress:0,state:0,useTimes:0};1==b.instance.curSceneId?7==this.id&&0==a.state&&(a.state=1):(7==this.id&&0==this.sid&&0==a.state&&(a.state=2),0==this.id&&0==a.state&&(a.state=2),1==this.id&&0==a.state&&(a.state=2),4==this.id&&0==a.state&&(a.state=2),5==this.id&&0==a.state&&(a.state=2),8==this.id&&0==a.state&&(a.state=2)),this.info=a,b.instance.buildingInfo.push(a),localStorage.setItem("buildingInfo",JSON.stringify(b.instance.buildingInfo))}S.instance.buildings.push(this),this.schedule(this.updateMoney,.05),3==this.id?(this.towerPlayer=this.buySuccessNode.getChildByName("Player"),this.towerPlayerAnim=this.towerPlayer.getChildByName("body").getComponent(n),this.scheduleOnce((function(){i.towerPlayerAnim.play("Idle")}),.1),2==this.info.state&&this.schedule(this.updateTowerFindFood,1)):4==this.id?(this.info.progress=0,this.flyFree=this.buySuccessNode.getChildByName("Ground").getChildByName("free"),this.flyVideo=this.buySuccessNode.getChildByName("Ground").getChildByName("video"),this.flyVideo2=this.buySuccessNode.getChildByName("Ground").getChildByName("video2"),this.flyFree.active=!1,this.flyFree.active=!1,this.schedule(this.updateFlyTime,1)):6==this.id?this.zhongzhiEffectNode=this.buySuccessNode.getChildByName("WorkingEffect"):7==this.id?(this.holeOffsets=w.getCirclePoints(.3,this.node.worldPosition.x,this.node.worldPosition.z,30),this.schedule(this.updatePlayerFood,.3),this.isNeedRefreshLabel=!0):8==this.id?this.info.state=b.instance.isOpenZhizhu?2:0:9==this.id&&(this.label3D.node.setScale(1.3,1.3,1.3),this.label3D.labelSpace*=1.3,this.createLockTipUI()),this.refreshShow(),this.refreshProgress(),this.helpmePoint&&(2==this.info.state&&(this._helpAntTimer=p),r.getScene().on("BUILDING_ANT_CLEAR",this.onClearHelpAnt,this),this.schedule(this.updateCreateHelpmeAnt,1))},s.createLockTipUI=function(){var i=g(regeneratorRuntime.mark((function i(){var e;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.uiLockTip){i.next=6;break}return i.next=3,S.instance.showUI("UILockTip");case 3:e=i.sent,this.uiLockTip=e.getComponent(C),this.uiLockTip.init(this);case 6:case"end":return i.stop()}}),i,this)})));return function(){return i.apply(this,arguments)}}(),s.refreshShow=function(){this.isNeedRefreshLabel=!0,this.lockNode.active=0==this.info.state,this.unlockNode.active=1==this.info.state,this.buySuccessNode.active=2==this.info.state},s.refreshProgress=function(){if(this.buildingProgress)if(0==this.info.state){this.buildingProgressNode.active=!1,this.buildingProgress.setProperty("progress",0),this.maxNode&&(this.maxNode.active=!1)}else if(1==this.info.state){var i=y[this.id].unlockPrice;"object"==typeof i&&(i=i[this.sid]);var e=w.clampf(this.info.progress/i,0,1);0==e&&(this.buildingProgressNode.active=!1),this.buildingProgress.setProperty("progress",e)}else if(2==this.info.state){var s=y[this.id].price.length,t=this.info.useTimes>=s?s-1:this.info.useTimes,o=y[this.id].price[t],n=w.clampf(this.info.progress/o,0,1);0==n&&(this.buildingProgressNode.active=!1),this.buildingProgress.setProperty("progress",n),this.maxNode&&(this.maxNode.active=this.info.useTimes>=y[this.id].maxCount)}},s.updateMoney=function(){if(S.instance&&S.instance.curPlayer)if(0==this.info.state);else if(1==this.info.state){var i=y[this.id].unlockPrice,e=y[this.id].unlockType;if("object"==typeof i&&(i=i[this.sid]),i>0)if(this.info.progress<i)if(h.distance(this.node.worldPosition,S.instance.curPlayer.node.worldPosition)<.3&&!S.instance.curPlayer.isMoving)if(0==e){if(b.instance.gold>=1){var s=Math.floor(this.step),t=i-this.info.progress;t>this.step?this.step*=1.2:s=t,b.instance.gold<s&&(s=b.instance.gold),b.instance.gold-=s,w.playSound("gold"),this.unlockProgress(s,i,e);var o=new h(S.instance.curPlayer.node.worldPosition.x,.2,S.instance.curPlayer.node.worldPosition.z),n=new h(this.node.worldPosition.x,0,this.node.worldPosition.z);return void S.instance.flyMoney("shandian",o,n)}var a=i-this.info.progress;S.instance.showMoney(0,a)}else if(1==e){if(b.instance.wood>=1){var d=Math.floor(this.step),l=i-this.info.progress;l>this.step?this.step*=1.2:d=l,b.instance.wood<d&&(d=b.instance.wood),b.instance.wood-=d,w.playSound("gold"),this.unlockProgress(d,i,e);var c=new h(S.instance.curPlayer.node.worldPosition.x,.2,S.instance.curPlayer.node.worldPosition.z),f=new h(this.node.worldPosition.x,0,this.node.worldPosition.z);return void S.instance.flyMoney("mutou",c,f)}var u=i-this.info.progress;S.instance.showMoney(1,u)}if(this.isNeedRefreshLabel&&i>0){this.isNeedRefreshLabel=!1;var g=Math.floor(this.info.progress),p=Math.floor(i);this.refreshLabel(g+"/"+p)}}else if(2==this.info.state){var m=h.distance(this.node.worldPosition,S.instance.curPlayer.node.worldPosition);if(6==this.id){if(m<.6&&!this.isZhongzhiFooding&&S.instance&&S.instance.curPlayer.curFoodCount>0)return this.isZhongzhiFooding=!0,this.isNeedRefreshLabel=!0,S.instance.curPlayer.curFoodCount>1?this.zhongzhiFoodCount=2:this.zhongzhiFoodCount=1,S.instance.curPlayer.clearFood(!1,this.node.worldPosition,this.zhongzhiFoodCount),this.zhongzhiEffectNode.active=!0,w.playerOnceParticleNode(this.zhongzhiEffectNode),void this.scheduleOnce(this.zhongzhiSuccess,5);if(this.isNeedRefreshLabel){this.isNeedRefreshLabel=!1;var v=Math.floor(this.zhongzhiFoodCount),N=Math.floor(2);this.refreshLabel(v+"/"+N)}return}if(9==this.id&&m<.6){if(this.isCanUse)return this.isCanUse=!1,this.step=1,void(1==b.instance.curSceneId&&0==P.length?S.instance.showUI("UINextWorld"):w.ShowTip("Stay Tuned"))}else if(m<.3&&!S.instance.curPlayer.isMoving){if(0!=y[this.id].maxCount){if(this.info.useTimes<y[this.id].maxCount){var T=y[this.id].price.length,C=this.info.useTimes>=T?T-1:this.info.useTimes,z=y[this.id].price[C],F=y[this.id].buyType;if(this.isCanUse)if(T>0){if(0==F){if(b.instance.gold>=1){var L=Math.floor(this.step),M=z-this.info.progress;M>this.step?this.step*=1.2:L=M,b.instance.gold<L&&(L=b.instance.gold),b.instance.gold-=L,w.playSound("gold"),this.buyProgress(L,z);var x=new h(S.instance.curPlayer.node.worldPosition.x,.2,S.instance.curPlayer.node.worldPosition.z),A=new h(this.node.worldPosition.x,0,this.node.worldPosition.z);return void S.instance.flyMoney("shandian",x,A)}var I=z-this.info.progress;S.instance.showMoney(0,I)}else if(1==F){if(b.instance.wood>=1){var k=Math.floor(this.step),_=z-this.info.progress;_>this.step?this.step*=1.2:k=_,b.instance.wood<k&&(k=b.instance.wood),b.instance.wood-=k,w.playSound("gold"),this.buyProgress(k,z);var B=new h(S.instance.curPlayer.node.worldPosition.x,.2,S.instance.curPlayer.node.worldPosition.z),R=new h(this.node.worldPosition.x,0,this.node.worldPosition.z);return void S.instance.flyMoney("mutou",B,R)}var E=z-this.info.progress;S.instance.showMoney(1,E)}}else r.getScene().emit("ON_SCENE_USE",this);else if(this.isNeedRefreshLabel){this.isNeedRefreshLabel=!1;var U=Math.floor(this.info.progress),O=Math.floor(z);this.refreshLabel(U+"/"+O)}}}else if(4==this.id&&this.isCanUse&&!S.instance.curPlayer.isFly)return void this.buyProgress(.8,10)}else m>.33&&(this.isCanUse=!0,9==this.id&&r.getScene().emit("CLOSE_NEXT_UI"),4==this.id&&this.buildingProgressNode&&this.buildingProgressNode.active&&(this.info.progress=0,this.buildingProgress&&this.buildingProgress.setProperty("progress",0),this.buildingProgressNode&&(this.buildingProgressNode.active=!1)));if(this.isNeedRefreshLabel){this.isNeedRefreshLabel=!1;var D=y[this.id].price.length,G=this.info.useTimes>=D?D-1:this.info.useTimes,V=y[this.id].price[G];if(D>0){var H=Math.floor(this.info.progress),Z=Math.floor(V);this.refreshLabel(H+"/"+Z)}}}},s.updateFlyTime=function(){if(S.instance.curPlayer)if(S.instance.curPlayer.isFly){if(b.instance.flyTimes<3){var i=w.clampf(m-S.instance.curPlayer.flyTimer,0,m),e=w.timestampToTime2(i);this.refreshLabel(e)}else this.refreshLabel("");this.flyFree.active&&(this.flyFree.active=!1),1==b.instance.wxVideoSpr?this.flyVideo2.active&&(this.flyVideo2.active=!1):this.flyVideo.active&&(this.flyVideo.active=!1)}else this.flyFree.active||0!=this.info.useTimes||(this.flyFree.active=!0),1==b.instance.wxVideoSpr?!this.flyVideo2.active&&this.info.useTimes>0&&(this.flyVideo2.active=!0):!this.flyVideo.active&&this.info.useTimes>0&&(this.flyVideo.active=!0),this.refreshLabel("")},s.unlockProgress=function(i,e,s){if(this.info.progress=w.clampf(this.info.progress+i,0,e),this.info.progress>=e){if(this.isCanUse=!1,this.step=1,this.info.progress=0,this.buildingProgress&&this.buildingProgress.setProperty("progress",0),this.buildingProgressNode&&(this.buildingProgressNode.active=!1),this.info.state=2,this.refreshShow(),r.getScene().emit("MAIN_TASK_PROGRESS",5,this.id),7==this.id&&0==this.sid&&2==b.instance.gameStep?b.instance.nextGameStep(3):7==this.id&&1==this.sid&&15==b.instance.gameStep||3==this.id&&16==b.instance.gameStep||7==this.id&&2==this.sid&&18==b.instance.gameStep||6==this.id&&0==this.sid&&20==b.instance.gameStep&&b.instance.nextGameStep(21),3==this.id&&(this.towerPlayerAnim.play("Idle"),this.towerTimer=v-2,this.schedule(this.updateTowerFindFood,1)),7==this.id){var t=Math.floor(this.sid+1);b.instance.reportCustom("AntNest"+t)}else if(6==this.id){var o=Math.floor(this.sid+1);b.instance.reportCustom("PlantingFarm"+o),w.reportEvent("PlantingFarm"+o)}S.instance.tryUnlockNextWorld()}else if(this.buildingProgress){this.buildingProgressNode.active||(this.buildingProgressNode.active=!0);var n=w.clampf(this.info.progress/e,0,1);this.buildingProgress.setProperty("progress",n)}var h=Math.floor(this.info.progress),a=Math.floor(e);this.refreshLabel(h+"/"+a)},s.buyProgress=function(i,e){if(this.info.progress=w.clampf(this.info.progress+i,0,e),this.info.progress>=e)this.isCanUse=!1,this.step=1,this.info.progress=0,w.showInterstitial(),this.buildingProgress&&this.buildingProgress.setProperty("progress",0),this.buildingProgressNode&&(this.buildingProgressNode.active=!1),r.getScene().emit("ON_SCENE_USE",this),this.isNeedRefreshLabel=!0,5==this.id&&S.instance.showEffect("eff_PlayerUp",this.node.worldPosition.clone(),2),this.info.useTimes+=1;else if(this.buildingProgress){this.buildingProgressNode.active||(this.buildingProgressNode.active=!0);var s=w.clampf(this.info.progress/e,0,1);this.buildingProgress.setProperty("progress",s)}var t=Math.floor(this.info.progress),o=Math.floor(e);this.refreshLabel(t+"/"+o)},s.zhongzhiSuccess=function(){for(var i=0;i<3*this.zhongzhiFoodCount;i++){var e=w.getRandom(-.3,.3),s=w.getRandom(-.3,.3),t=new h(this.node.worldPosition.x,0,this.node.worldPosition.z),o=new h(t.x+e,0,t.z+s);S.instance.createMoney(t,o,"shandian"),r.getScene().emit("MAIN_TASK_PROGRESS",6,0)}22==b.instance.gameStep&&b.instance.nextGameStep(23),this.zhongzhiFoodCount=0,this.isZhongzhiFooding=!1,this.isNeedRefreshLabel=!0,this.zhongzhiEffectNode.active=!1},s.refreshLabel=function(i){1==this.info.state?0==y[this.id].unlockType?9!=this.id&&(i+="L"):1==y[this.id].unlockType&&(i+="M"):2==this.info.state?0==y[this.id].buyType?i+="L":1==y[this.id].buyType?i+="M":y[this.id].buyType<0&&6!=this.id&&4!=this.id&&(i=""):i="",4==this.id&&S.instance.curPlayer&&!S.instance.curPlayer.isFly&&(i=""),4!=this.id&&0!=y[this.id].maxCount&&this.info.useTimes>=y[this.id].maxCount&&(i="",this.maxNode&&(this.maxNode.active=!0));var e=y[this.id].label3DPos;this.label3D.node.setPosition(new h(e[0],e[1],e[2])),this.label3D.refresh(i)},s.updatePlayerFood=function(){2==this.info.state&&(S.instance.curPlayer&&S.instance.curPlayer.curFoodCount>0&&h.distance(S.instance.curPlayer.node.worldPosition,this.node.worldPosition)<.5&&this.eatFood(S.instance.curPlayer))},s.updateCreateHelpmeAnt=function(){if(!this.helpmeAnt&&S.instance&&S.instance.isGameStart&&2==this.info.state&&b.instance.isOpenHighAnt&&(this._helpAntTimer+=1,this._helpAntTimer>=p)){this._helpAntTimer=0;var i=this.id+7,e=N[i].prefab;this.helpmeAnt=S.instance.createAnt(i,0,-1,!0,1,this.helpmePoint.worldPosition,e,!0)}},s.onClearHelpAnt=function(i){i==this.helpmeAnt&&(this._helpAntTimer=0,this.helpmeAnt=null)},s.eatFood=function(i){var e=i.curFoodCount;i.clearFood(!0,this.node.worldPosition),7==this.id&&4==b.instance.gameStep&&b.instance.nextGameStep(5);for(var s=0;s<e;s++){var t=w.getRandomInt(0,this.holeOffsets.length-1),o=new h(this.node.worldPosition.x,-.4,this.node.worldPosition.z),n=new h(this.holeOffsets[t].x,0,this.holeOffsets[t].z);S.instance.createMoney(o,n,"shandian",!0)}},s.updateTowerFindFood=function(){var i=this;if(this.towerTimer+=1,this.towerTimer>=v){this.towerTimer=0;for(var e=0;e<S.instance.foods.length;e++){var s=S.instance.foods[e];if(s&&!s.isMoneyFood&&0==s.info.canEat&&!s.isDead){s.info.canEat=1,w.playSound("whistle");var t=new h(s.node.worldPosition.x,0,s.node.worldPosition.z);S.instance.ChuiShaoEffect(this.node.worldPosition.clone(),t);var o=new h(s.node.worldPosition.x,0,s.node.worldPosition.z);return this.towerPlayer.lookAt(o),this.towerPlayerAnim.play("Show"),void this.scheduleOnce((function(){i.towerPlayer.setRotationFromEuler(0,0,0),i.towerPlayerAnim.play("Idle")}),2)}}}},e}(a)).prototype,"id",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=d(F.prototype,"sid",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=F))||z);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIGongXi.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var i,t,n,o,s,a,c,l,r,h,u,f,d,g,p,y,b,m;return{setters:[function(e){i=e.cclegacy,t=e._decorator,n=e.Node,o=e.Label,s=e.UITransform,a=e.tween,c=e.Vec3,l=e.Component},function(e){r=e.applyDecoratedDescriptor,h=e.inheritsLoose,u=e.initializerDefineProperty,f=e.assertThisInitialized,d=e.defineProperty},function(e){g=e.CUR_PLATFORM,p=e.PLATFORM_TYPE},function(e){y=e.default},function(e){b=e.Tools},function(e){m=e.GameManager}],execute:function(){var v,w,I,N,C,L,T,O,M,R,P,_,x;i._RF.push({},"a004dPYT4JAy5K8suuQZraG","UIGongXi",void 0);var D=t.ccclass,U=t.property;e("UIGongXi",(v=D("UIGongXi"),w=U(n),I=U(n),N=U(n),C=U(o),L=U(o),v((M=r((O=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return i=e.call.apply(e,[this].concat(n))||this,u(f(i),"action",M,f(i)),u(f(i),"maskNode",R,f(i)),u(f(i),"iconNode",P,f(i)),u(f(i),"countLabel",_,f(i)),u(f(i),"titleLabel",x,f(i)),d(f(i),"actTween",void 0),d(f(i),"info",null),d(f(i),"isClosed",!1),d(f(i),"_touchClose",0),i}h(i,e);var t=i.prototype;return t.onLoad=function(){this.node.getComponent(s).priority=6},t.init=function(e){if(this.isClosed=!1,this._touchClose=0,this.info=e,g==p.OPPO||g==p.VIVO||g==p.WEB||(this.info=null),this.info){if(this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=a(this.action).to(.5,{scale:new c(1,1,1)},{easing:"quintOut"}).start(),this.refreshUI(),b.showBanner(!0),g==p.VIVO&&y.instance.gongxiInterAdRate>0&&b.getRandomInt(0,100)<=y.instance.gongxiInterAdRate){var i=Math.floor(1e3*y.instance.gongxiInterAdDelay);setTimeout((function(){b.showOVCustumAd("30b45f1ac08a4d4a999b81cccc03870c")}),i)}}else this.closeMine(!1);y.instance.gongxiDelayTime>0&&this.info&&this.scheduleOnce(this.closeByDelay,y.instance.gongxiDelayTime)},t.refreshUI=function(){if(this.countLabel.node.active=0==this.info.type,0==this.info.type){for(var e=0;e<this.iconNode.children.length;e++)this.iconNode.children[e].active="gold"==this.iconNode.children[e].name;this.titleLabel.string="恭喜获得",this.countLabel.string="x"+Math.floor(this.info.count)}else if(1==this.info.type){for(var i="ant"+this.info.id,t=0;t<this.iconNode.children.length;t++)this.iconNode.children[t].active=this.iconNode.children[t].name==i;this.titleLabel.string="招募成功"}else if(2==this.info.type){for(var n="ant"+this.info.id,o=0;o<this.iconNode.children.length;o++)this.iconNode.children[o].active=this.iconNode.children[o].name==n;this.titleLabel.string="恭喜击杀"}},t.onBtnCloseClick=function(){this._touchClose++,this._touchClose>1&&(b.playSound("click"),this.closeMine(!1))},t.closeByDelay=function(){this.closeMine(!0)},t.closeMine=function(e){var i=this;if(!this.isClosed){this.isClosed=!0,this.unschedule(this.closeByDelay),this.actTween&&this.actTween.stop(),g!=p.OPPO&&g!=p.VIVO&&b.showBanner(!1);var t=b.getRandomInt(0,100);e&&0!=y.instance.gongxiShowWin2Rate&&t<=y.instance.gongxiShowWin2Rate?(m.instance.showUI("UIExReward"),this.scheduleOnce((function(){i.action.active=!1,i.maskNode.active=!1}),1)):(this.action.active=!1,this.maskNode.active=!1)}},i}(l)).prototype,"action",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(O.prototype,"maskNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(O.prototype,"iconNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(O.prototype,"countLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(O.prototype,"titleLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=O))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlayerCircle.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var r,i,t,o,n,a,s,c,l,p,u,h,f;return{setters:[function(e){r=e.cclegacy,i=e._decorator,t=e.Node,o=e.Sprite,n=e.director,a=e.Component},function(e){s=e.applyDecoratedDescriptor,c=e.inheritsLoose,l=e.initializerDefineProperty,p=e.assertThisInitialized,u=e.defineProperty},function(e){h=e.Tools},function(e){f=e.GameManager}],execute:function(){var P,m,y,g,T,v,d;r._RF.push({},"a6799+wvmFHw6SNmOfntAzP","UIPlayerCircle",void 0);var R=i.ccclass,M=i.property;e("UIPlayerCircle",(P=R("UIPlayerCircle"),m=M(t),y=M(o),P((v=s((T=function(e){function r(){for(var r,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return r=e.call.apply(e,[this].concat(t))||this,l(p(r),"action",v,p(r)),l(p(r),"proBar",d,p(r)),u(p(r),"proTimer",0),u(p(r),"proTimeMax",0),r}c(r,e);var i=r.prototype;return i.onLoad=function(){n.getScene().on("ON_PLAYER_PROGRESS",this.onPlayerProgress,this),n.getScene().on("ON_PLAYER_PROGRESS_CLEAR",this.onPlayerProgressClear,this)},i.onPlayerProgress=function(e){this.action.active=!0,this.proBar.fillRange=0,this.proTimer=0,this.proTimeMax=e},i.onPlayerProgressClear=function(){this.action.active=!1,this.proBar.fillRange=0,this.proTimer=0,this.proTimeMax=0},i.update=function(e){if(!(e>2)&&this.action.active&&f.instance&&f.instance.curPlayer){var r=f.instance.getScreenPos(f.instance.curPlayer.node);r.y+=120,this.node.setPosition(r),this.proTimer+=e,0!=this.proTimeMax&&(this.proBar.fillRange=h.clampf(this.proTimer/this.proTimeMax,0,1),this.proTimer>=this.proTimeMax&&(this.proTimer=0,this.proTimeMax=0,this.action.active=!1))}},r}(a)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=s(T.prototype,"proBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=T))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/UILockTip.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var t,i,n,a,r,s,o,c,l,u,p,f,h,d,g,b,m,y;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Node,a=e.Sprite,r=e.Label,s=e.UITransform,o=e.Vec3,c=e.Component},function(e){l=e.applyDecoratedDescriptor,u=e.inheritsLoose,p=e.initializerDefineProperty,f=e.assertThisInitialized,h=e.defineProperty,d=e.asyncToGenerator},function(e){g=e.SKIN_PACKAGE},function(e){b=e.default},function(e){m=e.Tools},function(e){y=e.GameManager}],execute:function(){var v,L,I,P,w,S,T,k,U,z,A;t._RF.push({},"aa995ADuLVPuaiWYH59NA5M","UILockTip",void 0);var B=i.ccclass,M=i.property;e("UILockTip",(v=B("UILockTip"),L=M(n),I=M(a),P=M(a),w=M(r),v((k=l((T=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,p(f(t),"action",k,f(t)),p(f(t),"icon",U,f(t)),p(f(t),"proBar",z,f(t)),p(f(t),"descLabel",A,f(t)),h(f(t),"target",null),h(f(t),"scale",0),h(f(t),"isSetIcon",!1),t}u(t,e);var i=t.prototype;return i.onLoad=function(){this.node.getComponent(s).priority=4,this.updateLabel(),this.schedule(this.updateLabel,1)},i.init=function(e){this.target=e},i.setWorldImage=function(){var e=d(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.loadAssetByBundle(y.instance.bundleUI,i);case 2:n=e.sent,t&&t.node&&n&&(t.spriteFrame=n);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),i.updateLabel=function(){for(var e=0,t=0;t<y.instance.buildings.length;t++){var i=y.instance.buildings[t];6==i.id&&i.info&&2==i.info.state&&e++}var n="Unlock "+Math.floor(2-e)+" more Planting Farm";this.descLabel.string=n,this.proBar.fillRange=m.clampf(e/2,0,1)},i.update=function(e){if(!(e>2))if(this.target&&this.target.node&&y.instance&&y.instance.curPlayer)if(o.distance(this.target.node.worldPosition,y.instance.curPlayer.node.worldPosition)<.7&&this.target.info&&0==this.target.info.state){this.scale=m.clampf(this.scale+10*e,0,1),this.action.setScale(this.scale,this.scale,1);var t=y.instance.getScreenPos(this.target.node);if(t.y+=100,this.action.setPosition(t),!this.isSetIcon&&g.length<=0){this.isSetIcon=!0;var i="textreus/world/world"+b.instance.curSceneId+"/spriteFrame";this.setWorldImage(this.icon,i)}}else this.scale=m.clampf(this.scale-30*e,0,1),this.action.setScale(this.scale,this.scale,1);else this.scale=m.clampf(this.scale-30*e,0,1),this.action.setScale(this.scale,this.scale,1)},t}(c)).prototype,"action",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=l(T.prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=l(T.prototype,"proBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=l(T.prototype,"descLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T))||S));t._RF.pop()}}}));

System.register("chunks:///_virtual/UIJingXi.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var n,i,t,o,r,a,s,c,l,u,f,p,h,y,d;return{setters:[function(e){n=e.cclegacy,i=e._decorator,t=e.Node,o=e.UITransform,r=e.Component},function(e){a=e.applyDecoratedDescriptor,s=e.inheritsLoose,c=e.initializerDefineProperty,l=e.assertThisInitialized,u=e.defineProperty},function(e){f=e.CUR_PLATFORM,p=e.PLATFORM_TYPE},function(e){h=e.default},function(e){y=e.Tools},function(e){d=e.GameManager}],execute:function(){var g,m,T,v,D,M,P;n._RF.push({},"b0120kAvNxPDaQTVWSgauO2","UIJingXi",void 0);var w=i.ccclass,I=i.property;e("UIJingXi",(g=w("UIJingXi"),m=I(t),T=I(t),g((M=a((D=function(e){function n(){for(var n,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return n=e.call.apply(e,[this].concat(t))||this,c(l(n),"action",M,l(n)),c(l(n),"maskNode",P,l(n)),u(l(n),"actTween",void 0),u(l(n),"info",null),n}s(n,e);var i=n.prototype;return i.onLoad=function(){this.node.getComponent(o).priority=6,h.instance.jingxiDelayEx>0?this.scheduleOnce(this.closeByDelay,h.instance.jingxiDelayEx):this.closeMine(!1)},i.onBtnCloseClick=function(){y.playSound("click"),this.closeMine(!1)},i.closeByDelay=function(){this.closeMine(!0)},i.closeMine=function(e){this.unschedule(this.closeByDelay),e&&d.instance.showUI("UIExReward"),this.actTween&&this.actTween.stop(),this.node.removeFromParent(),this.node.destroy(),f!=p.OPPO&&f!=p.VIVO&&y.showBanner(!1)},n}(r)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=a(D.prototype,"maskNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=D))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIShaozi.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(n){"use strict";var o,t,e,r,i,s,a;return{setters:[function(n){o=n.cclegacy,t=n._decorator,e=n.UITransform,r=n.Component},function(n){i=n.inheritsLoose},function(n){s=n.Tools},function(n){a=n.GameManager}],execute:function(){var c;o._RF.push({},"b1e69qJUDtFJY2DqEBhsoTo","UIShaozi",void 0);var u=t.ccclass;t.property,n("UIShaozi",u("UIShaozi")(c=function(n){function o(){return n.apply(this,arguments)||this}i(o,n);var t=o.prototype;return t.onLoad=function(){this.node.getComponent(e).priority=4},t.start=function(){var n=this;s.playSound("whistle"),this.scheduleOnce((function(){n.node.removeFromParent(),n.node.destroy()}),1)},t.update=function(n){if(!(n>2)&&a.instance&&a.instance.curPlayer){var o=s.getScreenPos(a.instance.curPlayer.node.worldPosition,a.instance.camera,a.instance.canvas.node);o.y+=120,this.node.setPosition(o)}},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.cclegacy,t=e.director}],execute:function(){e({init:r,t:function(e){var n=window;if(!n.languages)return e;for(var t=e.split("."),r=n.languages[a],u=0;u<t.length;u++)if(!(r=r[t[u]]))return"";return r||""},updateSceneRenderers:u}),n._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var a=e("_language","zh");e("ready",!1);function r(n){e("ready",!0),a=e("_language",n)}function u(){for(var e=t.getScene().children,n=[],a=0;a<e.length;++a){var r=e[a].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,r)}for(var u=0;u<n.length;++u){var i=n[u];i.node.active&&i.updateLabel()}for(var o=[],g=0;g<e.length;++g){var c=e[g].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,c)}for(var l=0;l<o.length;++l){var p=o[l];p.node.active&&p.updateSprite()}}window._languageData={get language(){return a},init:function(e){r(e)},updateSceneRenderers:function(){u()}},n._RF.pop()}}}));

System.register("chunks:///_virtual/UIFly.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var i,t,n,a,s,o,l,r,c,u,h,f,d,y,m,b,p,g,v,B,T;return{setters:[function(e){i=e.cclegacy,t=e._decorator,n=e.Node,a=e.Sprite,s=e.Label,o=e.Button,l=e.UITransform,r=e.tween,c=e.Vec3,u=e.Component},function(e){h=e.applyDecoratedDescriptor,f=e.inheritsLoose,d=e.initializerDefineProperty,y=e.assertThisInitialized,m=e.defineProperty},function(e){b=e.FLY_TIME,p=e.CUR_PLATFORM,g=e.PLATFORM_TYPE},function(e){v=e.default},function(e){B=e.Tools},function(e){T=e.GameManager}],execute:function(){var N,C,P,w,F,M,k,L,I,q,U,z,R,V,_,S,D;i._RF.push({},"bbdf6Mn7XZBbpktaeXd9Btr","UIFly",void 0);var O=t.ccclass,G=t.property;e("UIFly",(N=O("UIFly"),C=G(n),P=G(n),w=G(n),F=G(a),M=G(s),k=G(n),L=G(o),N((U=h((q=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i=e.call.apply(e,[this].concat(n))||this,d(y(i),"action",U,y(i)),d(y(i),"maskNode",z,y(i)),d(y(i),"flyTimesNode",R,y(i)),d(y(i),"flyTimesBar",V,y(i)),d(y(i),"timeLabel",_,y(i)),d(y(i),"qiPaoNode",S,y(i)),d(y(i),"btnVideo",D,y(i)),m(y(i),"successCb",null),m(y(i),"actTween",void 0),i}f(i,e);var t=i.prototype;return t.onLoad=function(){this.node.getComponent(l).priority=6,this.schedule(this.updateTime,1)},t.init=function(e){if(e){for(var i=!1,t=0;t<T.instance.buildings.length;t++){var n=T.instance.buildings[t];if(4==n.id){i=0==n.info.useTimes;break}}this.successCb=e,i||v.instance.reportCustom("FlyUIShow"),this.refreshUI(),this.updateTime(),this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=r(this.action).to(.5,{scale:new c(1,1,1)},{easing:"quintOut"}).start(),B.showBanner(!0)}else this.closeMine()},t.refreshUI=function(){for(var e=!1,i=v.instance.flyTimes>=3,t=0;t<T.instance.buildings.length;t++){var n=T.instance.buildings[t];if(4==n.id){e=0==n.info.useTimes;break}}this.action.getChildByName("BtnFree").active=e,e?(this.action.getChildByName("BarBG").active=!1,this.action.getChildByName("Desc1").active=!1):(this.action.getChildByName("BarBG").active=!0,this.action.getChildByName("Desc1").active=!0),2==v.instance.flyTimes?this.flyTimesBar.fillRange=.5:v.instance.flyTimes>=3?this.flyTimesBar.fillRange=1:this.flyTimesBar.fillRange=0;for(var s=0;s<this.flyTimesNode.length;s++){this.flyTimesNode[s].active=v.instance.flyTimes>s}this.btnVideo.node.getComponent(a).grayscale=T.instance.curPlayer.isFly;var o=e?660:790,r=e?-124:-214;this.action.getChildByName("BG").getComponent(l).height=o,this.action.getChildByName("BtnFree").setPosition(110,r,0),this.action.getChildByName("BtnVideo").setPosition(110,r,0),this.action.getChildByName("BtnClose").setPosition(-110,r,0),i?(this.qiPaoNode.getChildByName("Max").active=!0,this.qiPaoNode.getChildByName("Label").active=!1,this.timeLabel.node.active=!1):(this.qiPaoNode.getChildByName("Max").active=!1,this.qiPaoNode.getChildByName("Label").active=!0,this.timeLabel.node.active=!0)},t.updateTime=function(){if(T.instance.curPlayer)if(T.instance.curPlayer.isFly){if(this.qiPaoNode.active||(this.qiPaoNode.active=!0,this.refreshUI()),!(v.instance.flyTimes>=3)){var e=Math.floor(B.clampf(b-T.instance.curPlayer.flyTimer,0,b));this.timeLabel.string=B.timestampToTime2(e)}}else this.qiPaoNode.active&&(this.qiPaoNode.active=!1,this.refreshUI())},t.onBtnVideoClick=function(){if(B.playSound("click"),!T.instance.curPlayer.isFly){var e=function(){this.successCb(),this.closeMine()}.bind(this);v.instance.watchVideo("FlyReward",e)}},t.onBtnFreeClick=function(){B.playSound("click"),T.instance.curPlayer.isFly||(this.successCb(),this.closeMine())},t.onBtnCloseClick=function(){B.playSound("click"),this.closeMine()},t.closeMine=function(){this.successCb=null,this.actTween&&this.actTween.stop(),this.action.active=!1,this.maskNode.active=!1,p!=g.OPPO&&p!=g.VIVO&&B.showBanner(!1)},i}(u)).prototype,"action",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=h(q.prototype,"maskNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=h(q.prototype,"flyTimesNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=h(q.prototype,"flyTimesBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=h(q.prototype,"timeLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=h(q.prototype,"qiPaoNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=h(q.prototype,"btnVideo",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=q))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/Area.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts","./Label3D.ts"],(function(e){"use strict";var s,i,t,n,o,r,a,d,c,h,l,u,g,f,p,y,P,b,v;return{setters:[function(e){s=e.cclegacy,i=e._decorator,t=e.Node,n=e.MeshRenderer,o=e.Vec3,r=e.director,a=e.Component,d=e.instantiate},function(e){c=e.applyDecoratedDescriptor,h=e.inheritsLoose,l=e.initializerDefineProperty,u=e.assertThisInitialized,g=e.defineProperty,f=e.asyncToGenerator},function(e){p=e.SCENE_INFO},function(e){y=e.default},function(e){P=e.Tools},function(e){b=e.GameManager},function(e){v=e.Label3D}],execute:function(){var N,S,m;s._RF.push({},"bd3a3/zw/xGwKgzJYqZPOb8","Area",void 0);var w=i.ccclass,M=i.property;e("Area",w("Area")((m=c((S=function(e){function s(){for(var s,i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];return s=e.call.apply(e,[this].concat(t))||this,l(u(s),"id",m,u(s)),g(u(s),"lockNode",void 0),g(u(s),"unlockNode",void 0),g(u(s),"buySuccessNode",void 0),g(u(s),"label3D",void 0),g(u(s),"isCanUse",!1),g(u(s),"info",null),g(u(s),"isNeedRefreshLabel",!0),g(u(s),"buildingProgressNode",void 0),g(u(s),"buildingProgress",void 0),g(u(s),"buySuccessEnv",null),s}h(s,e);var i=s.prototype;return i.start=function(){this.lockNode=this.node.getChildByName("Lock"),this.unlockNode=this.node.getChildByName("Unlock"),this.buySuccessNode=this.node.getChildByName("BuySuccess");var e=new t;this.node.addChild(e),e.setPosition(-.03,.04,-.02),this.label3D=e.addComponent(v);var s=this.buySuccessNode.getChildByName("Ground");s&&(this.buildingProgressNode=s.getChildByName("Progress"),this.buildingProgress=this.buildingProgressNode.getComponent(n).material);var i=this.unlockNode.getChildByName("Ground");if(i&&(this.buildingProgressNode=i.getChildByName("Progress"),this.buildingProgress=this.buildingProgressNode.getComponent(n).material),this.info=y.instance.getAreaInfoByID(this.id),!this.info){var o={id:this.id,progress:0,state:0};this.info=o,y.instance.areas.push(o),localStorage.setItem("areas",JSON.stringify(y.instance.areas))}b.instance.areas.push(this),this.refreshShow(),this.refreshProgress(),this.schedule(this.updateMoney,.05),this.loadAreaEnv()},i.refreshShow=function(){this.isNeedRefreshLabel=!0,this.lockNode.active=0==this.info.state,this.unlockNode.active=1==this.info.state,this.buySuccessNode.active=2==this.info.state,this.label3D.node.active=1==this.info.state},i.refreshProgress=function(){if(this.buildingProgress)if(0==this.info.state){this.buildingProgressNode.active=!1,this.buildingProgress.setProperty("progress",0)}else if(1==this.info.state){var e=y.instance.curSceneId-1,s=p[e].areaInfo[this.id-1].unlockPrice,i=P.clampf(this.info.progress/s,0,1);0==i&&(this.buildingProgressNode.active=!1),this.buildingProgress.setProperty("progress",i)}},i.updateMoney=function(){if(b.instance.curPlayer&&1==this.info.state){var e=y.instance.curSceneId-1,s=p[e].areaInfo[this.id-1],i=s.unlockPrice;if(this.info.progress<i){if(o.distance(this.node.worldPosition,b.instance.curPlayer.node.worldPosition)<.7&&!b.instance.curPlayer.isMoving){if(0==s.unlockType)if(y.instance.gold>=1){var t=1,n=i-this.info.progress;y.instance.gold>=n/5&&(t=Math.floor(n/5)),(t=y.instance.gold>=n/10?Math.floor(n/10):1)<=0&&(t=1),y.instance.gold-=t,this.progressAdd(t,i),P.playSound("gold");var r=new o(b.instance.curPlayer.node.worldPosition.x,.2,b.instance.curPlayer.node.worldPosition.z),a=new o(this.node.worldPosition.x,0,this.node.worldPosition.z);b.instance.flyMoney("shandian",r,a)}else{var d=i-this.info.progress;b.instance.showMoney(0,d)}else if(1==s.unlockType)if(y.instance.wood>=1){var c=1,h=i-this.info.progress;y.instance.wood>=h/5&&(c=Math.floor(h/5)),(c=y.instance.wood>=h/10?Math.floor(h/10):1)<=0&&(c=1),y.instance.wood-=c,this.progressAdd(c,i),P.playSound("gold");var l=new o(b.instance.curPlayer.node.worldPosition.x,.2,b.instance.curPlayer.node.worldPosition.z),u=new o(this.node.worldPosition.x,0,this.node.worldPosition.z);b.instance.flyMoney("mutou",l,u)}else{var g=i-this.info.progress;b.instance.showMoney(1,g)}}else this.isCanUse=!0;if(this.isNeedRefreshLabel){this.isNeedRefreshLabel=!1;var f=Math.floor(this.info.progress),v=Math.floor(i);this.refreshLabel(f+"/"+v)}}}},i.progressAdd=function(e,s){if(this.info.progress=P.clampf(this.info.progress+e,0,s),this.info.progress>=s){this.isCanUse=!1,this.info.progress=0,this.info.state=2,this.buildingProgress&&this.buildingProgress.setProperty("progress",0),this.buildingProgressNode&&(this.buildingProgressNode.active=!1),r.getScene().emit("MAIN_TASK_PROGRESS",4,this.id),localStorage.setItem("areas",JSON.stringify(y.instance.areas)),this.refreshShow(),r.getScene().emit("JUHUA_REFRESH",!0,"Loading new area..."),this.loadAreaEnv();var i=Math.floor(this.id);y.instance.reportCustom("Desktop"+i)}else if(this.buildingProgress){this.buildingProgressNode.active||(this.buildingProgressNode.active=!0);var t=P.clampf(this.info.progress/s,0,1);this.buildingProgress.setProperty("progress",t)}this.isNeedRefreshLabel=!0},i.loadAreaEnv=function(){var e=f(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.id>1&&2==this.info.state)||this.buySuccessEnv){e.next=9;break}return e.next=3,P.loadAssetByBundle(b.instance.bundleScene,"prefabs/Area"+Math.floor(this.id)+"Env");case 3:s=e.sent,this.buySuccessEnv=d(s),this.buySuccessNode.addChild(this.buySuccessEnv),this.buySuccessEnv.setPosition(0,0,0),r.getScene().emit("JUHUA_REFRESH",!1),14==y.instance.gameStep&&2==this.id?y.instance.nextGameStep(15):18==y.instance.gameStep&&3==this.id&&y.instance.nextGameStep(19);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.refreshLabel=function(e){var s=y.instance.curSceneId-1;0==p[s].areaInfo[this.id-1].unlockType?e+="L":e+="M",this.label3D.refresh(e)},s}(a)).prototype,"id",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=S))||N);s._RF.pop()}}}));

System.register("chunks:///_virtual/UINativeBanner.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./DataManager.ts","./Tools.ts"],(function(t){"use strict";var e,n,i,a,o,s,r,c,u,v,l,h,d,p,f;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Node,a=t.Sprite,o=t.Label,s=t.UITransform,r=t.director,c=t.Component},function(t){u=t.applyDecoratedDescriptor,v=t.inheritsLoose,l=t.initializerDefineProperty,h=t.assertThisInitialized,d=t.defineProperty},function(t){p=t.default},function(t){f=t.Tools}],execute:function(){var A,g,m,b,N,w,S,B,I,y,C,D,T;e._RF.push({},"becd4ZRZyRJHIoPeuvEY0i2","UINativeBanner",void 0);var _=n.ccclass,L=n.property;t("UINativeBanner",(A=_("UINativeBanner"),g=L(i),m=L(i),b=L(a),N=L(o),w=L(o),A((I=u((B=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,l(h(e),"bottom",I,h(e)),l(h(e),"nativeBG",y,h(e)),l(h(e),"nativeIcon",C,h(e)),l(h(e),"nativeNameLabel",D,h(e)),l(h(e),"nativeDescLabel",T,h(e)),d(h(e),"isCanShow",!0),d(h(e),"isCanJump",!0),e}v(e,t);var n=e.prototype;return n.start=function(){this.node.getComponent(s).priority=99;var t=cc.winSize;this.bottom.setPosition(0,-t.height/2,0),this.updateNativeAdShow(),r.getScene().on("NATIVE_BANNER_UPDATE",this.updateNativeAdShow,this),r.getScene().on("NATIVE_BANNER_SHOW",this.showNativeBanner,this),this.initNativeBaner()},n.updateNativeAdShow=function(){if(p.instance.nativeAds[1]&&p.instance.nativeAds[1].ad&&!p.instance.nativeAds[1].isClose){this.bottom.active=this.isCanShow;var t=p.instance.nativeAds[1].icon,e=f.getURLSuffix(t);e&&e.length>=7?f.httpImageByUrlType(this.nativeIcon,t):f.setImage(this.nativeIcon,t,e),this.nativeNameLabel.string=p.instance.nativeAds[1].title,this.nativeDescLabel.string=p.instance.nativeAds[1].desc,p.instance.nativeAds[1].ad.reportAdShow({adId:p.instance.nativeAds[1].adId})}else this.bottom.active=this.isCanShow},n.onBtnNativeAdClick=function(){p.instance.nativeAds[1]&&p.instance.nativeAds[1].ad&&p.instance.nativeAds[1].ad.reportAdClick({adId:p.instance.nativeAds[1].adId+""})},n.onBtnNativeCloseClick=function(){if(p.instance.nativeAds[1]&&p.instance.nativeAds[1].ad){var t=(new Date).valueOf();p.instance.nativeAds[1].openTime=t+3e4,p.instance.nativeAds[1].isClose=!0,this.updateNativeAdShow()}},n.showNativeBanner=function(t){this.isCanShow=t,t?this.updateNativeAdShow():this.bottom.active=!1},n.initNativeBaner=function(){r.getScene().on("ON_JOY_MOVE",this.onTouch,this),r.getScene().on("ON_JOY_END",this.onTouchEnd,this),this.updateNativeAdShow()},n.onTouch=function(t){if(this.isCanJump){var e=t.getUILocation().x-cc.winSize.width/2,n=t.getUILocation().y-cc.winSize.height/2,i=this.nativeBG.parent.position,a=this.nativeBG.getComponent(s),o=i.x-a.width/2,r=i.x+a.width/2,c=i.y+a.height/2+69,u=i.y-a.height/2+69;e>=o&&e<=r&&n>=u&&n<=c&&(this.isCanJump=!1,this.autoJump(),console.log("点到了"))}},n.onTouchEnd=function(t){this.isCanJump=!0},n.autoJump=function(){if(p.instance.nativeBannerDragCan){var t=(new Date).valueOf();if(p.instance.nativeAds[1]&&p.instance.nativeAds[1].ad&&t>=p.instance.nativeBannerDragTimeStamp){var e=t+1e3*p.instance.nativeBannerDragInterval;p.instance.nativeBannerDragTimeStamp=e,this.onBtnNativeAdClick()}}},e}(c)).prototype,"bottom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=u(B.prototype,"nativeBG",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=u(B.prototype,"nativeIcon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=u(B.prototype,"nativeNameLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=u(B.prototype,"nativeDescLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=B))||S));e._RF.pop()}}}));

System.register("chunks:///_virtual/ScaleAnimation.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var i,t,n,a,o,r,c,s,l,u,p;return{setters:[function(e){i=e.cclegacy,t=e._decorator,n=e.Vec3,a=e.Component},function(e){o=e.applyDecoratedDescriptor,r=e.inheritsLoose,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.defineProperty},function(e){u=e.Tools},function(e){p=e.GameManager}],execute:function(){var f,d,h,S;i._RF.push({},"bffebvvxp5DRLTSkJdG02ga","ScaleAnimation",void 0);var y=t.ccclass,g=t.property;e("ScaleAnimation",y("ScaleAnimation")((h=o((d=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i=e.call.apply(e,[this].concat(n))||this,c(s(i),"scaleDistance",h,s(i)),c(s(i),"toScale",S,s(i)),l(s(i),"originScale",0),i}r(i,e);var t=i.prototype;return t.onLoad=function(){this.originScale=this.node.scale.x},t.update=function(e){if(p.instance.curPlayer&&p.instance.curPlayer.node)if(n.distance(this.node.worldPosition,p.instance.curPlayer.node.worldPosition)<this.scaleDistance){var i=u.clampf(this.node.scale.x+e,this.originScale,this.toScale);this.node.setScale(i,i,i)}else{var t=u.clampf(this.node.scale.x-e,this.originScale,this.toScale);this.node.setScale(t,t,t)}},i}(a)).prototype,"scaleDistance",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),S=o(d.prototype,"toScale",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.3}}),f=d))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,r,n,a,o,p,s,c,u,l,f;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.SpriteFrame,n=e.Component},function(e){a=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,p=e.inheritsLoose,s=e.defineProperty,c=e.assertThisInitialized},function(e){u=e.ready,l=e.init,f=e._language}],execute:function(){var h,d,g,y,z,L,m,b,v,S,F;t._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var _=i.ccclass,w=i.property,D=i.executeInEditMode,I=(h=_("LocalizedSpriteItem"),d=w({type:r}),h((z=a((y=function(){o(this,"language",z,this),o(this,"spriteFrame",L,this)}).prototype,"language",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),L=a(y.prototype,"spriteFrame",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g);e("LocalizedSprite",(m=_("LocalizedSprite"),b=w({type:I}),m(v=D((F=a((S=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,s(c(t),"sprite",null),o(c(t),"spriteList",F,c(t)),t}p(t,e);var i=t.prototype;return i.onLoad=function(){u||l("zh"),this.fetchRender()},i.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},i.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===f){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(n)).prototype,"spriteList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=S))||v)||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/UIBugSaveMin.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./GameManager.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,c,u,h,l,p,g;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Node,o=t.UITransform,a=t.tween,r=t.Vec3,s=t.Component},function(t){c=t.applyDecoratedDescriptor,u=t.inheritsLoose,h=t.initializerDefineProperty,l=t.assertThisInitialized,p=t.defineProperty},function(t){g=t.GameManager}],execute:function(){var d,v,f,w,y;e._RF.push({},"c259eewHuhMU45GwuX4eHFu","UIBugSaveMin",void 0);var S=i.ccclass,m=i.property;t("UIBugSaveMin",(d=S("UIBugSaveMin"),v=m(n),d((y=c((w=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,h(l(e),"action",y,l(e)),p(l(e),"target",void 0),p(l(e),"isShowActNode",!1),p(l(e),"tweenAct",void 0),e}u(e,t);var i=e.prototype;return i.onLoad=function(){this.node.getComponent(o).priority=4},i.init=function(t){this.target=t,this.action.setScale(0,0,0),this.action.active=!1,this.isShowActNode=!1},i.update=function(t){if(!(t>2))if(this.target&&this.target.node&&this.target.isBugSave&&g.instance.curPlayer&&g.instance._hasSaveBug){this.isShowActNode||(this.isShowActNode=!0,this.action.active=!0,this.tweenAct&&this.tweenAct.stop(),this.tweenAct=a(this.action).to(.5,{scale:new r(1,1,1)},{easing:"elasticOut"}).start());var e=g.instance.getScreenPos(this.target.node);e.y+=50,this.action.setPosition(e)}else this.node.removeFromParent(),this.node.destroy()},e}(s)).prototype,"action",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=w))||f));e._RF.pop()}}}));

System.register("chunks:///_virtual/UIAntDead.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(t){"use strict";var i,e,n,o,a,r,c,s,l,u,h,p;return{setters:[function(t){i=t.cclegacy,e=t._decorator,n=t.Node,o=t.UITransform,a=t.Component},function(t){r=t.applyDecoratedDescriptor,c=t.inheritsLoose,s=t.initializerDefineProperty,l=t.assertThisInitialized,u=t.defineProperty},function(t){h=t.Tools},function(t){p=t.GameManager}],execute:function(){var f,v,d,g,y,b,m,D,I;i._RF.push({},"c469ds9iXxLBJluHQZLlF8O","UIAntDead",void 0);var P=e.ccclass,z=e.property;t("UIAntDead",(f=P("UIAntDead"),v=z(n),d=z(n),g=z(n),f((m=r((b=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return i=t.call.apply(t,[this].concat(n))||this,s(l(i),"action",m,l(i)),s(l(i),"icons",D,l(i)),s(l(i),"rotate",I,l(i)),u(l(i),"target",void 0),i}c(i,t);var e=i.prototype;return e.onLoad=function(){this.node.getComponent(o).priority=4},e.init=function(t){this.target=t},e.update=function(t){if(!(t>2))if(this.target&&this.target.isDead){this.action.active||(this.action.active=!0);var i=p.instance.getScreenPos(this.target.node),e=h.isScreenIn(i);if(e&&!this.icons[0].active&&(this.icons[0].active=!0),!e&&this.icons[0].active&&(this.icons[0].active=!1),e&&this.icons[1].active&&(this.icons[1].active=!1),e||this.icons[1].active||(this.icons[1].active=!0),e)i.x-=10,i.y+=40,this.action.setPosition(i);else{var n=h.getScreenBoardPos(i,30);n.y+=40,this.action.setPosition(n),this.rotate.setScale(n.x>0?1:-1,n.y>0?-1:1,1)}}else this.action.active&&(this.action.active=!1)},i}(a)).prototype,"action",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(b.prototype,"icons",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=r(b.prototype,"rotate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/UIGuide.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Tools.ts","./GameManager.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,c,l,u,h,f,p,g,d,v;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.Node,n=t.Sprite,r=t.Vec3,a=t.Color,s=t.UITransform,c=t.director,l=t.Component},function(t){u=t.applyDecoratedDescriptor,h=t.inheritsLoose,f=t.initializerDefineProperty,p=t.assertThisInitialized,g=t.defineProperty},function(t){d=t.Tools},function(t){v=t.GameManager}],execute:function(){var y,m,b,_,P,T,I,R,x,G,S;e._RF.push({},"ca87cxe2XtDD5av58SZctnY","UIGuide",void 0);var w=i.ccclass,D=i.property;t("UIGuide",(y=w("UIGuide"),m=D(o),b=D(o),_=D(o),P=D(n),y((R=u((I=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,f(p(e),"action",R,p(e)),g(p(e),"target",void 0),g(p(e),"offset",new r(10,10,0)),f(p(e),"rotate",x,p(e)),f(p(e),"move",G,p(e)),f(p(e),"icon",S,p(e)),g(p(e),"_moveNodeTimer",0),g(p(e),"color",new a(255,255,255,255)),e}h(e,t);var i=e.prototype;return i.onLoad=function(){this.node.getComponent(s).priority=4,c.on("GUIDE_ARROW_SHOW",this.init,this),c.on("CLEAR_GUIDE_ARROW",this.clearTarget,this)},i.init=function(t,e){void 0===e&&(e=0),this.target=t,this.unschedule(this.clearTarget),0!=e&&this.scheduleOnce(this.clearTarget,e)},i.clearTarget=function(){this.target=null},i.update=function(t){if(!(t>2))if(this.target&&this.target.parent){this._moveNodeTimer+=3*t,this.move.setPosition(0,20*Math.sin(this._moveNodeTimer),0),this.action.active||(this.action.active=!0);var e=v.instance.getScreenPos(this.target);if(d.isScreenIn(e)){if(e.x+=this.offset.x,e.y+=this.offset.y,this.action.setPosition(e),this.rotate.setRotationFromEuler(0,0,0),v.instance.curPlayer){var i=v.instance.getScreenPos(v.instance.curPlayer.node),o=r.distance(i,e);this.color.a=d.clampf(o,0,255),this.icon.color=this.color}}else{var n=d.getScreenBoardPos(e,this.offset.y);n.x+=this.offset.x,n.y+=this.offset.y,this.action.setPosition(n.x,n.y,0);var a=d.getAngle(n.x,-n.y);this.rotate.setRotationFromEuler(0,0,a)}}else this.action.active&&(this.action.active=!1)},e}(l)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=u(I.prototype,"rotate",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=u(I.prototype,"move",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=u(I.prototype,"icon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=I))||T));e._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFollow.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./GameManager.ts"],(function(t){"use strict";var o,e,i,s,r,n,a,c;return{setters:[function(t){o=t.cclegacy,e=t._decorator,i=t.Vec3,s=t.Component},function(t){r=t.inheritsLoose,n=t.defineProperty,a=t.assertThisInitialized},function(t){c=t.GameManager}],execute:function(){var l;o._RF.push({},"de85eyFZhhG/auBVjjMAqCQ","CameraFollow",void 0);var u=e.ccclass;e.property,t("CameraFollow",u("CameraFollow")(l=function(t){function o(){for(var o,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return o=t.call.apply(t,[this].concat(s))||this,n(a(o),"pos",void 0),n(a(o),"target",void 0),n(a(o),"out",new i),o}r(o,t);var e=o.prototype;return e.start=function(){this.pos=this.node.worldPosition.clone()},e.setTarget=function(t){this.target=t},e.update=function(t){t>2||(this.target&&this.target.parent?(this.out.x=this.pos.x+this.target.worldPosition.x,this.out.y=this.pos.y+this.target.worldPosition.y,this.out.z=this.pos.z+this.target.worldPosition.z,i.distance(this.out,this.node.worldPosition),i.lerp(this.out,this.node.worldPosition,this.out,.1),this.node.worldPosition=this.out):c.instance&&c.instance.curPlayer&&c.instance.curPlayer.node&&(this.target=c.instance.curPlayer.node))},o}(s))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Label3D.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./GameManager.ts"],(function(e){"use strict";var a,t,n,r,i,o,l;return{setters:[function(e){a=e.cclegacy,t=e._decorator,n=e.Component},function(e){r=e.inheritsLoose,i=e.defineProperty,o=e.assertThisInitialized},function(e){l=e.GameManager}],execute:function(){var c;a._RF.push({},"dfcd5tQ7JxM+4GI6C+12iJl","Label3D",void 0);var s=t.ccclass;t.property,e("Label3D",s("Label3D")(c=function(e){function a(){for(var a,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a=e.call.apply(e,[this].concat(n))||this,i(o(a),"labelSpace",.033),i(o(a),"labelGangSpace",.035),i(o(a),"iconSpace",.036),a}r(a,e);var t=a.prototype;return t.refresh=function(e){this.recoverAll();for(var a=[],t=this.labelSpace/2,n=0;n<e.length;n++){var r=""+e[n];"/"==r?(r="gang",a.push(this.labelGangSpace+t),0!=n&&(t=this.labelGangSpace/2)):":"==r?(r="maohao",a.push(this.labelGangSpace+t),0!=n&&(t=this.labelGangSpace/2)):"L"==r||"M"==r?(a.push(this.iconSpace+t),0!=n&&(t=this.iconSpace/2)):(a.push(this.labelSpace+t),0!=n&&(t=this.labelSpace/2));var i=l.instance.getLabel3DByPool(r);i&&(i.active=!0,i.setParent(this.node))}for(var o=0,c=0;c<this.node.children.length;c++){this.node.children[c].setPosition(-o,0,0),o+=a[c]}for(var s=o/2,h=0;h<this.node.children.length;h++){var p=this.node.children[h];p.setPosition(p.position.x+s,0,0)}},t.recoverAll=function(){for(var e=this.node.children,a=0;a<e.length;a++){var t=e[a];t.removeFromParent(),a--,l.instance.recoverLabel3DToPool(t)}},a}(n))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/UITaskDone.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts"],(function(t){"use strict";var n,e,i,o,a,s,c,r,h,l,u,d,v,f,p,m,N,g,b;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Node,o=t.Label,a=t.Sprite,s=t.UITransform,c=t.tween,r=t.Vec3,h=t.director,l=t.Component},function(t){u=t.applyDecoratedDescriptor,d=t.inheritsLoose,v=t.initializerDefineProperty,f=t.assertThisInitialized,p=t.defineProperty},function(t){m=t.CUR_PLATFORM,N=t.PLATFORM_TYPE},function(t){g=t.default},function(t){b=t.Tools}],execute:function(){var A,I,w,T,y,C,B,k,P,S,O,D,L,U,_,E,R;n._RF.push({},"e7b69aFBd9BX5eRNOwqfPMD","UITaskDone",void 0);var z=e.ccclass,M=e.property;t("UITaskDone",(A=z("UITaskDone"),I=M(i),w=M(i),T=M(i),y=M(o),C=M(o),B=M(i),k=M(a),A((O=u((S=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return n=t.call.apply(t,[this].concat(i))||this,v(f(n),"action",O,f(n)),v(f(n),"maskNode",D,f(n)),v(f(n),"btnClose",L,f(n)),v(f(n),"countLabel",U,f(n)),v(f(n),"titleLabel",_,f(n)),v(f(n),"nativeNode",E,f(n)),v(f(n),"nativeIcon",R,f(n)),p(f(n),"actTween",void 0),p(f(n),"info",null),p(f(n),"isCanJump",!0),p(f(n),"isCloseNative",!1),n}d(n,t);var e=n.prototype;return e.onLoad=function(){this.node.getComponent(s).priority=6},e.init=function(t){this.info=t,m==N.OPPO?this.initNativeDone():this.info=null,this.info?(this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=c(this.action).to(.5,{scale:new r(1,1,1)},{easing:"quintOut"}).start(),this.refreshUI(),b.showBanner(!0)):this.closeMine()},e.refreshUI=function(){this.countLabel.string="x"+Math.floor(this.info.count)},e.onBtnCloseClick=function(){b.playSound("click"),this.closeMine(),b.showInterstitial()},e.closeByDelay=function(){this.closeMine()},e.closeMine=function(){this.unschedule(this.closeByDelay),this.actTween&&this.actTween.stop(),this.node.removeFromParent(),this.node.destroy(),m!=N.OPPO&&m!=N.VIVO&&b.showBanner(!1),h.getScene().emit("NATIVE_BANNER_SHOW",!0)},e.onBtnCloseClickOPPO=function(){b.playSound("click"),b.getRandomInt(0,100)<g.instance.nativeAdCloseJumpRate&&this.onBtnNativeAdClick(),this.closeMine()},e.initNativeDone=function(){m==N.OPPO?(this.nativeNode.active=!0,this.nativeIcon.node.on("touch-start",this.onTouch,this),this.nativeIcon.node.on("touch-move",this.onTouch,this),this.nativeIcon.node.on("touch-end",this.onTouchEnd,this),this.nativeIcon.node.on("touch-canvel",this.onTouchEnd,this),this.maskNode.on("touch-start",this.onTouch,this),this.maskNode.on("touch-move",this.onTouch,this),this.maskNode.on("touch-end",this.onTouchEnd,this),this.maskNode.on("touch-cancel",this.onTouchEnd,this),this.updateNativeAdShow()):this.nativeNode.active=!1},e.onTouch=function(t){if(this.isCanJump){var n=t.getUILocation().x-cc.winSize.width/2,e=t.getUILocation().y-cc.winSize.height/2,i=this.nativeIcon.node.parent.position,o=this.nativeIcon.node.getComponent(s),a=i.x-o.width/2,c=i.x+o.width/2,r=i.y+o.height/2,h=i.y-o.height/2;n>=a&&n<=c&&e>=h&&e<=r&&(this.isCanJump=!1,this.autoJump())}},e.onTouchEnd=function(t){this.isCanJump=!0},e.autoJump=function(){if(g.instance.nativeBannerDragCan){var t=(new Date).valueOf();if(g.instance.nativeAds[1]&&g.instance.nativeAds[1].ad&&t>=g.instance.nativeBannerDragTimeStamp){var n=t+1e3*g.instance.nativeBannerDragInterval;g.instance.nativeBannerDragTimeStamp=n,this.onBtnNativeAdClick()}}},e.onBtnNativeAdClick=function(){g.instance.nativeAds[1]&&g.instance.nativeAds[1].ad&&g.instance.nativeAds[1].ad.reportAdClick({adId:g.instance.nativeAds[1].adId+""})},e.onBtnNativeCloseClick=function(){g.instance.nativeAds[1]&&g.instance.nativeAds[1].ad&&(this.isCloseNative=!0,this.updateNativeAdShow())},e.updateNativeAdShow=function(){if(g.instance.nativeAds[1]&&g.instance.nativeAds[1].ad&&!this.isCloseNative){this.nativeNode.active=!0,this.btnClose.active=!1,h.getScene().emit("NATIVE_BANNER_SHOW",!1),b.wxBanner&&b.wxBanner.hide();var t=g.instance.nativeAds[1].main;t||(t=g.instance.nativeAds[1].logoUrl),t||(t=g.instance.nativeAds[1].icon);var n=b.getURLSuffix(t);n&&n.length>=7?b.httpImageByUrlType(this.nativeIcon,t):b.setImage(this.nativeIcon,t,n),g.instance.nativeAds[1].ad.reportAdShow({adId:g.instance.nativeAds[1].adId}),this.action.setPosition(0,-150,0)}else m==N.OPPO&&(h.getScene().emit("NATIVE_BANNER_SHOW",!0),b.wxBanner&&b.wxBanner.hide()),this.nativeNode.active=!1,this.btnClose.active=!0,this.action.setPosition(0,0,0)},n}(l)).prototype,"action",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=u(S.prototype,"maskNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=u(S.prototype,"btnClose",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=u(S.prototype,"countLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=u(S.prototype,"titleLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=u(S.prototype,"nativeNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=u(S.prototype,"nativeIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=S))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/MapCollision.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./GameManager.ts"],(function(t){"use strict";var i,e,o,s,n,r,a,l,u,h;return{setters:[function(t){i=t.cclegacy,e=t._decorator,o=t.Vec3,s=t.Component},function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.defineProperty,l=t.assertThisInitialized,u=t.initializerDefineProperty},function(t){h=t.GameManager}],execute:function(){var c,d,f;i._RF.push({},"eaa3aT6crpN/6jxYJJ1eRpI","MapCollision",void 0);var p=e.ccclass,y=e.property;t("MapCollision",p("MapCollision")((f=n((d=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return i=t.call.apply(t,[this].concat(s))||this,a(l(i),"out",new o),u(l(i),"isCircle",f,l(i)),i}r(i,t);var e=i.prototype;return e.start=function(){},e.update=function(t){if(!(t>2)&&h.instance.isGameStart)if(this.testPlayer(h.instance.curPlayer,t),this.isCircle)for(var i=0;i<h.instance.ants.length;i++){var e=h.instance.ants[i];e&&1==e.team&&!e.isDead&&e.node&&this.testPlayer(e,t)}else for(var o=0;o<h.instance.ants.length;o++){var s=h.instance.ants[o];s&&!s.isDead&&s.node&&this.testPlayer(s,t)}},e.testPlayer=function(t,i){var e=(t.moveSpeed+t.flyMoveSpeed)*i;if(this.isCircle){var s=o.distance(this.node.worldPosition,t.node.worldPosition),n=.5*this.node.scale.x;s<n&&(this.out=o.subtract(this.out,t.node.worldPosition,this.node.worldPosition).normalize(),this.out.x=this.out.x*e*(1+4*(n-s)),this.out.y=0,this.out.z=this.out.z*e*(1+4*(n-s)),t.node.translate(this.out,1))}else{var r=this.collsionTest(t.node);r&&(1==r?(this.out.x=-e,this.out.z=0,this.out.y=0,t.node.translate(this.out,1)):2==r?(this.out.x=e,this.out.z=0,this.out.y=0,t.node.translate(this.out,1)):3==r?(this.out.x=0,this.out.z=e,this.out.y=0,t.node.translate(this.out,1)):4==r&&(this.out.x=0,this.out.z=-e,this.out.y=0,t.node.translate(this.out,1)))}},e.collsionTest=function(t){if(t){var i=this.node.scale.x+.5,e=this.node.scale.z+.5,o=this.node.worldPosition.x-i/2,s=this.node.worldPosition.x+i/2,n=this.node.worldPosition.z+e/2,r=this.node.worldPosition.z-e/2,a=t.worldPosition;if(a.x>=o&&a.x<=s&&a.z>=r&&a.z<=n){var l=Math.abs(a.x-o),u=Math.abs(a.x-s),h=Math.abs(a.z-n),c=Math.abs(a.z-r);if(l<u&&l<h&&l<c)return 1;if(u<l&&u<h&&u<c)return 2;if(h<l&&h<u&&h<c)return 3;if(c<l&&c<u&&c<h)return 4;console.error("错误的检测")}}return null},i}(s)).prototype,"isCircle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=d))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIHelpMeMin.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./GameManager.ts"],(function(t){"use strict";var e,i,n,o,s,a,c,r,h,l,u,p,d,f,g;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Node,o=t.UITransform,s=t.Vec3,a=t.tween,c=t.Component},function(t){r=t.applyDecoratedDescriptor,h=t.inheritsLoose,l=t.initializerDefineProperty,u=t.assertThisInitialized,p=t.defineProperty},function(t){d=t.SKIN_PACKAGE},function(t){f=t.default},function(t){g=t.GameManager}],execute:function(){var A,w,v,y,M;e._RF.push({},"ebe8cgesAFABrMqsrR7z6Wl","UIHelpMeMin",void 0);var m=i.ccclass,P=i.property;t("UIHelpMeMin",(A=m("UIHelpMeMin"),w=P(n),A((M=r((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,l(u(e),"action",M,u(e)),p(u(e),"target",void 0),p(u(e),"isShowActNode",!1),p(u(e),"tweenAct",void 0),e}h(e,t);var i=e.prototype;return i.onLoad=function(){this.node.getComponent(o).priority=4},i.init=function(t){var e=f.instance.getAntCountByID(t.id);7==t.id&&0==e&&"New"!=d&&(this.node.getChildByPath("Action/zhaomu/zhaomu2").active=!0),this.target=t,this.action.setScale(0,0,0),this.action.active=!1,this.isShowActNode=!1},i.update=function(t){var e=this;if(!(t>2))if(this.target&&this.target.isHelpMeAnt&&g.instance.curPlayer){var i=s.distance(this.target.node.position,g.instance.curPlayer.node.position);i<.7&&i>.15?this.isShowActNode||(this.isShowActNode=!0,this.action.active=!0,this.tweenAct&&this.tweenAct.stop(),this.tweenAct=a(this.action).to(.5,{scale:new s(1,1,1)},{easing:"elasticOut"}).start()):this.isShowActNode&&(this.isShowActNode=!1,this.tweenAct&&this.tweenAct.stop(),this.tweenAct=a(this.action).to(.15,{scale:new s(0,0,0)}).call((function(){e.action.active=!1})).start());var n=g.instance.getScreenPos(this.target.node);n.y+=50,this.action.setPosition(n)}else this.node.removeFromParent(),this.node.destroy()},e}(c)).prototype,"action",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/UITask.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts","./UITaskDone.ts"],(function(t){"use strict";var e,n,i,o,a,s,r,c,l,u,h,d,f,p,v,g,m,I,k,T,b,S,w,C,A;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Node,o=t.Label,a=t.Button,s=t.Sprite,r=t.UITransform,c=t.director,l=t.tween,u=t.Vec3,h=t.ProgressBar,d=t.Component},function(t){f=t.applyDecoratedDescriptor,p=t.inheritsLoose,v=t.initializerDefineProperty,g=t.assertThisInitialized,m=t.defineProperty,I=t.asyncToGenerator},function(t){k=t.CUR_PLATFORM,T=t.PLATFORM_TYPE,b=t.TASK_REWARD_SCALE},function(t){S=t.default},function(t){w=t.Tools},function(t){C=t.GameManager},function(t){A=t.UITaskDone}],execute:function(){var N,y,B,U,O,D,M,P,L,R,x,E,_,V,z,G,J,F,H,Q,W,q,K;e._RF.push({},"ec4842tpbVD16FLupNcGsJY","UITask",void 0);var Y=n.ccclass,j=n.property;t("UITask",(N=Y("UITask"),y=j(i),B=j(i),U=j(o),O=j(o),D=j(a),M=j(a),P=j(i),L=j(i),R=j(i),x=j(s),N((V=f((_=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,v(g(e),"action",V,g(e)),v(g(e),"foodNode",z,g(e)),v(g(e),"rewardLabel",G,g(e)),v(g(e),"timeLabel",J,g(e)),v(g(e),"btnGet",F,g(e)),v(g(e),"btnVideo",H,g(e)),v(g(e),"btnClose",Q,g(e)),v(g(e),"maskNode",W,g(e)),v(g(e),"nativeNode",q,g(e)),v(g(e),"nativeIcon",K,g(e)),m(g(e),"isSetIcon",!1),m(g(e),"isCanJump",!0),m(g(e),"isCloseNative",!1),e}p(e,t);var n=e.prototype;return n.onLoad=function(){this.node.getComponent(r).priority=10,this.updateUI(),c.getScene().on("CLOSE_UI_TASK",this.closeMine,this),this.action.setScale(0,0,0),C.instance.isShowedUITask=!0,this.action.getChildByName("TT").active=k==T.TT,this.action.getChildByName("Else").active=k!=T.TT,this.reportGetUIShow(),C.instance.addSecUI(this.node)},n.reportGetUIShow=function(){if(1==S.instance.taskInfo.isOpen){for(var t=!0,e=1==S.instance.taskInfo.isGet,n=0;n<S.instance.taskInfo.tasks.length;n++){var i=S.instance.taskInfo.tasks[n];if(i)Math.floor(i.progress)<Math.floor(i.max)&&(t=!1)}!e&&t&&S.instance.reportCustom("QueenAntUIShow")}},n.start=function(){if((l(this.action).to(.5,{scale:new u(1,1,1)},{easing:"quintOut"}).start(),this.schedule(this.updateUI,1),w.showBanner(!0),this.initNativeTask(),k==T.VIVO)&&(S.instance.gongxiInterAdRate>0&&w.getRandomInt(0,100)<=S.instance.gongxiInterAdRate)){var t=Math.floor(1e3*S.instance.gongxiInterAdDelay);setTimeout((function(){w.showOVCustumAd("30b45f1ac08a4d4a999b81cccc03870c")}),t)}},n.onBtnCloseClick=function(){w.playSound("click"),this.closeMine()},n.updateUI=function(){this.timeLabel.string=w.timestampToTime2(S.instance.taskInfo.leftTime);for(var t=!0,e=1==S.instance.taskInfo.isGet,n=0,i=0;i<this.foodNode.length;i++){var a=this.foodNode[i],r=S.instance.taskInfo.tasks[i];if(r){if(!this.isSetIcon){var c=a.getChildByName("Icon").getComponent(s);this.setImage(c,r.foodId)}var l=Math.floor(r.progress),u=Math.floor(r.max);n+=u,l<u&&(t=!1),a.getChildByName("Label").getComponent(o).string=l+"/"+u,a.getChildByName("ProgressBar").getComponent(h).progress=l/u}else a.active=!1}this.btnGet.node.getComponent(s).grayscale=e||!t,this.btnVideo.node.getComponent(s).grayscale=e||!t;var d=Math.floor(n*b);this.rewardLabel.string=d.toString(),this.isSetIcon=!0},n.onBtnGetClick=function(){w.playSound("click"),this.getDone(!1)},n.onBtnVideoClick=function(){w.playSound("click");var t=function(){this.getDone(!0)}.bind(this);S.instance.watchVideo("QueenAntOrderReward",t)},n.setImage=function(t,e){var n=C.instance.foodIcons[e];n&&(t.spriteFrame=n)},n.getDone=function(t){if(0!=S.instance.taskInfo.isOpen){for(var e=!0,n=1==S.instance.taskInfo.isGet,i=0,o=0;o<S.instance.taskInfo.tasks.length;o++){var a=S.instance.taskInfo.tasks[o];if(a){var s=Math.floor(a.progress),r=Math.floor(a.max);i+=r,s<r&&(e=!1)}}if(e&&!n){var c=t?2:1,l=Math.floor(i*b*c);S.instance.gold+=l,localStorage.setItem("gold",S.instance.gold.toString()),S.instance.taskInfo.isGet=1,localStorage.setItem("taskInfo",JSON.stringify(S.instance.taskInfo)),k==T.OPPO?this.showUITaskDone(l):w.ShowTip("Claimed");var u=parseInt(localStorage.getItem("queenTaskDoneCount")||"0");u+=1,localStorage.setItem("queenTaskDoneCount",u.toString()),u<=5&&1==S.instance.curSceneId&&(S.instance.reportCustom("QueenAntOrder"+Math.floor(u)),w.reportEvent("QueenAntOrder"+Math.floor(u))),this.closeMine()}else n?w.ShowTip("已领取"):e||w.ShowTip("还未完成任务")}else w.ShowTip("任务已结束")},n.showUITaskDone=function(){var t=I(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.instance.showUI("UITaskDone");case 2:n=t.sent,n.getComponent(A).init({count:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.closeMine=function(){C.instance.subSecUI(this.node),this.node.removeFromParent(),this.node.destroy(),C.instance.isShowedUITask=!1,k!=T.OPPO&&k!=T.VIVO&&w.showBanner(!1),c.getScene().emit("NATIVE_BANNER_SHOW",!0)},n.onBtnCloseClickOPPO=function(){w.playSound("click"),w.getRandomInt(0,100)<S.instance.nativeAdCloseJumpRate&&this.onBtnNativeAdClick(),this.closeMine()},n.initNativeTask=function(){k==T.OPPO?(this.nativeNode.active=!0,this.nativeIcon.node.on("touch-start",this.onTouch,this),this.nativeIcon.node.on("touch-move",this.onTouch,this),this.nativeIcon.node.on("touch-end",this.onTouchEnd,this),this.nativeIcon.node.on("touch-canvel",this.onTouchEnd,this),this.maskNode.on("touch-start",this.onTouch,this),this.maskNode.on("touch-move",this.onTouch,this),this.maskNode.on("touch-end",this.onTouchEnd,this),this.maskNode.on("touch-cancel",this.onTouchEnd,this),this.updateNativeAdShow()):this.nativeNode.active=!1},n.onTouch=function(t){if(this.isCanJump){var e=t.getUILocation().x-cc.winSize.width/2,n=t.getUILocation().y-cc.winSize.height/2,i=this.nativeIcon.node.parent.position,o=this.nativeIcon.node.getComponent(r),a=i.x-o.width/2,s=i.x+o.width/2,c=i.y+o.height/2,l=i.y-o.height/2;e>=a&&e<=s&&n>=l&&n<=c&&(this.isCanJump=!1,this.autoJump())}},n.onTouchEnd=function(t){this.isCanJump=!0},n.autoJump=function(){if(S.instance.nativeBannerDragCan){var t=(new Date).valueOf();if(S.instance.nativeAds[1]&&S.instance.nativeAds[1].ad&&t>=S.instance.nativeBannerDragTimeStamp){var e=t+1e3*S.instance.nativeBannerDragInterval;S.instance.nativeBannerDragTimeStamp=e,this.onBtnNativeAdClick()}}},n.onBtnNativeAdClick=function(){S.instance.nativeAds[1]&&S.instance.nativeAds[1].ad&&S.instance.nativeAds[1].ad.reportAdClick({adId:S.instance.nativeAds[1].adId+""})},n.onBtnNativeCloseClick=function(){S.instance.nativeAds[1]&&S.instance.nativeAds[1].ad&&(this.isCloseNative=!0,this.updateNativeAdShow())},n.updateNativeAdShow=function(){if(S.instance.nativeAds[1]&&S.instance.nativeAds[1].ad&&!this.isCloseNative){this.nativeNode.active=!0,this.btnClose.active=!1,c.getScene().emit("NATIVE_BANNER_SHOW",!1),w.wxBanner&&w.wxBanner.hide();var t=S.instance.nativeAds[1].main;t||(t=S.instance.nativeAds[1].logoUrl),t||(t=S.instance.nativeAds[1].icon);var e=w.getURLSuffix(t);e&&e.length>=7?w.httpImageByUrlType(this.nativeIcon,t):w.setImage(this.nativeIcon,t,e),S.instance.nativeAds[1].ad.reportAdShow({adId:S.instance.nativeAds[1].adId}),this.action.setPosition(0,-150,0)}else k==T.OPPO&&(c.getScene().emit("NATIVE_BANNER_SHOW",!0),w.wxBanner&&w.wxBanner.hide()),this.nativeNode.active=!1,this.btnClose.active=!0,this.action.setPosition(0,0,0)},e}(d)).prototype,"action",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=f(_.prototype,"foodNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=f(_.prototype,"rewardLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=f(_.prototype,"timeLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=f(_.prototype,"btnGet",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=f(_.prototype,"btnVideo",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=f(_.prototype,"btnClose",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=f(_.prototype,"maskNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=f(_.prototype,"nativeNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=f(_.prototype,"nativeIcon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=_))||E));e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./LanguageData.ts"],(function(e){"use strict";var t,i,r,n,o,a,l,c,s,u,p,y;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.Component},function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.defineProperty,l=e.assertThisInitialized,c=e.initializerDefineProperty,s=e.createClass},function(e){u=e.ready,p=e.init,y=e.t}],execute:function(){var d,f,b,h,L,g;t._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var v=i.ccclass,k=i.property,z=i.executeInEditMode;e("LocalizedLabel",(d=v("LocalizedLabel"),f=k({visible:!1}),b=k({displayName:"Key",visible:!0}),d(h=z((g=n((L=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,a(l(t),"label",null),c(l(t),"key",g,l(t)),t}o(t,e);var i=t.prototype;return i.onLoad=function(){u||p("zh"),this.fetchRender()},i.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},i.updateLabel=function(){this.label&&(this.label.string=y(this.key))},s(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(r)).prototype,"key",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n(L.prototype,"_key",[b],Object.getOwnPropertyDescriptor(L.prototype,"_key"),L.prototype),h=L))||h)||h));t._RF.pop()}}}));

System.register("chunks:///_virtual/UIMain.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var n,i,t,a,o,s,r,l,c,u,h,d,p,b,f,m,g,v,T,k,I,L,w,y,S,A,M,_,N,C,B,Z;return{setters:[function(e){n=e.cclegacy,i=e._decorator,t=e.Node,a=e.Label,o=e.ProgressBar,s=e.Button,r=e.Sprite,l=e.Mask,c=e.UITransform,u=e.director,h=e.tween,d=e.Vec3,p=e.Component,b=e.instantiate},function(e){f=e.applyDecoratedDescriptor,m=e.inheritsLoose,g=e.initializerDefineProperty,v=e.assertThisInitialized,T=e.defineProperty,k=e.asyncToGenerator},function(e){I=e.CUR_PLATFORM,L=e.PLATFORM_TYPE,w=e.MAIN_TASK_INFO,y=e.SCENE_INFO,S=e.WORKER_ID,A=e.SOLDIER_ID,M=e.WOOD_WORKER_ID,_=e.BUILDING_INFO,N=e.BUGSAVE_HIDE_INTERVAL},function(e){C=e.default},function(e){B=e.Tools},function(e){Z=e.GameManager}],execute:function(){var z,R,P,U,x,D,E,F,G,O,H,V,W,J,K,j,Y,q,Q,X,$,ee,ne,ie,te,ae,oe,se,re,le,ce,ue,he,de,pe,be,fe,me,ge,ve,Te,ke,Ie,Le,we,ye,Se,Ae,Me,_e,Ne,Ce,Be,Ze,ze,Re,Pe,Ue,xe;n._RF.push({},"eea3cuRbAdBxLg1Yu3Ej96s","UIMain",void 0);var De=i.ccclass,Ee=i.property;e("UIMain",(z=De("UIMain"),R=Ee(t),P=Ee(t),U=Ee(a),x=Ee(a),D=Ee(o),E=Ee(a),F=Ee(a),G=Ee(a),O=Ee(a),H=Ee(s),V=Ee(a),W=Ee(s),J=Ee(a),K=Ee(t),j=Ee(r),Y=Ee(t),q=Ee(t),Q=Ee(t),X=Ee(l),$=Ee(t),ee=Ee(r),ne=Ee(a),ie=Ee(o),te=Ee(a),ae=Ee(t),oe=Ee(r),se=Ee(a),re=Ee(t),z((ue=f((ce=function(e){function n(){for(var n,i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];return n=e.call.apply(e,[this].concat(t))||this,g(v(n),"top",ue,v(n)),g(v(n),"bottom",he,v(n)),g(v(n),"goldLabel",de,v(n)),g(v(n),"woodLabel",pe,v(n)),g(v(n),"sceneProgressBar",be,v(n)),g(v(n),"sceneProgressLabel",fe,v(n)),g(v(n),"workerLabel",me,v(n)),g(v(n),"soldierLabel",ge,v(n)),g(v(n),"woodAntLabel",ve,v(n)),g(v(n),"btnTask",Te,v(n)),g(v(n),"btnTaskTimeLabel",ke,v(n)),g(v(n),"btnLuZhi",Ie,v(n)),g(v(n),"luZhiTimeLabel",Le,v(n)),g(v(n),"luZhiIcons",we,v(n)),g(v(n),"nativeIcon",ye,v(n)),T(v(n),"isCanClick",!0),g(v(n),"mainTaskNode",Se,v(n)),g(v(n),"mainTaskSearchNode",Ae,v(n)),g(v(n),"mainTaskGuideNode",Me,v(n)),g(v(n),"mainTaskGuideMask",_e,v(n)),g(v(n),"mainTaskHandActionNode",Ne,v(n)),g(v(n),"mainTaskIcon",Ce,v(n)),g(v(n),"mainTaskDescLabel",Be,v(n)),g(v(n),"mainTaskProgressBar",Ze,v(n)),g(v(n),"mainTaskProgressLabel",ze,v(n)),g(v(n),"bugSaveNode",Re,v(n)),g(v(n),"bugSaveIcon",Pe,v(n)),g(v(n),"bugSaveTimeLabel",Ue,v(n)),g(v(n),"btnFlyNode",xe,v(n)),T(v(n),"isCanChangeMainTaskIcon",!0),T(v(n),"_handTimer",0),T(v(n),"_handTimer2",0),T(v(n),"_handTimer3",0),T(v(n),"canUpdateMainTask",!0),T(v(n),"_isCanJump",!0),n}m(n,e);var i=n.prototype;return i.onLoad=function(){this.node.getComponent(c).priority=5;var e=cc.winSize,n=e.height/e.width>2?120:60;this.top.setPosition(0,e.height/2-n,0),this.bottom.setPosition(0,-e.height/2,0),this.schedule(this.updateLabel,.1),this.updateTask(),this.schedule(this.updateTask,1),this.updateMainTask(),this.schedule(this.updateMainTask,.2),this.schedule(this.updateLuZhi,.2),this.schedule(this.updateBugSaveTime,1),this.schedule(this.updateFlyBtn,.2),this.btnLuZhi.node.active=I==L.TT,u.getScene().on("REFRESH_LUZHI",this.updateLuZhi,this),u.getScene().on("NATIVE_BANNER_UPDATE",this.refreshNativeIcon,this),u.getScene().on("BUG_SAVE_UPDATE",this.onBugSaveUpdate,this)},i.update=function(e){if(!(e>2)){this._handTimer2+=3*e,this.mainTaskGuideNode.active&&(this._handTimer+=3*e,this.mainTaskHandActionNode.setPosition(-10*Math.sin(this._handTimer),10*Math.sin(this._handTimer),0)),this._handTimer3+=5*e;var n=.45+.05*Math.sin(this._handTimer3);this.bugSaveIcon.node.setScale(n,n,1)}},i.updateMainTask=function(){if(this.canUpdateMainTask){var e=C.instance.mainTaskInfo.id;if(null==e)this.mainTaskNode.active&&(this.mainTaskNode.active=!1);else{this.mainTaskNode.active||(this.mainTaskNode.setScale(0,0,1),this.mainTaskNode.active=!0,h(this.mainTaskNode).to(.5,{scale:new d(1,1,1)},{easing:"quintOut"}).start()),this.isCanChangeMainTaskIcon&&(this.isCanChangeMainTaskIcon=!1,this.setMainTaskImage(this.mainTaskIcon,"textreus/tasks/"+w[e].icon+"/spriteFrame"),w[e+1]&&this.preLoadNextTaskIcon("textreus/tasks/"+w[e+1].icon+"/spriteFrame"));var n=C.instance.mainTaskInfo.progress,i=w[e].count;n>i&&(n=i);var t=n/i;t=B.clampf(t,0,1),this.mainTaskProgressBar.progress=t,this.mainTaskProgressLabel.string=Math.floor(n)+"/"+Math.floor(i),this.mainTaskDescLabel.string=w[e].desc;var a=t>=1,o=1==C.instance.mainTaskInfo.isGet;if(a&&!o){this.canUpdateMainTask=!1,this.mainTaskGet();var s=function(){this.mainTaskNext(),this.canUpdateMainTask=!0}.bind(this);return void h(this.mainTaskNode).to(.3,{scale:new d(0,0,0)},{easing:"sineOut"}).delay(.3).call(s).to(.3,{scale:new d(1,1,1)},{easing:"sineIn"}).start()}}}},i.setMainTaskImage=function(){var e=k(regeneratorRuntime.mark((function e(n,i){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.loadAssetByBundle(Z.instance.bundleUI,i);case 2:t=e.sent,n&&n.node&&t&&(n.spriteFrame=t);case 4:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),i.preLoadNextTaskIcon=function(){var e=k(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.loadAssetByBundle(Z.instance.bundleUI,n);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i.updateLabel=function(){this.goldLabel.string=Math.floor(C.instance.gold).toString(),this.woodLabel.string=Math.floor(C.instance.wood).toString();var e=C.instance.gold/y[C.instance.curSceneId-1].golds;e=B.clampf(e,0,1);var n=C.instance.getAntsCount(S),i=C.instance.getAntsCount(A),t=C.instance.getAntsCount(M);if(this.workerLabel.string=Math.floor(n).toString(),this.soldierLabel.string=Math.floor(i).toString(),this.woodAntLabel.string=Math.floor(t).toString(),n>0&&!this.workerLabel.node.parent.active){this.workerLabel.node.parent.active=!0;var a=this.workerLabel.node.parent.position.clone();this.workerLabel.node.parent.setPosition(a.x+200,a.y,0),h(this.workerLabel.node.parent).to(.3,{position:a}).start()}if(i>0&&!this.soldierLabel.node.parent.active){this.soldierLabel.node.parent.active=!0;var o=this.soldierLabel.node.parent.position.clone();this.soldierLabel.node.parent.setPosition(o.x+200,o.y,0),h(this.soldierLabel.node.parent).to(.3,{position:o}).start()}if(t>0&&!this.woodAntLabel.node.parent.active){this.woodAntLabel.node.parent.active=!0;var s=this.woodAntLabel.node.parent.position.clone();this.woodAntLabel.node.parent.setPosition(s.x+200,s.y,0),h(this.woodAntLabel.node.parent).to(.3,{position:s}).start()}if(C.instance.wood>0&&!this.woodLabel.node.parent.active){this.woodLabel.node.parent.active=!0;var r=this.woodLabel.node.parent.position.clone();this.woodLabel.node.parent.setPosition(r.x-200,r.y,0),h(this.woodLabel.node.parent).to(.3,{position:r}).start()}},i.updateTask=function(){var e=1==C.instance.taskInfo.isGet;1!=C.instance.taskInfo.isOpen||e?this.btnTask.node.active&&(this.btnTask.node.active=!1):(this.btnTask.node.active||(this.btnTask.node.active=!0),this.btnTaskTimeLabel.string=B.timestampToTime2(C.instance.taskInfo.leftTime))},i.onBtnSetClick=function(){B.playSound("click"),Z.instance.showUI("UISet")},i.onBtnTaskClick=function(){B.playSound("click"),Z.instance.showUI("UITask")},i.onBtnMainTaskClick=function(){var e=this;if(B.playSound("click"),null==C.instance.mainTaskInfo.id);else if(1==C.instance.mainTaskInfo.isGet);else{var n=C.instance.mainTaskInfo.id;C.instance.mainTaskInfo.progress>=w[n].count||this._isCanJump&&(this._isCanJump=!1,u.getScene().emit("MAIN_TASK_CAMERA_JUMP"),this.scheduleOnce((function(){e._isCanJump=!0}),2))}},i.mainTaskGet=function(){for(var e=this,n=C.instance.mainTaskInfo.id,i=w[n],t=0;t<i.rewardCount;t++)0==i.rewardID?C.instance.gold+=1:1==i.rewardID&&(C.instance.wood+=1);for(var a=this.mainTaskNode.getComponent(c).convertToWorldSpaceAR(this.node.position).subtract3f(cc.winSize.width/2,cc.winSize.height/2,0),o=[],s=B.getCirclePoints(70,a.x,a.y,5),r=0,l=0;l<i.rewardCount;l++){var u=s[r].x+B.getRandom(-20,20),p=s[r].z+B.getRandom(-20,20);o.push(new d(u,0,p)),++r>=s.length&&(r=0)}for(var f=this.goldLabel.node.parent.getChildByName("energy"),m=f.getComponent(c).convertToWorldSpaceAR(this.node.position).subtract3f(cc.winSize.width/2,cc.winSize.height/2,0),g=function(n){var i=o[n],t=new d(i.x,i.z,0),s=b(f);e.node.addChild(s),s.setScale(.8,.8,1),s.setPosition(a),h(s).to(.35,{position:t},{easing:"sineOut"}).to(.2,{position:m},{easing:"sineIn"}).call((function(){s.removeFromParent(),s.destroy()})).start()},v=0;v<o.length;v++)g(v);C.instance.reportCustom("TaskEnd"+Math.floor(n)),B.reportEvent("mission"+Math.floor(n))},i.mainTaskNext=function(){var e=C.instance.mainTaskInfo.id,n=w[e];n.openID>=0&&C.instance.nextGameStep(n.openID);var i=e+1,t=w[i];if(t&&t.scene==C.instance.curSceneId){var a={id:i,progress:0,isGet:0};if(5==t.type)for(var o=t.targetID,s=t.targetSid,r=0;r<Z.instance.buildings.length;r++){var l=Z.instance.buildings[r];if(l.id==o&&l.sid==s&&2==l.info.state){a.progress=1;break}}else if(2==t.type){var c=t.targetID,u=C.instance.getAntCountByID(c),h=_[c].maxCount;Math.floor(h-u)<t.count&&(a.progress=t.count)}C.instance.mainTaskInfo=a,C.instance.reportCustom("TaskStart"+Math.floor(a.id)),Z.instance.tryTipMainTaskTarget()}else C.instance.mainTaskInfo={};localStorage.setItem("mainTaskInfo",JSON.stringify(C.instance.mainTaskInfo)),this.isCanChangeMainTaskIcon=!0,this.updateMainTask()},i.onBugSaveUpdate=function(){var e=k(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z.instance._saveBug){e.next=9;break}return e.next=3,B.loadAssetByBundle(Z.instance.bundleUI,"textreus/ants/ant"+Z.instance._saveBug.id+"/spriteFrame");case 3:(n=e.sent)&&(this.bugSaveIcon.spriteFrame=n),this.updateBugSaveTime(),this.bugSaveNode.active=!0,e.next=10;break;case 9:this.bugSaveNode.active=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.updateBugSaveTime=function(){if(Z.instance._hasSaveBug){var e=Math.floor(N-Z.instance._saveBugTimer);this.bugSaveTimeLabel.string=B.timestampToTime2(e)}},i.onBtnBugSaveClick=function(){B.playSound("click"),u.getScene().emit("SHOW_BUGSAVE_UI",Z.instance._saveBug)},i.updateFlyBtn=function(){},i.updateLuZhi=function(){if(I==L.TT)if(B.isRecord)if(this.luZhiTimeLabel.node.active||(this.luZhiTimeLabel.node.active=!0),this.luZhiIcons[0].active&&(this.luZhiIcons[0].active=!1),this.luZhiIcons[1].active||(this.luZhiIcons[1].active=!0),this.luZhiIcons[2].active&&(this.luZhiIcons[2].active=!1),0==B.recordTime)this.luZhiTimeLabel.string="";else{var e=(new Date).valueOf(),n=Math.floor((e-B.recordTime)/1e3);this.luZhiTimeLabel.string=B.timestampToTime2(n)}else B.videoPath?(this.luZhiTimeLabel.node.active&&(this.luZhiTimeLabel.node.active=!1),this.luZhiIcons[0].active&&(this.luZhiIcons[0].active=!1),this.luZhiIcons[1].active&&(this.luZhiIcons[1].active=!1),this.luZhiIcons[2].active||(this.luZhiIcons[2].active=!0)):(this.luZhiTimeLabel.node.active&&(this.luZhiTimeLabel.node.active=!1),this.luZhiIcons[0].active||(this.luZhiIcons[0].active=!0),this.luZhiIcons[1].active&&(this.luZhiIcons[1].active=!1),this.luZhiIcons[2].active&&(this.luZhiIcons[2].active=!1))},i.onBtnLuZhiClick=function(){B.isRecord?B.TTStopRecord():B.videoPath?B.TTShareRecordVideo():B.TTStartRecorder(),this.updateLuZhi()},i.refreshNativeIcon=function(){if(C.instance.nativeAds[0]&&C.instance.nativeAds[0].ad&&!C.instance.nativeAds[0].isClose){this.nativeIcon.node.active||(this.nativeIcon.node.active=!0);var e=C.instance.nativeAds[0].icon,n=B.getURLSuffix(e);n&&n.length>=7?B.httpImageByUrlType(this.nativeIcon,e):B.setImage(this.nativeIcon,e,n)}else this.nativeIcon.node.active&&(this.nativeIcon.node.active=!1)},i.onBtnFlyClick=function(){for(var e=function(e){var n=Z.instance.buildings[e];if(4==n.id){var i=function(){var e=0==n.info.useTimes;Z.instance.curPlayer.setFly(e),B.playSound("fly"),n.info.useTimes+=1,n.updateFlyTime(),u.getScene().emit("MAIN_TASK_PROGRESS",7,4)};return 0==n.info.useTimes?(Z.instance.uiFly.init(i),u.emit("CLEAR_GUIDE_ARROW")):Z.instance.uiFly.init(i),{v:void 0}}},n=0;n<Z.instance.buildings.length;n++){var i=e(n);if("object"==typeof i)return i.v}},i.onBtnNativeAdClick=function(){C.instance.nativeAds[0]&&C.instance.nativeAds[0].ad&&C.instance.nativeAds[0].ad.reportAdClick({adId:C.instance.nativeAds[0].adId+""})},i.onBtnNativeCloseClick=function(){if(C.instance.nativeAds[0]&&C.instance.nativeAds[0].ad){var e=(new Date).valueOf();C.instance.nativeAds[0].openTime=e+3e4,C.instance.nativeAds[0].isClose=!0,this.refreshNativeIcon()}},n}(p)).prototype,"top",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=f(ce.prototype,"bottom",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=f(ce.prototype,"goldLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=f(ce.prototype,"woodLabel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=f(ce.prototype,"sceneProgressBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=f(ce.prototype,"sceneProgressLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=f(ce.prototype,"workerLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=f(ce.prototype,"soldierLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=f(ce.prototype,"woodAntLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=f(ce.prototype,"btnTask",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=f(ce.prototype,"btnTaskTimeLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=f(ce.prototype,"btnLuZhi",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=f(ce.prototype,"luZhiTimeLabel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=f(ce.prototype,"luZhiIcons",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ye=f(ce.prototype,"nativeIcon",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=f(ce.prototype,"mainTaskNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=f(ce.prototype,"mainTaskSearchNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=f(ce.prototype,"mainTaskGuideNode",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=f(ce.prototype,"mainTaskGuideMask",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=f(ce.prototype,"mainTaskHandActionNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=f(ce.prototype,"mainTaskIcon",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=f(ce.prototype,"mainTaskDescLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=f(ce.prototype,"mainTaskProgressBar",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=f(ce.prototype,"mainTaskProgressLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=f(ce.prototype,"bugSaveNode",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=f(ce.prototype,"bugSaveIcon",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=f(ce.prototype,"bugSaveTimeLabel",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=f(ce.prototype,"btnFlyNode",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=ce))||le));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIBugSave.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(e){"use strict";var t,i,n,a,r,o,s,c,u,l,h,d,f,g,p,m,b,v,T,y,B,S;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Node,a=e.Label,r=e.Sprite,o=e.UITransform,s=e.tween,c=e.Vec3,u=e.director,l=e.Component},function(e){h=e.applyDecoratedDescriptor,d=e.inheritsLoose,f=e.initializerDefineProperty,g=e.assertThisInitialized,p=e.defineProperty,m=e.asyncToGenerator},function(e){b=e.CUR_PLATFORM,v=e.PLATFORM_TYPE,T=e.BUGSAVE_HIDE_INTERVAL},function(e){y=e.default},function(e){B=e.Tools},function(e){S=e.GameManager}],execute:function(){var w,I,L,_,U,k,N,P,C,R,x,E,z,A,V,O,M;t._RF.push({},"f41d8Ukh39PlZbSYsI6lXQB","UIBugSave",void 0);var F=i.ccclass,D=i.property;e("UIBugSave",(w=F("UIBugSave"),I=D(n),L=D(n),_=D(a),U=D(r),k=D(n),N=D(a),P=D(a),w((x=h((R=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,f(g(t),"action",x,g(t)),f(g(t),"maskNode",E,g(t)),f(g(t),"descLabel",z,g(t)),f(g(t),"icon",A,g(t)),f(g(t),"shuxing",V,g(t)),f(g(t),"tipLabel",O,g(t)),f(g(t),"timeLabel",M,g(t)),p(g(t),"ant",void 0),p(g(t),"actTween",void 0),p(g(t),"btnParentNode",void 0),t}d(t,e);var i=t.prototype;return i.onLoad=function(){this.node.getComponent(o).priority=6,this.action.getChildByName("TT").active=b==v.TT,this.action.getChildByName("Else").active=b!=v.TT,this.schedule(this.updateTime,1)},i.refreshUI=function(e){null!=e&&this.ant==e||(this.btnParentNode=b==v.TT?this.action.getChildByName("TT"):this.action.getChildByName("Else"),this.ant=e,e?(S.instance.addSecUI(this.node),this.action.active||(y.instance.reportCustom("BugSaveUIShow"),B.reportEvent("BugSaveUIShow"),this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=s(this.action).to(.5,{scale:new c(1,1,1)},{easing:"quintOut"}).start(),this.setBugImage(this.icon,"textreus/ants/ant"+this.ant.id+"/spriteFrame"),this.ant.id>=10&&this.ant.id<=21?(this.descLabel.string="I'm looking for a new home, can you take me in? I can help you carry food.",this.tipLabel.string="Resource",this.shuxing[0].active=!0,this.shuxing[1].active=!1):(this.descLabel.string="I'm looking for a new home, can you take me in? I can help you guard your home.",this.tipLabel.string="Battle",this.shuxing[0].active=!1,this.shuxing[1].active=!0),this.updateTime(),B.showBanner(!0))):this.hideSelf())},i.updateTime=function(){if(S.instance._hasSaveBug){var e=Math.floor(T-S.instance._saveBugTimer);this.timeLabel.string=B.timestampToTime2(e)}else this.hideSelf()},i.hideSelf=function(){this.action.active&&(S.instance.subSecUI(this.node),this.actTween&&this.actTween.stop(),this.action.active=!1,this.maskNode.active=!1,b!=v.OPPO&&b!=v.VIVO&&B.showBanner(!1))},i.setBugImage=function(){var e=m(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.loadAssetByBundle(S.instance.bundleUI,i);case 2:(n=e.sent)&&(t.spriteFrame=n);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),i.onBtnVideoClick=function(){if(B.playSound("click"),this.ant){S.instance._saveBugTimerPause=!0;var e=function(){S.instance._saveBugTimerPause=!1,this.sendReward()}.bind(this),t=function(){S.instance._saveBugTimerPause=!1}.bind(this);y.instance.watchVideo("BugSave",e,t)}},i.sendReward=function(){this.ant&&(S.instance.bugSaveSuccess(),this.refreshUI(null))},i.onBtnCloseClick=function(){B.playSound("click"),u.getScene().emit("SHOW_BUGSAVE_UI",null),u.getScene().emit("NATIVE_BANNER_SHOW",!0),B.showInterstitial()},t}(l)).prototype,"action",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=h(R.prototype,"maskNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=h(R.prototype,"descLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=h(R.prototype,"icon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=h(R.prototype,"shuxing",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=h(R.prototype,"tipLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=h(R.prototype,"timeLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=R))||C));t._RF.pop()}}}));

System.register("chunks:///_virtual/Ant.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GoldFly.ts","./AIController.ts","./UIAntDead.ts","./UIEnemyMark.ts","./UIBlood.ts","./UIHelpMeMin.ts","./UIBugSaveMin.ts","./GameManager.ts"],(function(t){"use strict";var i,e,o,n,s,a,h,d,r,c,l,u,m,f,p,y,v,g,_,S,w,A,I,P,F,C,T,M,R,E,N,x,b,U;return{setters:[function(t){i=t.cclegacy,e=t._decorator,o=t.Vec3,n=t.SkeletalAnimation,s=t.AnimationComponent,a=t.ParticleSystem,h=t.director,d=t.tween,r=t.Component},function(t){c=t.inheritsLoose,l=t.defineProperty,u=t.assertThisInitialized,m=t.createClass,f=t.asyncToGenerator},function(t){p=t.ANT_INFO,y=t.ANT_LIFE_STATE,v=t.FLY_TIME,g=t.SOLDIER_ID,_=t.FOOD_INFO,S=t.CAIJI_CD,w=t.MONEY_TEMP_SCALE,A=t.CUR_PLATFORM,I=t.PLATFORM_TYPE,P=t.SKIN_PACKAGE},function(t){F=t.default},function(t){C=t.Tools},function(t){T=t.GoldFly},function(t){M=t.AIController},function(t){R=t.UIAntDead},function(t){E=t.UIEnemyMark},function(t){N=t.UIBlood},function(t){x=t.UIHelpMeMin},function(t){b=t.UIBugSaveMin},function(t){U=t.GameManager}],execute:function(){var D;i._RF.push({},"f45fex/zUJPFpsNbSntJkNY","Ant",void 0);var B=e.ccclass;e.property,t("Ant",B("Ant")(D=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,l(u(i),"out",new o),l(u(i),"aiController",void 0),l(u(i),"sid",-1),l(u(i),"id",-1),l(u(i),"team",0),l(u(i),"att",0),l(u(i),"blood",0),l(u(i),"bloodMax",0),l(u(i),"attCD",1),l(u(i),"attRatio",1),l(u(i),"moveSpeed",1),l(u(i),"searchRatio",.3),l(u(i),"bodyRatio",.5),l(u(i),"curFoodCount",0),l(u(i),"maxFoodCount",0),l(u(i),"isAI",!1),l(u(i),"isDead",!1),l(u(i),"isMoving",!1),l(u(i),"_attTimer",0),l(u(i),"_lastAnimName",""),l(u(i),"enemy",null),l(u(i),"body",void 0),l(u(i),"body1",void 0),l(u(i),"foodNode",void 0),l(u(i),"anim",void 0),l(u(i),"tempEatFoods",[]),l(u(i),"firstPos",void 0),l(u(i),"isFly",!1),l(u(i),"flyNode",void 0),l(u(i),"chuiziNode",void 0),l(u(i),"flyMoveSpeed",0),l(u(i),"deadUI",void 0),l(u(i),"shadow",void 0),l(u(i),"tuowei",void 0),l(u(i),"flyTuowei",void 0),l(u(i),"isHelpMeAnt",!1),l(u(i),"isBugSave",!1),l(u(i),"flyTimer",0),l(u(i),"mulPush",new o(.01,0,.01)),l(u(i),"isFighting",!1),l(u(i),"fightingTimer",0),l(u(i),"hitPushDir",new o),l(u(i),"hitPushVelocity",0),l(u(i),"_foodTimer",0),l(u(i),"_tempWood",void 0),l(u(i),"_tempWoodIndex",-1),l(u(i),"_tempWoodTimer",0),l(u(i),"_tempWoodSoundTimer",0),l(u(i),"_isShowHelpMeUI",!1),l(u(i),"_isShowBugSaveUI",!1),l(u(i),"_rebornTimer",0),i}c(i,t);var e=i.prototype;return e.init=function(t){this.id=t.id,this.team=t.team,this.sid=t.sid,this.isAI=t.isAI,this.att=t.att,this.bloodMax=this.blood=t.blood,this.attCD=t.attCD,this.attRatio=t.attRatio,this.searchRatio=p[this.id].searchRatio,this.moveSpeed=t.moveSpeed,this.bodyRatio=t.bodyRatio,this.isDead=t.state==y.DEAD,this.curFoodCount=0,this.maxFoodCount=1,this._attTimer=this.attCD,this.isHelpMeAnt=t.isHelpMeAnt,this.isBugSave=t.isBugSave,this.body=this.node.getChildByName("body"),this.body1=this.node.getChildByName("body1"),this.foodNode=this.node.getChildByName("Food"),this.shadow=this.node.getChildByName("Shadow");var i=this.body.getComponent(n);if(i&&(this.anim=i),i||(this.anim=this.body.getComponent(s)),7==this.id?this.maxFoodCount=2:10!=this.id&&11!=this.id&&12!=this.id&&13!=this.id&&14!=this.id&&15!=this.id&&16!=this.id&&17!=this.id&&18!=this.id&&19!=this.id&&20!=this.id&&21!=this.id||(this.maxFoodCount=3),this.isAI?(this.aiController=this.node.addComponent(M),this.aiController.init({id:this.id,ant:this})):(this.id=-999,this.maxFoodCount=0,this.flyNode=this.node.getChildByPath("body/mixamorig:Spine1 Socket/Ant_chibang"),this.chuiziNode=this.node.getChildByPath("body/mixamorig:RightHandIndex1 Socket/chuizi"),this.tuowei=this.node.getChildByName("eff_tuowei").getComponent(a),this.flyTuowei=this.node.getChildByName("eff_fly_tuowei").getComponent(a),this.flyNode.active=!1,this.chuiziNode.active=!0,h.getScene().on("MOVE_PLAYER_ANT",this.onMoveHandler,this),h.getScene().on("SPEED_UP_ANT",this.onSpeedUp,this),h.getScene().on("ON_PLAYER_PROGRESS",this.onSaveAnt,this)),h.getScene().on("ON_QUALITY_CHANGE",this.onQualityChange,this),this.isDead&&(this.isDead=!1,this.dead(),this.createUIAntDead()),this.firstPos=this.node.position.clone(),1==this.team&&(this.createEnemyMarkUI(),3!=this.id&&4!=this.id&&5!=this.id||this.createEnemyBloodUI()),this.isHelpMeAnt)this.body1&&(this.body.active=!1,this.body1.active=!0),this.node.setScale(0,0,0),d(this.node).to(.5,{scale:new o(1,1,1)},{easing:"elasticOut"}).start(),this.scheduleOnce(this.createHelpMeMinUI,1.5);else if(this.isBugSave){var e=this.node.getChildByName("liulei");e&&(e.active=!0),this.createBugSaveMinUI()}else this.body1&&(this.body1.active=!1)},e.start=function(){this.onQualityChange()},e.onSaveAnt=function(){this.changeAnimation("Caiji")},e.onQualityChange=function(){this.shadow&&(this.shadow.active=0==F.instance.qualityOpen)},e.createUIAntDead=function(){var t=f(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.deadUI){t.next=6;break}return t.next=3,U.instance.showUI("UIAntDead");case 3:i=t.sent,this.deadUI=i.getComponent(R),this.deadUI.init(this);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.createEnemyMarkUI=function(){var t=f(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.instance.showUI("UIEnemyMark");case 2:i=t.sent,i.getComponent(E).init(this);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.createEnemyBloodUI=function(){var t=f(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.instance.showUI("UIBlood");case 2:i=t.sent,i.getComponent(N).init(this);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.createHelpMeMinUI=function(){var t=f(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.instance.showUI("UIHelpMeMin");case 2:i=t.sent,i.getComponent(x).init(this);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.createBugSaveMinUI=function(){var t=f(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.instance.showUI("UIBugSaveMin");case 2:i=t.sent,i.getComponent(b).init(this);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.setFly=function(t){if(!this.isAI&&!this.isFly)if(this.isFly=!0,this.flyTimer=0,this.flyNode.active=!0,this.flyMoveSpeed=.7*this.moveSpeed,this.unschedule(this.updateFly),this.schedule(this.updateFly,1),t)F.instance.reportCustom("TryflyFree");else{var i=parseInt(localStorage.getItem("tryflyCount")||"0");i+=1,localStorage.setItem("tryflyCount",i.toString()),i<3&&(F.instance.reportCustom("Tryfly"+Math.floor(i)),C.reportEvent("Tryfly"+Math.floor(i))),F.instance.flyTimes+=1,localStorage.setItem("flyTimes",F.instance.flyTimes.toString())}},e.updateFly=function(){this.isFly&&(this.flyTimer+=1,this.flyTimer>=v&&(this.isFly=!1,this.flyMoveSpeed=0,this.flyNode.active=!1,C.playSound("fly")))},e.updateTuowei=function(){this.isMoving?this.isFly?(this.tuowei.node.active&&(this.tuowei.node.active=!1),this.flyTuowei.node.active||(this.flyTuowei.node.active=!0,this.flyTuowei.stop(),this.flyTuowei.clear(),this.flyTuowei.play())):(this.flyTuowei.node.active&&(this.flyTuowei.node.active=!1),this.tuowei.node.active||(this.tuowei.node.active=!0,this.tuowei.stop(),this.tuowei.clear(),this.tuowei.play())):(this.tuowei.node.active&&(this.tuowei.node.active=!1),this.flyTuowei.node.active&&(this.flyTuowei.node.active=!1))},e.onMoveHandler=function(t,i){this.isDead?this.isMoving=!1:(i&&this.node.setRotationFromEuler(0,180-i,0),this.isMoving=t)},e.onSpeedUp=function(){},e.update=function(t){t>2||(this.isDead||this.isHelpMeAnt||this.isBugSave?this.isAI&&0==this.team&&(this.updateRebornAnts(t),this.isHelpMeAnt&&this.updateShowHelpMeUI(),this.isBugSave&&this.updateShowBugSaveUI()):(!this.isAttacker&&this.isAI||(this.updateFindEnemy(),this.updateAttack(t)),this.isAI||this.updateTuowei(),this.updateMove(t),this.updateFindFood(t),this.updateEatGold(),this.updateHitPush(t),this.updateAddBlood(t),g.indexOf(this.id)>-1&&this.updatePush(t)))},e.updatePush=function(t){for(var i=0;i<U.instance.ants.length;i++){var e=U.instance.ants[i];g.indexOf(e.id)>-1&&e!=this&&this.isAI&&o.distance(e.node.worldPosition,this.node.worldPosition)<this.bodyRatio/2+e.bodyRatio/2&&(this.out=o.subtract(this.out,this.node.worldPosition,e.node.worldPosition).normalize(),this.node.translate(this.out.multiply(this.mulPush),1))}},e.updateAddBlood=function(t){0!=this.team||this.isDead||this.isFighting&&(this.fightingTimer+=t,this.fightingTimer>=3&&(this.fightingTimer=0,this.isFighting=!1,this.schedule(this.updateBloodAdd,1)))},e.updateBloodAdd=function(){this.isFighting||this.isDead?this.unschedule(this.updateBloodAdd):this.blood=C.clampf(this.blood+=this.bloodMax/5,0,this.bloodMax)},e.updateHitPush=function(t){3!=this.id&&4!=this.id&&5!=this.id||this.hitPushVelocity>0&&(this.out.x=this.hitPushDir.x*this.hitPushVelocity*t,this.out.y=0,this.out.z=this.hitPushDir.z*this.hitPushVelocity*t,this.node.translate(this.out,1),this.hitPushVelocity=C.clampf(this.hitPushVelocity-2.5*t,0,this.hitPushVelocity))},e.updateMove=function(t){("Attack"!=this._lastAnimName&&"Fly_Attack"!=this._lastAnimName||!this.isAI)&&(this.isMoving?(this.changeAnimation("Run"),this.out.x=0,this.out.z=.016*-(this.moveSpeed+this.flyMoveSpeed),this.out.y=0,this.node.translate(this.out,0)):"Famu"==this._lastAnimName||"Fly_Famu"==this._lastAnimName||"Caiji"==this._lastAnimName||"Fly_Caiji"==this._lastAnimName||this.changeAnimation("Idle"))},e.updateFindEnemy=function(){this.enemy=null;for(var t=999,i=-1,e=0;e<U.instance.ants.length;e++){var n=U.instance.ants[e];if(n.team!=this.team&&n.isAI&&!n.isDead){var s=o.distance(this.node.worldPosition,n.node.worldPosition);s<this.searchRatio&&s<t&&(t=s,i=e)}}i>-1&&(this.enemy=U.instance.ants[i])},e.updateAttack=function(t){if(this._attTimer+=t,this._attTimer>=this.attCD&&this.enemy&&!this.enemy.isDead){this._attTimer=0;var i=this.attRatio+this.bodyRatio+this.enemy.bodyRatio;o.distance(this.node.worldPosition,this.enemy.node.worldPosition)<=i&&(this.enemy&&!this.enemy.isDead&&this.node.lookAt(this.enemy.node.worldPosition),this.isFighting=!0,this.fightingTimer=0,this.changeAnimation("Attack"),this.unschedule(this.attackOnce),this.scheduleOnce(this.attackOnce,this.attCD-.1))}},e.attackOnce=function(){if(this.enemy&&!this.enemy.isDead){if(!this.isAI){var t=this.enemy.node.worldPosition.clone();C.playSound("attack"),U.instance.showEffect("eff_EnemyHit",t,1)}this.enemy.subBlood(this.att,this)}this._lastAnimName=""},e.changeAnimation=function(t){this.isDead||(this.isFly&&(t="Fly_"+t),this.chuiziNode&&("Famu"==t||"Fly_Famu"==t?this.chuiziNode.active||(this.chuiziNode.active=!0):this.chuiziNode.active&&(this.chuiziNode.active=!1)),("Attack"==t||"Fly_Attack"==t||"Dead"==t||this._lastAnimName!=t&&"Attack"!=this._lastAnimName&&"Fly_Attack"!=this._lastAnimName)&&(this.anim&&this.anim.play(t),this._lastAnimName=t))},e.updateFindFood=function(t){if(!this.isAI){if(this.isMoving)this._tempWood=null,this._tempWoodIndex=-1,0!=this._tempWoodTimer&&h.getScene().emit("ON_PLAYER_PROGRESS_CLEAR"),this._tempWoodTimer=0,this._tempWoodSoundTimer=0;else if(this._tempWood&&(this.changeAnimation("Famu"),0!=this._tempWoodTimer||this._tempWood.isMoneyFood||h.getScene().emit("ON_PLAYER_PROGRESS",3),this._tempWoodTimer+=t,this.isAI||(this._tempWoodSoundTimer+=t,this._tempWoodSoundTimer>=1&&(this._tempWoodSoundTimer=0,C.playSound("hitwood"),U.instance.showEffect("eff_Famu",this._tempWood.piece[this._tempWoodIndex].worldPosition,1))),this._tempWoodTimer>=3))return this.changeAnimation("Idle"),this._tempWoodTimer=0,this._tempWoodSoundTimer=0,this.eatFood(this._tempWood,this._tempWood.piece[this._tempWoodIndex],this._tempWoodIndex),this._tempWood=null,void(this._tempWoodIndex=-1);for(var i=0;i<U.instance.foods.length;i++){var e=U.instance.foods[i];if(e&&!e.isDead&&!e.isMoneyFood)if(0==_[e.id].type||e.isTempFood||this.isAI){if(this.curFoodCount>=this.maxFoodCount+F.instance.playerFoodCountMax)return;var n=new o(e.node.worldPosition.x,0,e.node.worldPosition.z);if(o.distance(this.node.position,n)<.6)for(var s=0;s<e.piece.length;s++)if(e.info.foodLeft[s]>0){var a=new o(e.piece[s].worldPosition.x,0,e.piece[s].worldPosition.z);if(o.distance(a,this.node.worldPosition)<.2){"Run"!=this._lastAnimName&&this.changeAnimation("Caiji");var d=this.isFly?S[1]:S[0];return 0==this._foodTimer&&h.getScene().emit("ON_PLAYER_PROGRESS",d),this._foodTimer+=t,void(this._foodTimer>=d&&this.eatFood(e,e.piece[s],s))}}}else if(!this.isMoving)if(this._tempWood);else{var r=new o(e.node.worldPosition.x,0,e.node.worldPosition.z);if(o.distance(this.node.position,r)<1.2)for(var c=0;c<e.piece.length;c++)if(e.info.foodLeft[c]>0){var l=new o(e.piece[c].worldPosition.x,0,e.piece[c].worldPosition.z);if(o.distance(l,this.node.worldPosition)<.25)return this._tempWood=e,this._tempWoodIndex=c,this._tempWoodTimer=0,void(this._tempWoodSoundTimer=0)}}}}},e.eatFood=function(t,i,e){if(1==F.instance.gameStep&&F.instance.nextGameStep(2),t.isMoneyFood||0!=_[t.id].type?15==t.id?(F.instance.gold+=w,this.isAI||C.playSound("gold")):16==t.id&&(F.instance.wood+=w,this.isAI||(C.playSound("gold"),13==F.instance.gameStep&&F.instance.nextGameStep(14))):(this._foodTimer=0,this.isAI?this.curFoodCount=C.clampf(this.curFoodCount+1,0,this.maxFoodCount):this.curFoodCount=C.clampf(this.curFoodCount+1,0,this.maxFoodCount+F.instance.playerFoodCountMax),this.isAI||C.showInterstitial()),0==t.info.canEat&&0==_[t.id].type&&this.tempEatFoods.indexOf(t)<0&&!t.isMoneyFood&&this.tempEatFoods.push(t),t.subFood(e),t.isMoneyFood);else{var n=t.info.foodLeft[e]/_[t.id].pieceCount;d(i).to(.3,{scale:new o(n,n,n)}).call((function(){0==n&&(i.active=!1)})).start()}if(3==t.id&&15==t.sid&&21==F.instance.gameStep&&F.instance.nextGameStep(22),0!=this.team||t.isMoneyFood||h.getScene().emit("ON_TASK_ADD",t.id),t&&!t.isMoneyFood&&0==_[t.id].type){var s=t.node.name+"_suipian",a=U.instance.getNodeByPool(s);a.active=!0,a.setParent(this.foodNode),a.setPosition(0,.05*(this.curFoodCount-1)+.02,0),a.setRotationFromEuler(360*Math.random(),360*Math.random(),360*Math.random()),this.isAI||C.playSound("food")}else if(!t.isMoneyFood&&1==_[t.id].type&&0==t.info.foodLeft[e]){var r=t.piece[e],c=C.getRandom(-.3,.3),l=C.getRandom(-.3,.3),u=new o(r.worldPosition.x,0,r.worldPosition.z),m=new o(u.x+c,0,u.z+l);U.instance.createMoney(u,m,"mutou",!0)}},e.clearFood=function(t,i,e){var o=this;if(void 0===e&&(e=-1),!this.isAI&&t&&this.tempEatFoods.length>0){U.instance.showUI("UIShaozi");for(var n=0;n<this.tempEatFoods.length;n++)this.tempEatFoods[n]&&this.tempEatFoods[n].info&&(this.tempEatFoods[n].info.canEat=1,U.instance.ChuiShaoEffect(this.node.worldPosition.clone(),this.tempEatFoods[n].node.worldPosition.clone()))}if(this.tempEatFoods=[],this.isAI){this.curFoodCount=0;for(var s=this.foodNode.children,a=0;a<s.length;a++){var r=s[a];if(r.setParent(U.instance.node),a--,0==this.team){var c=F.instance.getFoodIDByPieceName(r.name);h.getScene().emit("MAIN_TASK_PROGRESS",1,c)}U.instance.recoverNodeToPush(r.name,r)}}else{i.y=.1;for(var l=this.foodNode.children,u=0,m=function(t){var n=l[l.length-1],s=n.worldPosition.clone();n.setParent(U.instance.node),n.setWorldPosition(s),t--;var a=C.clampf(.25+.05*u,.25,.6);if(u++,0==o.team){var r=F.instance.getFoodIDByPieceName(n.name);h.getScene().emit("MAIN_TASK_PROGRESS",1,r)}if(d(n).to(a,{position:i}).call((function(){U.instance.recoverNodeToPush(n.name,n)})).start(),o.curFoodCount=C.clampf(o.curFoodCount-1,0,o.curFoodCount),e>0&&u>=e)return f=t,"break";f=t},f=0;f<l.length;f++){if("break"===m(f))break}}},e.updateEatGold=function(){if(!this.isAI){for(var t=0;t<U.instance.money.length;t++){var i=U.instance.money[t];o.distance(i.worldPosition,this.node.worldPosition)<.4&&(U.instance.money.splice(t,1),t--,i.addComponent(T))}for(var e=0;e<U.instance.foods.length;e++){var n=U.instance.foods[e];if(n.isMoneyFood&&o.distance(n.node.worldPosition,this.node.worldPosition)<2)for(var s=0;s<n.piece.length;s++){var a=n.piece[s];if(n.info.foodLeft[s]>0)if(o.distance(a.worldPosition,this.node.worldPosition)<.5)this.eatFood(n,a,s),a.addComponent(T).isRecover=!1}}}},e.updateShowHelpMeUI=function(){if(U.instance&&U.instance.curPlayer){var t=o.distance(this.node.worldPosition,U.instance.curPlayer.node.worldPosition);t<.15&&!this._isShowHelpMeUI?(this._isShowHelpMeUI=!0,h.getScene().emit("SHOW_HELP_ME_UI",this)):t>=.2&&this._isShowHelpMeUI&&(this._isShowHelpMeUI=!1)}},e.sendReward=function(){if(this){U.instance.ants.push(this),this.isHelpMeAnt=!1,this.body1&&(this.body1.active=!1,this.body.active=!0);var t=F.instance.addAntByID(this.id,this.sid);C.playSound("getant"),U.instance.showEffect("eff_BornAnt",this.node.position,1),h.getScene().emit("BUILDING_ANT_CLEAR",this),U.instance.tryTaskSomeThingByCreateAntSuccess(t.id)}},e.updateShowBugSaveUI=function(){if(U.instance&&U.instance.curPlayer){var t=o.distance(this.node.worldPosition,U.instance.curPlayer.node.worldPosition);t<.2&&!this._isShowBugSaveUI?(this._isShowBugSaveUI=!0,h.getScene().emit("SHOW_BUGSAVE_UI",this)):t>=.25&&this._isShowBugSaveUI&&(this._isShowBugSaveUI=!1)}},e.updateRebornAnts=function(t){if(this.isDead&&U.instance&&U.instance.curPlayer){var i=U.instance.curPlayer;if(i.isMoving)0!=this._rebornTimer&&(this._rebornTimer=0,h.getScene().emit("ON_PLAYER_PROGRESS_CLEAR"));else o.distance(this.node.worldPosition,i.node.worldPosition)<.2?(0==this._rebornTimer&&h.getScene().emit("ON_PLAYER_PROGRESS",2),this._rebornTimer+=t,this._rebornTimer>=2&&(this._rebornTimer=0,h.getScene().emit("ON_PLAYER_PROGRESS_CLEAR"),this.reborn())):this._rebornTimer=0}},e.subBlood=function(t,i){if(!this.isDead)if(this.isFighting=!0,this.fightingTimer=0,this.blood=C.clampf(this.blood-t,0,this.bloodMax),this.blood<=0){var e=0;1==this.team&&0==this.id?e=C.getRandomInt(3,5):1==this.team&&6==this.id&&(e=C.getRandomInt(2,3));for(var n=0;n<e;n++){var s=C.getRandom(-.3,.3),a=C.getRandom(-.3,.3),h=new o(this.node.position.x,0,this.node.position.z),r=new o(h.x+s,0,h.z+a);U.instance.createMoney(h,r,"shandian")}if(3==this.id&&i&&!i.isAI&&(A==I.OPPO||A==I.VIVO)&&(F.instance.gongxiDelayTime>0||F.instance.gongxiInterAdRate>0)){U.instance.uiGongXi.init({type:2,id:3,count:1})}this.dead()}else if((3==this.id||4==this.id||5==this.id)&&!i.isAI){var c=new o;this.hitPushDir=o.subtract(c,new o(this.node.worldPosition.x,0,this.node.worldPosition.z),new o(i.node.worldPosition.x,0,i.node.worldPosition.z)).normalize(),this.hitPushVelocity=1;var l=d(this.node).to(.12,{scale:new o(1.2,1.2,1.2)}),u=d(this.node).to(.12,{scale:new o(1,1,1)});d(this.node).sequence(l,u).start()}},e.dead=function(t){var i=this;if(void 0===t&&(t=!0),!this.isDead)if(this.changeAnimation("Dead"),this.isDead=!0,0==this.team&&this.createUIAntDead(),1==this.team){h.getScene().emit("MAIN_TASK_PROGRESS",0,this.id);var e=U.instance.ants.indexOf(this);U.instance.ants.splice(e,1);var n=this.node.worldPosition.clone();if(U.instance.showEffect("eff_Dead",n,1),3==this.id||4==this.id||5==this.id){this.scheduleOnce((function(){var t=new o(i.node.worldPosition.x,0,i.node.worldPosition.z),e=i.id-2;U.instance.createTempFood("Dead_zhizhu"+e,t);var n=U.instance.ants.indexOf(i);n>-1&&U.instance.ants.splice(n,1);var s=i.node;i.node.removeComponent(i),i.destroy(),i.node.removeComponent(i.aiController),i.aiController.destroy(),U.instance.recoverNodeToPush(s.name,s)}),1);var s=parseInt(localStorage.getItem("spiderEnemyCount")||"0");s+=1,localStorage.setItem("spiderEnemyCount",s.toString()),s<=3&&(F.instance.reportCustom("SpiderEnemy"+Math.floor(s)),C.reportEvent("SpiderEnemy"+Math.floor(s)))}else if(6==this.id){var a=U.instance.ants.indexOf(this);a>-1&&U.instance.ants.splice(a,1);var d=this.node;this.node.removeComponent(this),this.destroy(),this.node.removeComponent(this.aiController),this.aiController.destroy(),U.instance.recoverNodeToPush(d.name,d)}else if(0==this.id){for(var r=this.foodNode.children,c=0;c<r.length;c++){var l=r[c];l.setParent(U.instance.node),c--,U.instance.recoverNodeToPush(l.name,l)}var u=U.instance.ants.indexOf(this);u>-1&&U.instance.ants.splice(u,1);var m=this.node;this.node.removeComponent(this),this.destroy(),this.node.removeComponent(this.aiController),this.aiController.destroy(),U.instance.recoverNodeToPush(m.name,m);var f=parseInt(localStorage.getItem("redEnemyCount")||"0");f+=1,localStorage.setItem("redEnemyCount",f.toString()),f<=3&&F.instance.reportCustom("RedEnemy"+Math.floor(f))}t&&0==P.length&&C.playSound("dead")}else F.instance.deadAntBySID(this.sid)},e.reborn=function(){this.isDead=!1,this.blood=this.bloodMax,F.instance.deadAntBySID(this.sid,!1)},m(i,[{key:"isAttacker",get:function(){return g.indexOf(this.id)>-1}}]),i}(r))||D);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIMoney.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Config.ts","./DataManager.ts","./Tools.ts","./GameManager.ts"],(function(n){"use strict";var i,t,e,o,a,c,s,r,l,h,u,f,d,p,y,w,g,v;return{setters:[function(n){i=n.cclegacy,t=n._decorator,e=n.Node,o=n.Label,a=n.UITransform,c=n.Vec3,s=n.tween,r=n.Component},function(n){l=n.applyDecoratedDescriptor,h=n.inheritsLoose,u=n.initializerDefineProperty,f=n.assertThisInitialized,d=n.defineProperty},function(n){p=n.CUR_PLATFORM,y=n.PLATFORM_TYPE},function(n){w=n.default},function(n){g=n.Tools},function(n){v=n.GameManager}],execute:function(){var b,m,M,T,N,L,C,I,k,B,P;i._RF.push({},"fbb676r74pACJk87LkwvyQO","UIMoney",void 0);var U=t.ccclass,z=t.property;n("UIMoney",(b=U("UIMoney"),m=z(e),M=z(e),T=z(e),N=z(o),b((I=l((C=function(n){function i(){for(var i,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return i=n.call.apply(n,[this].concat(e))||this,u(f(i),"action",I,f(i)),u(f(i),"maskNode",k,f(i)),u(f(i),"iconNode",B,f(i)),u(f(i),"countLabel",P,f(i)),d(f(i),"actTween",void 0),d(f(i),"info",null),i}h(i,n);var t=i.prototype;return t.onLoad=function(){this.node.getComponent(a).priority=6,this.action.getChildByName("TT").active=p==y.TT,this.action.getChildByName("Else").active=p!=y.TT},t.start1=function(){var n=this;if(1==w.instance.ziYuanJiangLi){var i=cc.winSize,t=w.instance.showBannerTime+.5,e=this.action.getComponent(a).convertToWorldSpaceAR(this.action.position).subtract3f(i.width/2,.7*i.height,0);this.action.setPosition(e),this.scheduleOnce((function(){n.action.setPosition(new c(0,0,0))}),t)}},t.init=function(n){if(this.info=n,this.info)if(this.start1(),w.instance.reportCustom("MoneyUIShow"),g.reportEvent("MoneyUIShow"),this.action.active=!0,this.action.setScale(0,0,0),this.maskNode.active=!0,this.actTween=s(this.action).to(.5,{scale:new c(1,1,1)},{easing:"quintOut"}).start(),this.refreshUI(),w.instance.ziYuanJiangLi){var i=w.instance.showBannerTime;this.scheduleOnce((function(){g.showBanner(!0),console.log("展示banner")}),i)}else g.showBanner(!0);else this.closeMine()},t.refreshUI=function(){if(0==this.info.type){for(var n=0;n<this.iconNode.children.length;n++)this.iconNode.children[n].active="gold"==this.iconNode.children[n].name;this.countLabel.string="x"+Math.floor(this.info.count)}else if(1==this.info.type){for(var i=0;i<this.iconNode.children.length;i++)this.iconNode.children[i].active="wood"==this.iconNode.children[i].name;this.countLabel.string="x"+Math.floor(this.info.count)}},t.onBtnVideoClick=function(){g.playSound("click");var n=function(){this.sendReward()}.bind(this);w.instance.watchVideo("Money",n)},t.sendReward=function(){0==this.info.type?w.instance.gold+=this.info.count:1==this.info.type&&(w.instance.wood+=this.info.count),this.closeMine()},t.onBtnCloseClick=function(){g.playSound("click"),this.closeMine(),g.showInterstitial()},t.closeMine=function(){this.actTween&&this.actTween.stop(),this.action.active=!1,this.maskNode.active=!1,v.instance.closedShowMoney(),p!=y.OPPO&&p!=y.VIVO&&g.showBanner(!1)},i}(r)).prototype,"action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=l(C.prototype,"maskNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=l(C.prototype,"iconNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=l(C.prototype,"countLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=C))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./UITip.ts","./Config.ts","./ShufenManager.ts","./DataManager.ts","./Tools.ts","./UIMoneyCube.ts","./CameraFollow.ts","./Money.ts","./GoldFly.ts","./AIController.ts","./UIAntDead.ts","./UIEnemyMark.ts","./UIBlood.ts","./UIHelpMeMin.ts","./UIBugSaveMin.ts","./Ant.ts","./UIFoodVideoMin.ts","./Food.ts","./LanguageData.ts","./LocalizedLabel.ts","./UIHelpMe.ts","./UIFly.ts","./UIGongXi.ts","./UIBugSave.ts","./UIMoney.ts","./MoneyCube.ts","./UIMoneyCubeMark.ts","./UIFoodVideo.ts","./GameManager.ts","./UINextWorld.ts","./UILoading.ts","./UISet.ts","./JoyStick.ts","./UIYinSi.ts","./TestCount.ts","./UIStarAnimation.ts","./videoSpr.ts","./UIExReward.ts","./UIJuHua.ts","./UIOffline.ts","./Label3D.ts","./UILockTip.ts","./Building.ts","./UIPlayerCircle.ts","./UIJingXi.ts","./UIShaozi.ts","./Area.ts","./UINativeBanner.ts","./ScaleAnimation.ts","./LocalizedSprite.ts","./UIGuide.ts","./UITaskDone.ts","./MapCollision.ts","./UITask.ts","./UIMain.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});